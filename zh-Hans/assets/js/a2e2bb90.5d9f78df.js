"use strict";(self.webpackChunkliangchao_website=self.webpackChunkliangchao_website||[]).push([[3356],{5934:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"tutorial-apps/root-preprocessor-tutorial","title":"Root Image Preprocessor Tutorial","description":"Overview","source":"@site/docs/tutorial-apps/root-preprocessor-tutorial.md","sourceDirName":"tutorial-apps","slug":"/tutorial-apps/root-preprocessor-tutorial","permalink":"/zh-Hans/docs/tutorial-apps/root-preprocessor-tutorial","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorial-apps/root-preprocessor-tutorial.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"maze-game-tutorial","permalink":"/zh-Hans/docs/tutorial-apps/maze-game-tutorial"},"next":{"title":"Sensor App Tutorial","permalink":"/zh-Hans/docs/tutorial-apps/sensor-app-tutorial"}}');var t=r(4848),i=r(8453);const o={},l="Root Image Preprocessor Tutorial",a={},d=[{value:"Overview",id:"overview",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Detailed Workflow",id:"detailed-workflow",level:2},{value:"A. Polygon Stage",id:"a-polygon-stage",level:3},{value:"B. Automation Settings",id:"b-automation-settings",level:3},{value:"C. Manual Stage",id:"c-manual-stage",level:3},{value:"D. Exporting",id:"d-exporting",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Keyboard &amp; Mouse Shortcuts",id:"keyboard--mouse-shortcuts",level:2}];function c(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"root-image-preprocessor-tutorial",children:"Root Image Preprocessor Tutorial"})}),"\n",(0,t.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(s.p,{children:["The Root Image Preprocessor recreates the functionality of the legacy desktop scripts (",(0,t.jsx)(s.code,{children:"0_tranbg.py"})," and ",(0,t.jsx)(s.code,{children:"1_process.py"}),") directly in the browser. It lets you batch upload scanner images, isolate the region of interest (ROI) with polygons, run adaptive background removal + high-pass filtering, and finish with manual brush clean-up before exporting high-contrast masks."]}),"\n",(0,t.jsx)(s.h2,{id:"key-features",children:"Key Features"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Batch Uploads"}),": Drag multiple JPG/PNG scans into the left sidebar for sequential work."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Polygon ROI Selection"}),": Click around the root system to define the specific area used for filtering."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Adjustable Automation"}),": Threshold, morphology kernel, blur radius, and ROI threshold sliders reproduce the OpenCV pipeline without code."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Manual Brush & Undo"}),": Touch up thin roots or remove artifacts with draw/erase brushes and a history stack."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"One-Click Export"}),": Download processed masks as PNG files ready for measurement packages such as WinRHIZO or ImageJ."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Open the App"}),": Navigate to ",(0,t.jsx)(s.code,{children:"/app/root-processor"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Upload Images"}),": Use \u201cUpload Images\u201d or drag files into the sidebar; oversized files auto-scale to 1800 px max."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Trace ROI"}),": Stay in ",(0,t.jsx)(s.em,{children:"Polygon Mode"})," and click around the root network. Use \u201cClose Polygon\u201d when done."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Tune Automation"}),": Adjust threshold/morphology sliders as needed, then click \u201cRun ROI Processing\u201d."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Manual Cleanup"}),": Switch to ",(0,t.jsx)(s.em,{children:"Manual Brush"})," to add dark strokes or erase noise; \u201cUndo Brush Stroke\u201d reverts the last edit."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Download"}),": Click \u201cDownload Processed PNG\u201d once satisfied. Repeat for remaining images via the sidebar list."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"detailed-workflow",children:"Detailed Workflow"}),"\n",(0,t.jsx)(s.h3,{id:"a-polygon-stage",children:"A. Polygon Stage"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Point Placement"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Click sequentially along the outer boundary."}),"\n",(0,t.jsx)(s.li,{children:"\u201cUndo Point\u201d removes the last vertex; \u201cReset Polygon\u201d clears everything."}),"\n",(0,t.jsx)(s.li,{children:"Close the polygon before running automation."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"ROI Tips"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Keep polygons tight to reduce processing time."}),"\n",(0,t.jsx)(s.li,{children:"Avoid self-intersecting shapes; the canvas overlay shows the current path."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"b-automation-settings",children:"B. Automation Settings"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Control"}),(0,t.jsx)(s.th,{children:"Mirrors Script"}),(0,t.jsx)(s.th,{children:"Guidance"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Background threshold"}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"cv2.threshold"})," in ",(0,t.jsx)(s.code,{children:"0_tranbg.py"})]}),(0,t.jsx)(s.td,{children:"Increase for darker backgrounds; decrease if roots disappear"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Noise kernel"}),(0,t.jsx)(s.td,{children:"Morphological open/close"}),(0,t.jsx)(s.td,{children:"Larger values remove speckles but may thin roots"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Blur radius"}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"cv2.morphologyEx"}),"/background modeling"]}),(0,t.jsx)(s.td,{children:"Higher blur enhances large-scale illumination drift"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"ROI threshold"}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"cv2.threshold"})," in ",(0,t.jsx)(s.code,{children:"1_process.py"})]}),(0,t.jsx)(s.td,{children:"Lower to keep faint fibers, higher to keep only bold roots"})]})]})]}),"\n",(0,t.jsxs)(s.p,{children:["Click ",(0,t.jsx)(s.strong,{children:"Preview Background Cleanup"})," anytime to see the effect of the background parameters before the full ROI pass."]}),"\n",(0,t.jsx)(s.h3,{id:"c-manual-stage",children:"C. Manual Stage"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Switch to ",(0,t.jsx)(s.em,{children:"Manual Brush"})," after automation finishes."]}),"\n",(0,t.jsxs)(s.li,{children:["Choose ",(0,t.jsx)(s.strong,{children:"Draw (black)"})," to reinforce missing roots or ",(0,t.jsx)(s.strong,{children:"Erase (white)"})," for stray artifacts."]}),"\n",(0,t.jsxs)(s.li,{children:["Use ",(0,t.jsx)(s.code,{children:"Brush size"})," slider for fine vs. broad edits."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Undo Brush Stroke"})," reverts to the previous history snapshot (up to 10 levels)."]}),"\n",(0,t.jsx)(s.li,{children:"\u201cReset Processed Result\u201d clears automation + manual edits so you can retrace the ROI."}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"d-exporting",children:"D. Exporting"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Processed outputs are 8-bit grayscale PNGs (white background, black roots)."}),"\n",(0,t.jsxs)(s.li,{children:["Filenames follow ",(0,t.jsx)(s.code,{children:"originalname-processed.png"}),"."]}),"\n",(0,t.jsx)(s.li,{children:"Repeat for each entry in the sidebar list; status chips show \u201cProcessed\u201d vs \u201cPending\u201d."}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Scanning"}),": Aim for even lighting and minimal soil residue to reduce threshold tweaking."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Polygon Granularity"}),": More points help with complex shapes but keep under the 60-point limit."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Parameter Iteration"}),": Start with default sliders, preview, then only adjust one control at a time."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Manual Layering"}),": Perform big structural edits first with large brushes, then zoom (browser zoom) and refine with smaller sizes."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Data Handling"}),": Download after each successful edit session; the browser keeps images in memory only for the active tab."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Issue"}),(0,t.jsx)(s.th,{children:"Cause"}),(0,t.jsx)(s.th,{children:"Fix"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"\u201cProcessed result detected\u201d warning in polygon mode"}),(0,t.jsx)(s.td,{children:"Manual edits already exist"}),(0,t.jsx)(s.td,{children:"Use \u201cReset Processed Result\u201d to re-enable polygon editing"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Thin roots missing after automation"}),(0,t.jsx)(s.td,{children:"Thresholds too high / kernel too large"}),(0,t.jsx)(s.td,{children:"Lower ROI threshold and noise kernel, then rerun"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Brush feels laggy on large canvases"}),(0,t.jsx)(s.td,{children:"Very high-resolution uploads"}),(0,t.jsx)(s.td,{children:"Crop or downscale before uploading, or accept automatic 1800 px limit"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Download button disabled"}),(0,t.jsx)(s.td,{children:"No processed image yet"}),(0,t.jsx)(s.td,{children:"Complete polygon + automation first"})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"keyboard--mouse-shortcuts",children:"Keyboard & Mouse Shortcuts"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Canvas Click"}),": Add polygon point."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Pointer drag (manual mode)"}),": Draw/erase with current brush."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Browser zoom"})," (",(0,t.jsx)(s.code,{children:"Cmd/Ctrl +"})," / ",(0,t.jsx)(s.code,{children:"-"}),"): Helps with precise manual edits on high-density images."]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.p,{children:["With this tutorial you can replicate the original Python preprocessing workflow entirely in the browser, keeping raw scans intact while producing consistent, high-contrast masks for downstream quantification.***\n",(0,t.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:(0,t.jsx)("a",{className:"button button--secondary",href:"/app/root-processor",children:"App"})})]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>o,x:()=>l});var n=r(6540);const t={},i=n.createContext(t);function o(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);