"use strict";(self.webpackChunkliangchao_website=self.webpackChunkliangchao_website||[]).push([[4255],{2835:(e,t,n)=>{n.d(t,{A:()=>p});var i=n(6540),o=n(4848);const a={maxWidth:"800px",margin:"60px auto 0",textAlign:"left",padding:"0 20px"},s={fontSize:"2rem",fontWeight:"600",marginBottom:"16px",color:"var(--ifm-color-emphasis-900)"},r={fontSize:"1.1rem",color:"var(--ifm-color-emphasis-700)",lineHeight:1.6,marginBottom:"16px"},l={borderLeft:"4px solid var(--ifm-border-color)",paddingLeft:"16px",color:"var(--ifm-color-emphasis-700)",fontStyle:"italic",lineHeight:1.6,marginBottom:"16px"},c={backgroundColor:"var(--ifm-background-surface-color)",padding:"16px",borderRadius:"12px",overflowX:"auto",border:"1px solid var(--ifm-border-color)",color:"var(--ifm-color-emphasis-800)"},d={fontSize:"1.5rem",fontWeight:"600",marginBottom:"16px",color:"var(--ifm-color-emphasis-900)"};function p({containerStyle:e}){const[t,n]=(0,i.useState)(!1),[p,m]=(0,i.useState)(!1),h="LiangchaoDeng. (2025). smiler488/smiler488.github.io: Digital Plant Phenotyping Platform v25.0 (v25.0.0). Zenodo. https://doi.org/10.5281/zenodo.17544584",u="@software{Deng2025_DPPP_v25,\n  author       = {Deng, Liangchao},\n  title        = {Digital Plant Phenotyping Platform (v25.0)},\n  year         = {2025},\n  publisher    = {Zenodo},\n  doi          = {10.5281/zenodo.17544584},\n  url          = {https://doi.org/10.5281/zenodo.17544584},\n  note         = {[Computer software]}\n}";return(0,o.jsxs)("div",{style:{...a,...e},children:[(0,o.jsx)("h2",{style:s,children:"Citation"}),(0,o.jsxs)("p",{style:r,children:["If you use ",(0,o.jsx)("strong",{children:"Digital Plant Phenotyping Platform v25.0"})," or any of its applications in your research, please cite it as:"]}),(0,o.jsxs)("blockquote",{style:l,children:["LiangchaoDeng. (2025)."," ",(0,o.jsx)("em",{children:"smiler488/smiler488.github.io: Digital Plant Phenotyping Platform v25.0 (v25.0.0)"}),". Zenodo.",(0,o.jsx)("br",{}),(0,o.jsx)("a",{href:"https://doi.org/10.5281/zenodo.17544584",children:"https://doi.org/10.5281/zenodo.17544584"})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",gap:"12px"},children:[(0,o.jsx)("button",{type:"button",onClick:async()=>{try{if("undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(h);else if("undefined"!=typeof document){const e=document.createElement("textarea");e.value=h,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}n(!0),setTimeout((()=>n(!1)),2e3)}catch{n(!1)}},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid var(--ifm-color-emphasis-900)",backgroundColor:"var(--ifm-color-emphasis-900)",color:"var(--ifm-color-emphasis-0)",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"transform 0.15s ease, background-color 0.15s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-primary)",e.currentTarget.style.borderColor="var(--ifm-color-primary)",e.currentTarget.style.transform="translateY(-1px)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.borderColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.transform="translateY(0)"},children:t?"Copied!":"Copy citation"}),(0,o.jsx)("span",{style:{fontSize:"0.9rem",color:t?"var(--ifm-color-success)":"var(--ifm-color-emphasis-600)"},children:t?"Citation copied to clipboard.":"Click to copy APA citation."})]}),(0,o.jsx)("a",{href:"https://doi.org/10.5281/zenodo.17544584",style:{display:"inline-block",marginBottom:"24px"},children:(0,o.jsx)("img",{src:"https://zenodo.org/badge/DOI/10.5281/zenodo.17544584.svg",alt:"DOI badge",style:{height:"32px"}})}),(0,o.jsx)("hr",{style:{border:"none",borderTop:"1px solid var(--ifm-border-color)",marginBottom:"24px"}}),(0,o.jsx)("h3",{style:d,children:"BibTeX citation (Zotero \u2192 File \u2192 Import from Clipboard)"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",gap:"12px"},children:[(0,o.jsx)("button",{type:"button",onClick:async()=>{try{if("undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(u);else if("undefined"!=typeof document){const e=document.createElement("textarea");e.value=u,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}m(!0),setTimeout((()=>m(!1)),2e3)}catch{m(!1)}},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid var(--ifm-color-emphasis-900)",backgroundColor:"var(--ifm-color-emphasis-900)",color:"var(--ifm-color-emphasis-0)",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"transform 0.15s ease, background-color 0.15s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-primary)",e.currentTarget.style.borderColor="var(--ifm-color-primary)",e.currentTarget.style.transform="translateY(-1px)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.borderColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.transform="translateY(0)"},children:p?"Copied!":"Copy BibTeX"}),(0,o.jsx)("span",{style:{fontSize:"0.9rem",color:p?"var(--ifm-color-success)":"var(--ifm-color-emphasis-600)"},children:p?"BibTeX copied to clipboard. Switch to Zotero and choose Import from Clipboard.":"Click to copy BibTeX to clipboard for Zotero import."})]}),(0,o.jsx)("pre",{style:c,children:(0,o.jsx)("code",{children:u})})]})}},4619:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(6540),o=n(7921),a=n(5082),s=n(4848);function r({children:e}){const[t,n]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{const e=(0,a.b)();if(e){e.auth.getUser().then((({data:e})=>{const t=!!e?.user;n(t),"undefined"!=typeof window&&(window.__APP_AUTH_OK__=t)}));const{data:t}=e.auth.onAuthStateChange(((e,t)=>{const i=!!t?.user;n(i),"undefined"!=typeof window&&(window.__APP_AUTH_OK__=i)}));return()=>t?.subscription?.unsubscribe?.()}const t=!!(0,o.Ht)();n(t),"undefined"!=typeof window&&(window.__APP_AUTH_OK__=t)}),[]),(0,s.jsxs)("div",{children:[!t&&(0,s.jsx)("div",{className:"app-card",style:{marginBottom:12},children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)("span",{className:"app-muted",children:"Please login to use app features"}),(0,s.jsx)("a",{className:"button button--secondary",href:"/auth",children:"Login / Register"})]})}),e]})}},4911:(e,t,n)=>{n.d(t,{B2:()=>l,S:()=>a,dO:()=>r,kh:()=>i,lJ:()=>s,wn:()=>o});const i="https://api.hunyuan.cloud.tencent.com/v1/chat/completions",o="sk-JdwAvFcfyW5ngP2i3cpeB43QrR92gjnRcNzKkMfpcEVu8hlE";function a(){return i}function s(e,t){return{model:t||"hunyuan-lite",messages:[{role:"system",content:[{type:"text",text:"Respond ONLY with strict JSON object. No markdown, no prose."}]},{role:"user",content:[{type:"text",text:(e||"").trim()||"You are a helpful assistant that generates ECharts option JSON based on CSV summaries."}]}],response_format:{type:"json_object"},stream:!1}}function r(e){return Array.isArray(e?.choices)&&e.choices.length>0?e.choices[0].message?.content||"":e?.Response&&Array.isArray(e.Response.Choices)&&e.Response.Choices.length>0?e.Response.Choices[0].Message?.Content||"":"string"==typeof e?e:JSON.stringify(e,null,2)}async function l(e,t,n={}){if("string"==typeof e&&e.startsWith("mock://")){const n=e.slice(7);if("ai-data-visualizer"===n){const e={summary:"Sample analysis: sales grew steadily across quarters, with Q4 showing the highest revenue. Seasonal dips occur in Q2 due to inventory resets.",insights:["Strong upward trend overall; expect ~12% YoY growth.","Product beta overtook alpha in Q3 and maintained the lead.","Recommend stacked area chart to communicate contribution per product."],chart_option:{title:{text:"Mock Revenue Correlation Heatmap",left:"center"},tooltip:{position:"top"},grid:{left:"5%",right:"5%",top:"12%",bottom:"18%"},xAxis:{type:"category",data:["North","South","East","West"],splitArea:{show:!0}},yAxis:{type:"category",data:["Q1","Q2","Q3","Q4"],splitArea:{show:!0}},visualMap:{min:60,max:210,calculable:!0,orient:"horizontal",left:"center",bottom:"4%"},series:[{name:"Revenue",type:"heatmap",label:{show:!0},data:[[0,0,120],[1,0,135],[2,0,150],[3,0,110],[0,1,98],[1,1,142],[2,1,160],[3,1,100],[0,2,160],[1,2,175],[2,2,182],[3,2,138],[0,3,190],[1,3,205],[2,3,210],[3,3,168]]}]}},t={choices:[{message:{content:JSON.stringify(e,null,2)}}]};return{ok:!0,status:200,json:async()=>t,text:async()=>JSON.stringify(t),headers:new Map([["content-type","application/json"]])}}if("journal-selector"===n){const e={overview:{abstract_summary:t?.question?.slice(0,120)||"N/A",alignment_summary:"Mocked response (replace API URL for real results)."},journals:[{journal_name:"Mock Journal of AI",publisher:"Mock Press",discipline_scope:"AI & Data Science",impact_factor_2024:"8.5",jcr_quartile:"Q1",acceptance_rate:"18%",initial_review_weeks:6,oa_type:"Hybrid OA",apc_usd:2400,submission_advice:"Strong alignment with ML/DS topics.",warning_status:"-"}],notes:"This is a mock response generated locally."},n={choices:[{message:{content:JSON.stringify(e,null,2)}}]};return{ok:!0,status:200,json:async()=>n,text:async()=>JSON.stringify(n),headers:new Map([["content-type","application/json"]])}}if("ai-solver"===n){const e=(new Date).toISOString(),n=t?.question||"No question provided",i=t?.model||"hunyuan-lite",o=`${!!t?.imageBase64||!!t?.imageUrl?"Mock Vision Analysis":"Mock Text Analysis"} (model: ${i})\n\nUser question:\n${n}\n\nThis is a mocked response for demo purposes. Replace proxy URL with your real API when ready.`,a={Response:{RequestId:"mock-"+Math.random().toString(36).slice(2),Choices:[{Message:{Content:o}}],Usage:{PromptTokens:128,CompletionTokens:256,TotalTokens:384},Timestamp:e}};return{ok:!0,status:200,json:async()=>a,text:async()=>JSON.stringify(a),headers:new Map([["content-type","application/json"]])}}}return fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...n},body:JSON.stringify(t)})}},5082:(e,t,n)=>{n.d(t,{b:()=>a});var i=n(1270);let o=null;function a(){if(o)return o;if("undefined"==typeof window)return null;const e=window.__SUPABASE_URL__,t=window.__SUPABASE_ANON_KEY__;return e&&t?(o=(0,i.UU)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0}}),o):null}},5246:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(6540),o=n(3018),a=n(2835),s=n(4619),r=n(4911),l=n(4848);function c(e){if(Array.isArray(e?.choices)&&e.choices.length>0){const t=e.choices[0].message?.content||"",n=e.usage||{};return{text:`${t}\n\n---\nTokens: ${n.total_tokens||"N/A"} (Prompt: ${n.prompt_tokens||"N/A"}, Completion: ${n.completion_tokens||"N/A"})`,raw:e}}if(e?.Response&&Array.isArray(e.Response.Choices)&&e.Response.Choices.length>0){const t=e.Response.Choices[0].Message?.Content||"",n=e.Response.Usage||{};return{text:`${t}\n\n---\nTokens: ${n.TotalTokens||"N/A"} (Prompt: ${n.PromptTokens||"N/A"}, Completion: ${n.CompletionTokens||"N/A"})`,raw:e}}return{text:"string"==typeof e?e:JSON.stringify(e,null,2),raw:e}}function d(){const e=(0,i.useMemo)(r.S,[]),{videoRef:t,ready:n,error:d}=function(){const e=(0,i.useRef)(null),[t,n]=(0,i.useState)(!1),[o,a]=(0,i.useState)(null);return(0,i.useEffect)((()=>{let t=null;return(async()=>{try{t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}),e.current&&(e.current.srcObject=t,await e.current.play(),n(!0))}catch(i){a(i?.message||String(i))}})(),()=>{t&&t.getTracks().forEach((e=>e.stop()))}}),[]),{videoRef:e,ready:t,error:o}}(),[p,m]=(0,i.useState)(""),[h,u]=(0,i.useState)(!1),g=[{id:"default",name:"Intelligent Analysis Assistant",prompt:"ROLE: Professional multimodal analyst\nTASK: Analyze the problem shown in the image, photo, or text, and provide a practical, step-by-step solution.\nMETHOD:\n- If an image is provided: briefly describe the visible content and extract key information (titles, labels, warnings, numbers).\n- Identify the core problem and its constraints, then decompose it into sub-questions.\n- Provide the optimal solution path; if multiple approaches exist, show the top 2 with pros and cons.\nOUTPUT:\n- Understanding (key issue and input summary)\n- Steps/Analysis (reasoning and procedure)\n- Answer (final actionable solution and parameters)\n- Checks/Uncertainties (assumptions and unclear areas)\n- Next actions (1\u20133 follow-up suggestions)",description:"General intelligent analysis and solution generation"},{id:"math",name:"Math Problem Solver",prompt:"ROLE: Mathematician and educator\nTASK: Solve the given math problem with rigorous reasoning and precise results.\nMETHOD:\n- List knowns, unknowns, conditions, and goals; unify notations and units.\n- Choose the most elegant, rigorous method; optionally include one alternative.\n- Keep derivations auditable; show analytical expressions before numeric results.\nOUTPUT:\n- Understanding (knowns, goal, notation)\n- Steps/Analysis (key formulas and derivation)\n- Answer (final result: exact form \u2192 numeric)\n- Checks/Uncertainties (domain restrictions, special cases)\n- Next actions (numerical verification or plotting tip)",description:"Equation solving, geometry, algebra, and other math problems"},{id:"lab_safety",name:"Laboratory Safety Assessment",prompt:"ROLE: Laboratory safety inspector\nTASK: Identify potential hazards and compliance issues in the lab image/text and recommend corrections.\nMETHOD:\n- Classify risks: chemical, biological, physical, electrical, ergonomic, fire, etc.\n- Identify issues based on general safety standards (PPE, labeling, segregation, ventilation, waste disposal).\n- Provide corrective measures with priorities (high/medium/low).\nOUTPUT:\n- Understanding (scene and visible risks)\n- Findings by category (issues + priority)\n- Recommendations (specific corrective steps and PPE list)\n- Checks/Uncertainties (unverifiable elements)\n- Next actions (training, documentation, inspection cycle)",description:"Laboratory safety risk assessment and improvement suggestions"},{id:"plant",name:"Plant Identification Analysis",prompt:"ROLE: Botanist\nTASK: Identify the plant in the image and provide care and usage information.\nMETHOD:\n- Describe diagnostic traits (leaf, flower, fruit, bark, growth habit, habitat).\n- Provide scientific and common names, plus 2\u20133 lookalikes with distinguishing features.\n- Include native range, growth conditions, and care tips; note toxicity if relevant.\n- If uncertain, list top-3 candidates with confidence percentages.\nOUTPUT:\n- Understanding (visible traits)\n- Candidate identification(s) with confidence\n- Care and uses (cultivation and application)\n- Checks/Uncertainties (missing angles/phenological stage)\n- Next actions (additional photos or observation tips)",description:"Plant species identification and growth information"},{id:"code",name:"Code Review and Optimization",prompt:"ROLE: Senior software engineer\nTASK: Explain the purpose of the code, find potential bugs or inefficiencies, and provide improved code.\nMETHOD:\n- Detect language/environment, summarize purpose and data flow.\n- Identify logic/syntax errors, boundary cases, and performance bottlenecks.\n- Provide corrected, runnable code and a minimal reproducible example with basic test inputs.\nOUTPUT:\n- Understanding (purpose, I/O, environment)\n- Issues (bugs, inefficiencies, and reasoning)\n- Improved code (ready-to-run version)\n- Complexity (Big-O time and space)\n- Checks/Uncertainties (dependencies, assumptions)\n- Next actions (testing, linting, profiling)",description:"Code explanation, debugging, and performance optimization"},{id:"translation",name:"Academic Literature Translation",prompt:"ROLE: Academic translator/editor\nTASK: Translate the academic text into the target language with accurate terminology and fluent scholarly style.\nMETHOD:\n- Preserve structure (headings, lists, tables, citations).\n- Create a short glossary for key technical terms; add minimal notes only if necessary.\nOUTPUT:\n- Understanding (domain and tone)\n- Translation (publication-quality output)\n- Glossary (5\u201315 essential terms)\n- Notes (only if needed)",description:"Professional academic translation and terminology explanation"},{id:"physics",name:"Physics Problem Solver",prompt:"ROLE: Physicist\nTASK: Solve the physics problem step-by-step using fundamental laws and correct units.\nMETHOD:\n- List knowns/unknowns, define the system boundaries, and state the governing principles (Newton, conservation, Maxwell, thermodynamics, etc.).\n- Show clear derivations, ensure dimensional consistency, and estimate experimental uncertainties.\nOUTPUT:\n- Understanding (variables and setup)\n- Steps/Analysis (laws and reasoning)\n- Answer (result with units and significant figures)\n- Checks/Uncertainties (error sources, limiting cases)\n- Next actions (experimental verification idea)",description:"Mechanics, electromagnetism, thermodynamics, and other physics problems"},{id:"chemistry",name:"Chemistry Problem Solver",prompt:"ROLE: Chemist\nTASK: Analyze chemical reactions, stoichiometry, structures, or lab procedures.\nMETHOD:\n- Identify species and conditions; write and balance reactions; outline mechanisms when relevant.\n- For lab operations: discuss safety, feasibility, yields, and waste disposal (general guidance).\nOUTPUT:\n- Understanding (species, conditions, target)\n- Steps/Analysis (equations, mechanisms, calculations)\n- Answer (balanced results, quantities, or expected phenomena)\n- Checks/Uncertainties (side reactions, sensitivity)\n- Next actions (controls, optimization suggestions)",description:"Chemical equations, structures, mechanisms, and experiment analysis"},{id:"english",name:"English Learning Assistant",prompt:"ROLE: English tutor\nTASK: Analyze English text, explain grammar and vocabulary, and provide detailed exercise solutions.\nMETHOD:\n- Break down syntax (clauses, parts of speech, collocations).\n- Give clear explanations and 1\u20132 natural example sentences for difficult expressions.\nOUTPUT:\n- Understanding (topic and level)\n- Analysis (grammar and vocabulary)\n- Answers with explanations (if exercises)\n- Next actions (3\u20135 mini practice items)",description:"Grammar explanation, vocabulary learning, and exercise guidance"},{id:"ocr",name:"Text Extraction",prompt:"ROLE: OCR transcriber and formatter\nTASK: Extract all text from the image accurately while preserving layout and structure.\nMETHOD:\n- Maintain original paragraphing and headings; reconstruct tables using Markdown tables; preserve math/code blocks.\n- Use [?] markers for uncertain words and list them separately.\nOUTPUT:\n- Understanding (source type and readability)\n- Extracted text (structured)\n- Uncertain fragments (list with notes)\n- Next actions (reshoot tips: angle, resolution, key region)",description:"Accurate image text recognition and format preservation"},{id:"biology",name:"Biology Analysis",prompt:"ROLE: Biology instructor\nTASK: Identify and explain biological structures or processes in the image.\nMETHOD:\n- For anatomy: label parts and functions; for cellular/molecular: describe pathways; for ecology: outline species relationships.\n- Present explanations precisely in descriptive text form.\nOUTPUT:\n- Understanding (context and scale)\n- Analysis (structures/processes and relationships)\n- Findings (main biological insights)\n- Checks/Uncertainties\n- Next actions (observation or experiment suggestion)",description:"Biological structures, cell biology, and ecology analysis"},{id:"history",name:"Historical Document Interpretation",prompt:"ROLE: Historian\nTASK: Interpret the document or artifact\u2019s background, era, and cultural significance.\nMETHOD:\n- Describe visible features; infer materials and craftsmanship; relate to known historical periods (no fabricated citations).\nOUTPUT:\n- Understanding (object or text summary)\n- Analysis (era, craftsmanship, context)\n- Findings (historical significance)\n- Checks/Uncertainties\n- Next actions (evidence needed for dating/provenance)",description:"Historical document or artifact interpretation"},{id:"medical",name:"Medical Image Analysis",prompt:"ROLE: Medical information assistant (not a clinician)\nTASK: Identify anatomical structures and observable findings in medical images and explain their general significance.\nDISCLAIMER: This analysis is for informational purposes only and does NOT replace professional medical advice.\nMETHOD:\n- Describe the modality and view; list findings in structured form; provide possible interpretations without diagnosis.\nOUTPUT:\n- Understanding (modality, region)\n- Findings (structured observations)\n- Significance (general clinical meaning)\n- Checks/Uncertainties\n- Next actions (what to discuss with a doctor)",description:"Medical image structure and general interpretation (non-diagnostic)"},{id:"engineering",name:"Engineering Drawing Interpretation",prompt:"ROLE: Engineering analyst\nTASK: Interpret the engineering drawing or chart and explain its design intent and parameters.\nMETHOD:\n- Identify drawing type (mechanical, civil, circuit, P&ID, etc.); decode symbols and summarize key dimensions or tolerances.\n- For circuits: signal flow and core components; for mechanical: parts, fits, materials, and notes.\nOUTPUT:\n- Understanding (type and scope)\n- Analysis (components, parameters, relationships)\n- Findings (key tolerances, critical paths)\n- Checks/Uncertainties\n- Next actions (manufacture, assembly, validation)",description:"Engineering drawings, technical charts, and design interpretation"},{id:"finance",name:"Financial Statement Analysis",prompt:"ROLE: Financial analyst (informational only)\nTASK: Analyze financial statements or data for performance, trends, and risks.\nMETHOD:\n- Compute key metrics (growth, margins, ROE/ROA, leverage, liquidity) based on provided data only.\n- Interpret results concisely and note 2\u20133 main risks.\nOUTPUT:\n- Understanding (scope and period)\n- Metrics (summary table or bullets)\n- Analysis (drivers of performance)\n- Findings (strengths and risks)\n- Checks/Uncertainties\n- Next actions (questions for management, monitoring points)",description:"Financial statement interpretation and business performance analysis"},{id:"art",name:"Artwork Appreciation",prompt:"ROLE: Art critic\nTASK: Analyze the artwork\u2019s style, technique, composition, and aesthetic value.\nMETHOD:\n- Discuss composition, perspective, color, texture, medium, and artistic influences; do not invent provenance.\nOUTPUT:\n- Understanding (subject and medium)\n- Analysis (style, technique, composition)\n- Findings (aesthetic and contextual meaning)\n- Checks/Uncertainties\n- Next actions (comparative references or similar works)",description:"Art style, technique, and aesthetic value analysis"},{id:"legal",name:"Legal Document Interpretation",prompt:"ROLE: Legal information assistant (not a lawyer)\nTASK: Explain rights, obligations, and risk points in the legal document.\nDISCLAIMER: This content is for general informational purposes and not legal advice.\nMETHOD:\n- Summarize parties, term, key clauses (payment, IP, termination, liability, confidentiality, dispute resolution), and red flags.\nOUTPUT:\n- Understanding (document scope)\n- Clause highlights\n- Risks and ambiguities\n- Checks/Uncertainties\n- Next actions (questions or negotiable clauses)",description:"Legal document and contract clause interpretation (non-advisory)"},{id:"education",name:"Educational Material Analysis",prompt:"ROLE: Instructional designer\nTASK: Analyze teaching materials for educational value, target audience, and pedagogy.\nMETHOD:\n- Identify learning objectives, prerequisites, key concepts, and assessment focus.\n- Suggest teaching activities, sequencing, and improvement points.\nOUTPUT:\n- Understanding (topic and learners)\n- Analysis (objectives and knowledge map)\n- Findings (strengths and gaps)\n- Next actions (activities, assessments, improvements)",description:"Educational material evaluation and teaching method design"},{id:"custom",name:"Custom Mode",prompt:"ROLE: Flexible expert\nTASK: Handle special or mixed requests not covered by other presets, following general reasoning rules.\nMETHOD:\n- Clarify objective and assumptions; provide an immediately usable solution with alternative paths if needed.\nOUTPUT:\n- Understanding\n- Steps/Analysis\n- Answer / Deliverable\n- Checks/Uncertainties\n- Next actions",description:"Flexible mode for custom or mixed scenarios"}],[y,f]=(0,i.useState)("default"),[x,v]=(0,i.useState)(g[0].prompt),[b,w]=(0,i.useState)("hunyuan-vision"),[k,T]=(0,i.useState)(""),[S,A]=(0,i.useState)(!1),[j,C]=(0,i.useState)(null),[P,M]=(0,i.useState)("camera"),[U,O]=(0,i.useState)(""),[E,R]=(0,i.useState)(null),[_,D]=(0,i.useState)(null),[I,z]=(0,i.useState)(!1);async function L(t){let n;const i=!!h;n=h?e:p&&p.trim()&&/^https?:\/\//.test(p)?p:"mock://ai-solver";try{let e=t,o={};n===r.kh&&(e=function({question:e,imageBase64:t,imageUrl:n,model:i}){const o=[],a=(e||"").trim();a&&o.push({type:"text",text:a});const s=(n||"").trim(),r=function(e){return e?e.startsWith("data:")?e:`data:image/jpeg;base64,${e}`:null}(t);return s?o.push({type:"image_url",image_url:{url:s}}):r&&o.push({type:"image_url",image_url:{url:r}}),0===o.length&&o.push({type:"text",text:"\u4f60\u597d"}),{model:i||"hunyuan-vision",messages:[{role:"user",content:o}],stream:!1}}(t),o={Authorization:`Bearer ${r.wn}`});const a=await(0,r.B2)(n,e,o);if(!a.ok){const e=await a.text().catch((()=>""));if(i&&(404===a.status||405===a.status||403===a.status)){const n=e?e.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim().slice(0,120):"",i=`Default API returned ${a.status}${n?` (${n})`:""}. Using mock response instead.`,o=await(0,r.B2)("mock://ai-solver",t),s=await o.json(),{text:l}=c(s);return T(`${i}\n\n${l}`),void(window.lastFullResponse=s)}if(404===a.status){throw new Error(`Request failed 404: ${h?"The built-in solver endpoint (/api/solve) is not reachable. Deploy the serverless function or point the app to your own API in the settings.":"The URL you entered cannot be found. Double-check the API path or start your local proxy (node local-server.js)."}`)}const n=e?e.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim().slice(0,180):"",o=n?` Response: ${n}`:"";throw new Error(`Request failed ${a.status}.${o}`)}const s=await a.json().catch((async()=>({raw:await a.text()}))),{text:l}=c(s);T(l),window.lastFullResponse=s}catch(o){if("TypeError"===o.name&&o.message.includes("fetch"))throw new Error(`Network error: Cannot connect to ${n}. Please verify the API server or the URL in the settings.`);throw o instanceof Error?o:new Error(String(o))}}async function N(e){const t={imageBase64:e,question:x,model:b};await L(t)}function H(e,t,n=null){if(!E||!_)return;e.preventDefault(),e.stopPropagation();const i=e.currentTarget.getBoundingClientRect(),o=E.width/i.width,a=E.height/i.height,s=JSON.parse(JSON.stringify(_)),r=e.clientX,l=e.clientY,c={...s},d=e=>{e.preventDefault();const i=e.clientX-r,d=e.clientY-l,p=i*o,m=d*a;let h;if("move"===t){const e=Math.max(0,Math.min(E.width-s.width,s.x+p)),t=Math.max(0,Math.min(E.height-s.height,s.y+m));h={...s,x:e,y:t}}else if("resize"===t&&n)switch(n){case"top-left":h={x:Math.max(0,Math.min(s.x+s.width-50,s.x+p)),y:Math.max(0,Math.min(s.y+s.height-50,s.y+m)),width:Math.max(50,Math.min(E.width-s.x,s.width-p)),height:Math.max(50,Math.min(E.height-s.y,s.height-m))};break;case"top-right":h={x:s.x,y:Math.max(0,Math.min(s.y+s.height-50,s.y+m)),width:Math.max(50,Math.min(E.width-s.x,s.width+p)),height:Math.max(50,Math.min(E.height-s.y,s.height-m))};break;case"bottom-left":h={x:Math.max(0,Math.min(s.x+s.width-50,s.x+p)),y:s.y,width:Math.max(50,Math.min(E.width-s.x,s.width-p)),height:Math.max(50,Math.min(E.height-s.y,s.height+m))};break;case"bottom-right":h={x:s.x,y:s.y,width:Math.max(50,Math.min(E.width-s.x,s.width+p)),height:Math.max(50,Math.min(E.height-s.y,s.height+m))};break;case"top":h={x:s.x,y:Math.max(0,Math.min(s.y+s.height-50,s.y+m)),width:s.width,height:Math.max(50,Math.min(E.height-s.y,s.height-m))};break;case"bottom":h={x:s.x,y:s.y,width:s.width,height:Math.max(50,Math.min(E.height-s.y,s.height+m))};break;case"left":h={x:Math.max(0,Math.min(s.x+s.width-50,s.x+p)),y:s.y,width:Math.max(50,Math.min(E.width-s.x,s.width-p)),height:s.height};break;case"right":h={x:s.x,y:s.y,width:Math.max(50,Math.min(E.width-s.x,s.width+p)),height:s.height}}Object.assign(c,h),D(h)},p=()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",p),document.removeEventListener("mouseleave",p)};document.addEventListener("mousemove",d,{passive:!1}),document.addEventListener("mouseup",p),document.addEventListener("mouseleave",p)}return(0,l.jsx)(o.A,{title:"AI Solver",children:(0,l.jsxs)("div",{className:"app-container",style:{maxWidth:920,padding:"24px"},children:[(0,l.jsxs)("div",{className:"app-header",style:{marginBottom:16},children:[(0,l.jsx)("h1",{className:"app-title",children:"AI Solver (Hunyuan)"}),(0,l.jsx)("a",{className:"button button--secondary",href:"/docs/tutorial-apps/ai-solver-tutorial",children:"Tutorial"})]}),(0,l.jsx)(s.A,{}),(0,l.jsx)("p",{children:"Supports camera capture, screen capture, and text questions. For security, the page does not accept any keys."}),(0,l.jsxs)("p",{style:{fontSize:14,color:"var(--ifm-color-emphasis-600)"},children:["Tip: In text mode, type ",(0,l.jsx)("code",{children:"/preset name"})," to quickly switch presets, e.g. ",(0,l.jsx)("code",{children:"/preset Math Problem Solver"})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:24,alignItems:"flex-start",flexWrap:"wrap"},children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("fieldset",{style:{border:"1px solid var(--ifm-border-color)",borderRadius:8,padding:12,marginBottom:16},children:[(0,l.jsx)("legend",{children:"Input Mode"}),(0,l.jsxs)("label",{style:{display:"block",marginBottom:8},children:[(0,l.jsx)("input",{type:"radio",value:"camera",checked:"camera"===P,onChange:e=>M(e.target.value)}),(0,l.jsx)("span",{style:{marginLeft:8},children:" Camera Capture"})]}),(0,l.jsxs)("label",{style:{display:"block",marginBottom:8},children:[(0,l.jsx)("input",{type:"radio",value:"screenshot",checked:"screenshot"===P,onChange:e=>M(e.target.value)}),(0,l.jsx)("span",{style:{marginLeft:8},children:" Screen Capture"})]}),(0,l.jsxs)("label",{style:{display:"block"},children:[(0,l.jsx)("input",{type:"radio",value:"text",checked:"text"===P,onChange:e=>M(e.target.value)}),(0,l.jsx)("span",{style:{marginLeft:8},children:" Text Question"})]})]}),"camera"===P&&(0,l.jsxs)("div",{children:[(0,l.jsx)("video",{ref:t,autoPlay:!0,playsInline:!0,style:{width:320,background:"#000",borderRadius:8}}),(0,l.jsx)("div",{style:{marginTop:8,color:"var(--ifm-color-emphasis-600)"},children:n?"Camera ready":d?`Camera error: ${d}`:"Requesting camera permission\u2026"}),(0,l.jsx)("button",{onClick:async function(){if(t.current){T(""),A(!0);try{const e=await async function(e,t=1280,n=.85){const i=e.videoWidth||1080,o=e.videoHeight||1440,a=Math.min(1,t/Math.max(i,o)),s=document.createElement("canvas");return s.width=Math.round(i*a),s.height=Math.round(o*a),s.getContext("2d").drawImage(e,0,0,s.width,s.height),await new Promise((e=>s.toBlob((t=>e(t)),"image/jpeg",n)))}(t.current);C(Math.round(e.size/1024));const n=await new Promise((t=>{const n=new FileReader;n.onload=()=>t(n.result),n.readAsDataURL(e)})),i=String(n).split(",")[1];await N(i)}catch(e){T("Error: "+(e?.message||String(e)))}finally{A(!1)}}},disabled:!n||S||"undefined"!=typeof window&&!window.__APP_AUTH_OK__,style:{marginTop:12,padding:"8px 16px",fontSize:14},children:S?"Processing\u2026":" Capture and Solve"})]}),"screenshot"===P&&(0,l.jsx)("div",{children:I?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{style:{position:"relative",width:320,height:240,border:"2px solid var(--ifm-color-emphasis-900)",borderRadius:8,overflow:"hidden"},children:[(0,l.jsx)("img",{src:E?.dataUrl,alt:"Screenshot",style:{width:"100%",height:"100%",objectFit:"contain"},onMouseDown:e=>H(e,"move")}),_&&E&&(0,l.jsxs)("div",{style:{position:"absolute",left:_.x/E.width*100+"%",top:_.y/E.height*100+"%",width:_.width/E.width*100+"%",height:_.height/E.height*100+"%",border:"2px solid var(--ifm-color-emphasis-800)",backgroundColor:"rgba(0, 0, 0, 0.06)",cursor:"move",boxSizing:"border-box"},onMouseDown:e=>{e.stopPropagation(),H(e,"move")},children:[(0,l.jsx)("div",{style:{position:"absolute",left:-4,top:-4,width:8,height:8,backgroundColor:"var(--ifm-color-emphasis-800)",cursor:"nw-resize",borderRadius:"50%"},onMouseDown:e=>{e.stopPropagation(),H(e,"resize","top-left")}}),(0,l.jsx)("div",{style:{position:"absolute",left:"50%",top:-4,width:8,height:8,backgroundColor:"var(--ifm-color-emphasis-800)",cursor:"n-resize",borderRadius:"50%",transform:"translateX(-50%)"},onMouseDown:e=>{e.stopPropagation(),H(e,"resize","top")}}),(0,l.jsx)("div",{style:{position:"absolute",right:-4,top:-4,width:8,height:8,backgroundColor:"var(--ifm-color-emphasis-800)",cursor:"ne-resize",borderRadius:"50%"},onMouseDown:e=>{e.stopPropagation(),H(e,"resize","top-right")}}),(0,l.jsx)("div",{style:{position:"absolute",right:-4,top:"50%",width:8,height:8,backgroundColor:"var(--ifm-color-emphasis-800)",cursor:"e-resize",borderRadius:"50%",transform:"translateY(-50%)"},onMouseDown:e=>{e.stopPropagation(),H(e,"resize","right")}}),(0,l.jsx)("div",{style:{position:"absolute",right:-4,bottom:-4,width:8,height:8,backgroundColor:"var(--ifm-color-emphasis-800)",cursor:"se-resize",borderRadius:"50%"},onMouseDown:e=>{e.stopPropagation(),H(e,"resize","bottom-right")}}),(0,l.jsx)("div",{style:{position:"absolute",left:"50%",bottom:-4,width:8,height:8,backgroundColor:"var(--ifm-color-emphasis-800)",cursor:"s-resize",borderRadius:"50%",transform:"translateX(-50%)"},onMouseDown:e=>{e.stopPropagation(),H(e,"resize","bottom")}}),(0,l.jsx)("div",{style:{position:"absolute",left:-4,bottom:-4,width:8,height:8,backgroundColor:"var(--ifm-color-emphasis-800)",cursor:"sw-resize",borderRadius:"50%"},onMouseDown:e=>{e.stopPropagation(),H(e,"resize","bottom-left")}}),(0,l.jsx)("div",{style:{position:"absolute",left:-4,top:"50%",width:8,height:8,backgroundColor:"var(--ifm-color-emphasis-800)",cursor:"w-resize",borderRadius:"50%",transform:"translateY(-50%)"},onMouseDown:e=>{e.stopPropagation(),H(e,"resize","left")}})]})]}),(0,l.jsx)("div",{style:{marginTop:8,color:"var(--ifm-color-emphasis-600)",fontSize:12},children:"Selection box shows selected area. Drag to move, drag corner to resize."}),(0,l.jsxs)("div",{style:{marginTop:12,display:"flex",gap:8},children:[(0,l.jsx)("button",{onClick:async function(){if(E&&_){A(!0);try{const e=document.createElement("canvas");e.width=_.width,e.height=_.height;e.getContext("2d").drawImage(E.canvas,_.x,_.y,_.width,_.height,0,0,_.width,_.height);const t=await new Promise((t=>e.toBlob((e=>t(e)),"image/jpeg",.85)));C(Math.round(t.size/1024));const n=await new Promise((e=>{const n=new FileReader;n.onload=()=>e(n.result),n.readAsDataURL(t)})),i=String(n).split(",")[1];await N(i),R(null),D(null),z(!1)}catch(e){T("Error: "+(e?.message||String(e)))}finally{A(!1)}}},disabled:S,style:{padding:"8px 16px",fontSize:14,backgroundColor:"var(--ifm-color-primary)",color:"var(--ifm-color-emphasis-0)",border:"1px solid var(--ifm-color-primary)",borderRadius:4,cursor:"pointer"},children:S?"Processing\u2026":"Analyze Selected Area"}),(0,l.jsx)("button",{onClick:function(){R(null),D(null),z(!1)},disabled:S,style:{padding:"8px 16px",fontSize:14,backgroundColor:"var(--ifm-color-primary)",color:"var(--ifm-color-emphasis-0)",border:"1px solid var(--ifm-color-primary)",borderRadius:4,cursor:"not-allowed"},children:"Cancel"})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{width:320,height:240,background:"var(--ifm-background-surface-color)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",border:"2px dashed var(--ifm-border-color)"},children:(0,l.jsxs)("div",{style:{textAlign:"center",color:"var(--ifm-color-emphasis-600)"},children:[(0,l.jsx)("div",{style:{fontSize:48,marginBottom:8},children:" "}),(0,l.jsx)("div",{children:"Click the button below to start screenshot"})]})}),(0,l.jsx)("div",{style:{marginTop:8,color:"var(--ifm-color-emphasis-600)"},children:"Screenshot mode: You can select a specific area after capturing"}),(0,l.jsx)("button",{onClick:async function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia){T(""),A(!0);try{const e=await navigator.mediaDevices.getDisplayMedia({video:{mediaSource:"screen"},audio:!1}),t=document.createElement("video");t.srcObject=e,t.play(),await new Promise((e=>{t.onloadedmetadata=e}));const n=document.createElement("canvas");n.width=t.videoWidth,n.height=t.videoHeight;n.getContext("2d").drawImage(t,0,0),e.getTracks().forEach((e=>e.stop()));const i=n.toDataURL("image/jpeg",.85);R({dataUrl:i,width:n.width,height:n.height,canvas:n});const o=.5*Math.min(n.width,n.height);D({x:(n.width-o)/2,y:(n.height-o)/2,width:o,height:o}),z(!0)}catch(e){"NotAllowedError"===e.name?T("Error: The user canceled screen sharing permission"):T("Error: "+(e?.message||String(e)))}finally{A(!1)}}else T("Error: The browser does not support screen capture")},disabled:S||"undefined"!=typeof window&&!window.__APP_AUTH_OK__,style:{marginTop:12,padding:"8px 16px",fontSize:14},children:S?"Processing\u2026":" Capture Screen"})]})}),"text"===P&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{width:320,minHeight:240,background:"var(--ifm-background-surface-color)",borderRadius:8,padding:16,border:"1px solid var(--ifm-border-color)"},children:[(0,l.jsx)("div",{style:{marginBottom:12,color:"var(--ifm-color-emphasis-600)",fontSize:14},children:" Text Question Mode"}),(0,l.jsx)("textarea",{value:U,onChange:e=>O(e.target.value),placeholder:"Please enter your question, for example:\n\u2022 Explain the basic principles of quantum mechanics\n\u2022 Write a Python sorting algorithm\n\u2022 Type /preset to see available presets",style:{width:"100%",height:160,border:"1px solid var(--ifm-border-color)",borderRadius:4,padding:8,fontSize:14,resize:"vertical",fontFamily:"inherit"}})]}),(0,l.jsx)("div",{style:{marginTop:8,color:"var(--ifm-color-emphasis-600)"},children:"Enter your question directly and the AI will provide a detailed answer"}),(0,l.jsx)("button",{onClick:async function(){if(U.trim()){T(""),A(!0);try{await async function(e){if(e.startsWith("/preset ")){const t=e.substring(8).trim().toLowerCase(),n=g.find((e=>e.id.toLowerCase()===t||e.name.toLowerCase()===t));return n?(f(n.id),"custom"===n.id?v(""):v(n.prompt),void T(`Switched to preset: ${n.name}\n\nDescription: ${n.description}`)):void T(`Preset "${t}" not found. Available presets: ${g.map((e=>e.name)).join(", ")}`)}const t={question:e,model:"hunyuan-lite"};await L(t)}(U.trim())}catch(e){T("Error: "+(e?.message||String(e)))}finally{A(!1)}}else T("Please enter your question")},disabled:S||!U.trim()||"undefined"!=typeof window&&!window.__APP_AUTH_OK__,style:{marginTop:12,padding:"8px 16px",fontSize:14},children:S?"Thinking\u2026":" Ask and Get Answer"})]}),null!=j&&(0,l.jsxs)("div",{style:{marginTop:6,fontSize:12,color:"var(--ifm-color-emphasis-500)"},children:["Last image size: ",j," KB"]})]}),(0,l.jsxs)("div",{style:{flex:1,minWidth:280},children:[(0,l.jsxs)("fieldset",{style:{border:"1px solid var(--ifm-border-color)",borderRadius:8,padding:12,marginBottom:16,background:"var(--ifm-background-surface-color)"},children:[(0,l.jsx)("legend",{children:"API Settings"}),(0,l.jsxs)("div",{style:{marginBottom:12},children:[(0,l.jsx)("button",{type:"button",onClick:()=>u(!h),style:{padding:"6px 12px",fontSize:12,backgroundColor:h?"var(--ifm-color-success)":"var(--ifm-background-surface-color)",color:h?"var(--ifm-color-emphasis-0)":"var(--ifm-color-emphasis-800)",border:"1px solid var(--ifm-border-color)",borderRadius:4,cursor:"pointer"},children:h?"\u2713 Using Default API":"Use Default API"}),(0,l.jsx)("div",{style:{fontSize:11,color:"var(--ifm-color-emphasis-600)",marginTop:4},children:h?`Default API enabled \u2192 ${e}`:`Click to send requests to ${e}`})]}),(0,l.jsxs)("label",{children:["Custom API URL (optional)",(0,l.jsx)("br",{}),(0,l.jsx)("input",{value:p,onChange:e=>m(e.target.value),placeholder:"https://your-api.example.com/api/solve",style:{width:"100%"},disabled:h})]}),(0,l.jsx)("div",{style:{color:"var(--ifm-color-emphasis-700)",fontSize:12,marginTop:8},children:h?"Using default API. Disable to enter custom API.":"Enter your API endpoint or enable default API above."})]}),(0,l.jsxs)("fieldset",{style:{border:"1px solid var(--ifm-border-color)",borderRadius:8,padding:12},children:[(0,l.jsx)("legend",{children:"Request Parameters"}),(0,l.jsxs)("label",{children:["Model",(0,l.jsx)("br",{}),(0,l.jsx)("input",{value:b,onChange:e=>w(e.target.value),style:{width:"100%"}})]}),(0,l.jsxs)("div",{style:{marginTop:8},children:[(0,l.jsxs)("label",{children:["PromptPreset",(0,l.jsx)("br",{}),(0,l.jsx)("select",{value:y,onChange:e=>{f(e.target.value);const t=g.find((t=>t.id===e.target.value));t&&("custom"===t.id?v(""):v(t.prompt))},style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--ifm-border-color)"},children:g.map((e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id)))})]}),(0,l.jsx)("div",{style:{fontSize:12,color:"var(--ifm-color-emphasis-600)",marginTop:4},children:g.find((e=>e.id===y))?.description||""})]}),"custom"===y?(0,l.jsxs)("label",{style:{display:"block",marginTop:8},children:["Question (for image mode)",(0,l.jsx)("br",{}),(0,l.jsx)("textarea",{value:x,onChange:e=>{v(e.target.value)},rows:3,style:{width:"100%"}})]}):(0,l.jsx)("div",{style:{marginTop:12,fontSize:12,color:"var(--ifm-color-emphasis-600)"},children:"Preset instructions are applied automatically based on the selected mode."})]})]})]}),(0,l.jsxs)("div",{style:{marginTop:16},children:[(0,l.jsx)("h3",{children:"Response"}),(0,l.jsx)("div",{style:{whiteSpace:"pre-wrap",background:"var(--ifm-background-surface-color)",color:"var(--ifm-color-emphasis-900)",padding:16,borderRadius:8,maxHeight:400,overflow:"auto",border:"1px solid var(--ifm-border-color)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSize:"16px",lineHeight:1.5},children:k}),(0,l.jsx)("div",{style:{marginTop:8,textAlign:"right"},children:(0,l.jsx)("button",{onClick:()=>{window.lastFullResponse&&T(JSON.stringify(window.lastFullResponse,null,2))},style:{padding:"4px 8px",fontSize:12,background:"transparent",border:"1px solid var(--ifm-border-color)",borderRadius:4,cursor:"pointer",color:"var(--ifm-color-emphasis-600)"},children:"Show Raw JSON"})})]}),(0,l.jsx)(a.A,{})]})})}},7921:(e,t,n)=>{function i(){const e="undefined"!=typeof window?window.localStorage.getItem("app_users"):null;if(!e)return[];try{return JSON.parse(e)||[]}catch{return[]}}function o(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}async function a(e,t){const n=(new TextEncoder).encode(e),i=function(e){const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++)t[n]=parseInt(e.substr(2*n,2),16);return t.buffer}(t),a=await crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits"]);return o(await crypto.subtle.deriveBits({name:"PBKDF2",salt:i,iterations:15e4,hash:"SHA-256"},a,256))}async function s(e,t){const n=i();if(n.find((t=>t.email.toLowerCase()===String(e).toLowerCase())))throw new Error("Email already registered");const s=o(crypto.getRandomValues(new Uint8Array(16)).buffer),r=await a(t,s);return n.push({email:e,saltHex:s,hashHex:r,createdAt:(new Date).toISOString()}),function(e){"undefined"!=typeof window&&window.localStorage.setItem("app_users",JSON.stringify(e))}(n),c({email:e}),{email:e}}async function r(e,t){const n=i().find((t=>t.email.toLowerCase()===String(e).toLowerCase()));if(!n)throw new Error("Account not found");if(await a(t,n.saltHex)!==n.hashHex)throw new Error("Invalid credentials");return c({email:e}),{email:e}}function l(){if("undefined"==typeof window)return null;const e=window.localStorage.getItem("app_session");if(!e)return null;try{return JSON.parse(e)||null}catch{return null}}function c(e){"undefined"!=typeof window&&window.localStorage.setItem("app_session",JSON.stringify({email:e.email,at:Date.now()}))}function d(){"undefined"!=typeof window&&window.localStorage.removeItem("app_session")}n.d(t,{Ht:()=>l,iD:()=>r,kz:()=>s,ri:()=>d})}}]);