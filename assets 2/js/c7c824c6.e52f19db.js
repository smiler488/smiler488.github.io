"use strict";(self.webpackChunkliangchao_website=self.webpackChunkliangchao_website||[]).push([[5117],{2835:(e,a,t)=>{t.d(a,{A:()=>m});var i=t(6540),r=t(4848);const n={maxWidth:"800px",margin:"60px auto 0",textAlign:"left",padding:"0 20px"},s={fontSize:"2rem",fontWeight:"600",marginBottom:"16px",color:"var(--ifm-color-emphasis-900)"},o={fontSize:"1.1rem",color:"var(--ifm-color-emphasis-700)",lineHeight:1.6,marginBottom:"16px"},l={borderLeft:"4px solid var(--ifm-border-color)",paddingLeft:"16px",color:"var(--ifm-color-emphasis-700)",fontStyle:"italic",lineHeight:1.6,marginBottom:"16px"},c={backgroundColor:"var(--ifm-background-surface-color)",padding:"16px",borderRadius:"12px",overflowX:"auto",border:"1px solid var(--ifm-border-color)",color:"var(--ifm-color-emphasis-800)"},d={fontSize:"1.5rem",fontWeight:"600",marginBottom:"16px",color:"var(--ifm-color-emphasis-900)"};function m({containerStyle:e}){const[a,t]=(0,i.useState)(!1),[m,h]=(0,i.useState)(!1),p="LiangchaoDeng. (2025). smiler488/smiler488.github.io: Digital Plant Phenotyping Platform v25.0 (v25.0.0). Zenodo. https://doi.org/10.5281/zenodo.17544584",u="@software{Deng2025_DPPP_v25,\n  author       = {Deng, Liangchao},\n  title        = {Digital Plant Phenotyping Platform (v25.0)},\n  year         = {2025},\n  publisher    = {Zenodo},\n  doi          = {10.5281/zenodo.17544584},\n  url          = {https://doi.org/10.5281/zenodo.17544584},\n  note         = {[Computer software]}\n}";return(0,r.jsxs)("div",{style:{...n,...e},children:[(0,r.jsx)("h2",{style:s,children:"Citation"}),(0,r.jsxs)("p",{style:o,children:["If you use ",(0,r.jsx)("strong",{children:"Digital Plant Phenotyping Platform v25.0"})," or any of its applications in your research, please cite it as:"]}),(0,r.jsxs)("blockquote",{style:l,children:["LiangchaoDeng. (2025)."," ",(0,r.jsx)("em",{children:"smiler488/smiler488.github.io: Digital Plant Phenotyping Platform v25.0 (v25.0.0)"}),". Zenodo.",(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"https://doi.org/10.5281/zenodo.17544584",children:"https://doi.org/10.5281/zenodo.17544584"})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",gap:"12px"},children:[(0,r.jsx)("button",{type:"button",onClick:async()=>{try{if("undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(p);else if("undefined"!=typeof document){const e=document.createElement("textarea");e.value=p,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}t(!0),setTimeout((()=>t(!1)),2e3)}catch{t(!1)}},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid var(--ifm-color-emphasis-900)",backgroundColor:"var(--ifm-color-emphasis-900)",color:"var(--ifm-color-emphasis-0)",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"transform 0.15s ease, background-color 0.15s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-primary)",e.currentTarget.style.borderColor="var(--ifm-color-primary)",e.currentTarget.style.transform="translateY(-1px)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.borderColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.transform="translateY(0)"},children:a?"Copied!":"Copy citation"}),(0,r.jsx)("span",{style:{fontSize:"0.9rem",color:a?"var(--ifm-color-success)":"var(--ifm-color-emphasis-600)"},children:a?"Citation copied to clipboard.":"Click to copy APA citation."})]}),(0,r.jsx)("a",{href:"https://doi.org/10.5281/zenodo.17544584",style:{display:"inline-block",marginBottom:"24px"},children:(0,r.jsx)("img",{src:"https://zenodo.org/badge/DOI/10.5281/zenodo.17544584.svg",alt:"DOI badge",style:{height:"32px"}})}),(0,r.jsx)("hr",{style:{border:"none",borderTop:"1px solid var(--ifm-border-color)",marginBottom:"24px"}}),(0,r.jsx)("h3",{style:d,children:"BibTeX citation (Zotero \u2192 File \u2192 Import from Clipboard)"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",gap:"12px"},children:[(0,r.jsx)("button",{type:"button",onClick:async()=>{try{if("undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(u);else if("undefined"!=typeof document){const e=document.createElement("textarea");e.value=u,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}h(!0),setTimeout((()=>h(!1)),2e3)}catch{h(!1)}},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid var(--ifm-color-emphasis-900)",backgroundColor:"var(--ifm-color-emphasis-900)",color:"var(--ifm-color-emphasis-0)",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"transform 0.15s ease, background-color 0.15s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-primary)",e.currentTarget.style.borderColor="var(--ifm-color-primary)",e.currentTarget.style.transform="translateY(-1px)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.borderColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.transform="translateY(0)"},children:m?"Copied!":"Copy BibTeX"}),(0,r.jsx)("span",{style:{fontSize:"0.9rem",color:m?"var(--ifm-color-success)":"var(--ifm-color-emphasis-600)"},children:m?"BibTeX copied to clipboard. Switch to Zotero and choose Import from Clipboard.":"Click to copy BibTeX to clipboard for Zotero import."})]}),(0,r.jsx)("pre",{style:c,children:(0,r.jsx)("code",{children:u})})]})}},4619:(e,a,t)=>{t.d(a,{A:()=>o});var i=t(6540),r=t(7921),n=t(5082),s=t(4848);function o({children:e}){const[a,t]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{const e=(0,n.b)();if(e){e.auth.getUser().then((({data:e})=>{const a=!!e?.user;t(a),"undefined"!=typeof window&&(window.__APP_AUTH_OK__=a)}));const{data:a}=e.auth.onAuthStateChange(((e,a)=>{const i=!!a?.user;t(i),"undefined"!=typeof window&&(window.__APP_AUTH_OK__=i)}));return()=>a?.subscription?.unsubscribe?.()}const a=!!(0,r.Ht)();t(a),"undefined"!=typeof window&&(window.__APP_AUTH_OK__=a)}),[]),(0,s.jsxs)("div",{children:[!a&&(0,s.jsx)("div",{className:"app-card",style:{marginBottom:12},children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)("span",{className:"app-muted",children:"Please login to use app features"}),(0,s.jsx)("a",{className:"button button--secondary",href:"/auth",children:"Login / Register"})]})}),e]})}},5082:(e,a,t)=>{t.d(a,{b:()=>n});var i=t(1270);let r=null;function n(){if(r)return r;if("undefined"==typeof window)return null;const e=window.__SUPABASE_URL__,a=window.__SUPABASE_ANON_KEY__;return e&&a?(r=(0,i.UU)(e,a,{auth:{persistSession:!0,autoRefreshToken:!0}}),r):null}},5313:(e,a,t)=>{t.r(a),t.d(a,{default:()=>P});var i=t(6540),r=t(3018),n=t(2835),s=t(4619),o=t(4848);const l=e=>e*Math.PI/180,c=(e,a,t)=>Math.max(a,Math.min(t,e)),d={PE:140,PVC:150},m=9.81,h=5;function p(e,a,t,i=150){return e<=0||a<=0||t<=0?0:10.67*e*Math.pow(a,1.852)/(Math.pow(i,1.852)*Math.pow(t,4.87))}function u(e,a){if(e<=0||a<=0)return 0;return e/(Math.PI*a*a/4)}const g={field:{length_m:320,width_m:140},headworks:{pumpPressure_kPa:180,maxFlow_m3h:130,filterLoss_kPa:12,fertigation:!0},mainline:{diameter_mm:90,length_m:320,location:"edge",ring:!1,material:"PE"},submains:{spacing_m:60,diameter_mm:50,twoSideFeed:!1,valveEvery:1},laterals:{tapeSpacing_m:2.2,emitterSpacing_cm:30,emitterFlow_Lph:2.4,operPressure_kPa:100,length_m:320,pressureComp:!0},terrain:{orientation_deg:0,slope_len_pct:.3,slope_wid_pct:0},constraints:{maxPressureVar_pct:10,maxVel_ms:1.5}},f=["Keep mainline velocity \u22641.5 m/s to minimize water hammer and energy losses.","Limit submain headloss to <20% of operating pressure and lateral headloss to <10%.","Use pressure-compensating emitters or zoning when slope exceeds 0.5%.","Ring-fed mains or two-side-fed submains help maintain uniform pressure."];function x({label:e,value:a,onChange:t,step:i=1,suffix:r}){return(0,o.jsxs)("label",{style:{display:"block",marginBottom:12},children:[(0,o.jsx)("span",{style:{display:"block",fontSize:"0.85rem",marginBottom:4},children:e}),(0,o.jsx)("input",{type:"number",value:a,step:i,onChange:e=>t(Number(e.target.value)),style:{width:"100%",padding:"8px 10px",border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:8}}),r&&(0,o.jsx)("span",{style:{display:"block",fontSize:"0.75rem",color:"var(--ifm-color-emphasis-700)",marginTop:4},children:r})]})}function b({label:e,value:a,onChange:t}){return(0,o.jsxs)("label",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"0.9rem",padding:"4px 0"},children:[(0,o.jsx)("span",{children:e}),(0,o.jsx)("input",{type:"checkbox",checked:a,onChange:e=>t(e.target.checked)})]})}function v({title:e,description:a,children:t}){return(0,o.jsxs)("section",{className:"card padding--md margin-bottom--lg",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.95rem",fontWeight:600},children:e}),a&&(0,o.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--ifm-color-emphasis-700)",marginTop:4,lineHeight:1.5},children:a})]}),t]})}function y(e,a){const{field:t,headworks:i,mainline:r,submains:n,laterals:s,terrain:o,constraints:l}=e,{tapesPerSubmain:g,emittersPerTape:f,nSubmains:x}=a,b=x*g,v=f*s.emitterFlow_Lph/1e3,y=b*v,w=y/3600,j=r.diameter_mm/1e3,_=r.ring?r.length_m/2:r.length_m,k=r.ring?w/2:w,C=p(_,k,j,d[r.material]||140),P=u(k,j),S=g*v/3600,N=n.diameter_mm/1e3,M=n.twoSideFeed?t.length_m/2:t.length_m,T=n.twoSideFeed?S/2:S,z=p(M,T,N,140),F=u(T,N),L=o.slope_len_pct/100*s.length_m,A=o.slope_wid_pct/100*t.width_m,B=L*m,E=A*m,R=Math.max(0,i.pumpPressure_kPa-i.filterLoss_kPa),$=R-(i.fertigation?h:0)-C*m,D=$-z*m-Math.max(0,B),I=D-s.operPressure_kPa,H=function(e){const a=100-1.6*c(e,0,25);return c(a,60,98)}(l.maxPressureVar_pct),U=[];return P>l.maxVel_ms&&U.push(`Mainline velocity ${P.toFixed(2)} m/s exceeds ${l.maxVel_ms} m/s limit.`),y>i.maxFlow_m3h&&U.push(`Total system flow ${y.toFixed(1)} m\xb3/h > pump rating ${i.maxFlow_m3h} m\xb3/h.`),$<=0&&U.push("Net pump pressure after filter/fertigation losses is insufficient for mainline delivery."),I<0&&U.push(`Lateral pressure deficit ${Math.abs(I).toFixed(1)} kPa vs setpoint; increase pump pressure or pipe size.`),Math.abs(L)>1&&U.push(`Lengthwise slope induces ${B.toFixed(1)} kPa head variation.`),Math.abs(A)>1&&U.push(`Cross-field slope induces ${E.toFixed(1)} kPa head variation.`),{tapesTotal:b,totalFlow_m3h:y,mainV:P,mainHf:C,subV:F,subHf:z,CU:H,warnings:U,netPump_kPa:R,atLaterals_kPa:D,pressureMargin_kPa:I}}function w({config:e,layout:a},t){const{field:i,mainline:r,submains:n,laterals:s}=e,{width:l,height:c,project:d,nSubmains:m,submainSpacing:h,tapesPerSubmain:p,scale:u,padding:g}=a,f=(0,o.jsx)("rect",{x:g,y:g,width:i.length_m*u,height:i.width_m*u,rx:18,fill:"#f8fafc",stroke:"#e2e8f0",strokeWidth:2}),x=(()=>{if("edge"===r.location){const[e,a]=d(0,0),[t,n]=d(0,i.width_m);return(0,o.jsx)("line",{x1:e,y1:a,x2:t,y2:n,stroke:"var(--app-accent-blue)",strokeWidth:Math.max(3,r.diameter_mm/40)})}const[e,a]=d(0,i.width_m/2),[t,n]=d(i.length_m,i.width_m/2);return(0,o.jsx)("line",{x1:e,y1:a,x2:t,y2:n,stroke:"var(--app-accent-blue)",strokeWidth:Math.max(3,r.diameter_mm/40)})})(),b=Array.from({length:m+1}).map(((e,a)=>{const t=a*h,[r,s]=d(0,t),[l,c]=d(i.length_m,t);return(0,o.jsx)("line",{x1:r,y1:s,x2:l,y2:c,stroke:"var(--app-accent-green)",strokeWidth:Math.max(2,n.diameter_mm/60),opacity:.9},`sub-${a}`)})),v=[];for(let j=0;j<m;j+=1){const e=j*h;for(let a=0;a<p;a+=1){const t=e+(a+.5)*(h/p),[r,n]=d(0,t),[s,l]=d(i.length_m,t);v.push((0,o.jsx)("line",{x1:r,y1:n,x2:s,y2:l,stroke:"var(--app-accent-muted)",strokeDasharray:"6 6",strokeWidth:1.3},`lat-${j}-${a}`))}}const[y,w]=d(0,"edge"===r.location?0:i.width_m/2);return(0,o.jsxs)("svg",{ref:t,viewBox:`0 0 ${l} ${c}`,className:"w-full h-full bg-white rounded-2xl border",children:[f,(0,o.jsxs)("g",{opacity:.15,children:[Array.from({length:10}).map(((e,a)=>(0,o.jsx)("line",{x1:g,y1:g+a/10*i.width_m*u,x2:g+i.length_m*u,y2:g+a/10*i.width_m*u,stroke:"var(--ifm-border-color)"},`gx-${a}`))),Array.from({length:10}).map(((e,a)=>(0,o.jsx)("line",{x1:g+a/10*i.length_m*u,y1:g,x2:g+a/10*i.length_m*u,y2:g+i.width_m*u,stroke:"var(--ifm-border-color)"},`gy-${a}`)))]}),x,b,v,(0,o.jsxs)("g",{transform:`translate(${y},${w})`,children:[(0,o.jsx)("rect",{x:-14,y:-14,width:28,height:28,rx:7,fill:"var(--app-accent-blue)"}),(0,o.jsx)("text",{x:16,y:5,fontSize:12,fill:"var(--app-accent-blue)",children:"Headworks"})]}),(0,o.jsxs)("text",{x:l-200,y:c-30,fontSize:12,fill:"#475569",children:["Scale 1:",Math.round(1/a.scale)]})]})}const j=i.forwardRef(w);function _({config:e,layout:a,svgRef:t}){return(0,o.jsxs)("section",{className:"card padding--md margin-bottom--lg",children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.95rem",fontWeight:600},children:"Layout Preview"}),(0,o.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--ifm-color-emphasis-700)"},children:"Field drawn to scale with rotation; headworks shown at origin."})]}),(0,o.jsxs)("div",{style:{fontSize:"0.8rem",color:"var(--ifm-color-emphasis-700)"},children:[e.field.length_m," m \xd7 ",e.field.width_m," m"]})]}),(0,o.jsx)("div",{style:{border:"1px solid var(--ifm-border-color)",borderRadius:8,background:"var(--ifm-background-surface-color)",overflow:"hidden",marginTop:12},children:(0,o.jsx)(j,{config:e,layout:a,ref:t})}),(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",fontSize:"0.8rem",color:"var(--ifm-color-emphasis-700)",marginTop:8},children:[{color:"var(--app-accent-blue)",label:"Mainline"},{color:"var(--app-accent-green)",label:"Submains"},{color:"var(--app-accent-muted)",label:"Drip laterals"}].map((e=>(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,o.jsx)("span",{style:{display:"inline-block",width:12,height:12,borderRadius:12,background:e.color}}),(0,o.jsx)("span",{children:e.label})]},e.label)))})]})}function k({data:e,config:a}){const{headworks:t,laterals:i}=a,r=[{label:"Total laterals",value:e.tapesTotal},{label:"System flow",value:`${e.totalFlow_m3h.toFixed(1)} m\xb3/h`,hint:`Pump limit ${t.maxFlow_m3h}`},{label:"Mainline velocity",value:`${e.mainV.toFixed(2)} m/s`},{label:"Mainline headloss",value:`${e.mainHf.toFixed(2)} m`},{label:"Submain velocity",value:`${e.subV.toFixed(2)} m/s`},{label:"Submain headloss",value:`${e.subHf.toFixed(2)} m`},{label:"Available pressure",value:`${Math.max(0,e.atLaterals_kPa).toFixed(0)} kPa`,hint:`Margin ${e.pressureMargin_kPa.toFixed(1)} kPa`},{label:"Net pump pressure",value:`${e.netPump_kPa.toFixed(0)} kPa`},{label:"Estimated CU",value:`${e.CU.toFixed(0)}%`,hint:i.pressureComp?"PC emitter":"non-PC emitter"}];return(0,o.jsxs)("section",{className:"card padding--md margin-bottom--lg",children:[(0,o.jsx)("div",{style:{fontSize:"0.95rem",fontWeight:600},children:"Hydraulic Summary"}),(0,o.jsx)("div",{className:"row",style:{marginTop:8},children:r.map((e=>(0,o.jsx)("div",{className:"col col--4",children:(0,o.jsxs)("div",{style:{border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:8,padding:12},children:[(0,o.jsx)("div",{style:{fontSize:"0.8rem",color:"var(--ifm-color-emphasis-700)"},children:e.label}),(0,o.jsx)("div",{style:{fontSize:"1.1rem",fontWeight:600},children:e.value}),e.hint&&(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--ifm-color-emphasis-700)"},children:e.hint})]})},e.label)))})]})}function C({warnings:e}){return e.length?(0,o.jsxs)("div",{className:"card padding--md",style:{borderLeft:"4px solid #f59e0b",background:"#fffbeb"},children:[(0,o.jsx)("div",{style:{fontWeight:600,marginBottom:6,color:"#92400e"},children:"Warnings"}),(0,o.jsx)("ul",{style:{paddingLeft:18},children:e.map((e=>(0,o.jsx)("li",{style:{color:"#92400e",marginBottom:4},children:e},e)))})]}):(0,o.jsx)("div",{className:"card padding--md",style:{borderLeft:"4px solid #10b981",background:"#ecfdf5"},children:(0,o.jsx)("div",{style:{color:"#065f46",fontSize:"0.9rem"},children:"All operating parameters within limits. Proceed with headworks or zoning refinements."})})}function P(){const[e,a]=(0,i.useState)(g),t=(0,i.useRef)(null),c=(0,i.useMemo)((()=>function(e,a,t,i){const r=Math.min(836/e.length_m,496/e.width_m),n=Math.max(1,Math.floor(e.width_m/Math.max(a.spacing_m,1))),s=e.width_m/n,o=Math.max(1,Math.floor(s/Math.max(t.tapeSpacing_m,.1))),c=Math.max(1,Math.floor(100*t.length_m/Math.max(t.emitterSpacing_cm,1))),d=l(i.orientation_deg||0),m=Math.cos(d),h=Math.sin(d),p=e.length_m/2,u=e.width_m/2;return{padding:32,width:900,height:560,scale:r,nSubmains:n,submainSpacing:s,tapesPerSubmain:o,emittersPerTape:c,project:function(e,a){return[32+(m*(e-p)-h*(a-u)+p)*r,32+(h*(e-p)+m*(a-u)+u)*r]}}}(e.field,e.submains,e.laterals,e.terrain)),[e]),d=(0,i.useMemo)((()=>y(e,c)),[e,c]),m=(e,t,i)=>a((a=>({...a,[e]:{...a[e],[t]:i}})));return(0,o.jsx)(r.A,{title:"Irrigation Layout Designer",children:(0,o.jsxs)("main",{className:"container margin-vert--lg app-container",children:[(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col col--8",children:(0,o.jsx)("h1",{className:"app-title",children:"Irrigation Layout Designer"})}),(0,o.jsx)("div",{className:"col col--4",children:(0,o.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"flex-end",alignItems:"center",marginTop:8},children:[(0,o.jsx)("a",{href:"/docs/tutorial-apps/irrigation-layout-designer-tutorial",className:"button button--secondary",children:"Tutorial"}),(0,o.jsx)("button",{type:"button",onClick:()=>a(g),className:"button button--secondary",disabled:"undefined"!=typeof window&&!window.__APP_AUTH_OK__,children:"Reset Defaults"})]})})]}),(0,o.jsx)(s.A,{}),(0,o.jsx)("p",{style:{margin:"12px 0 24px"},children:"Feed field dimensions, slopes, and headworks constraints to generate a scaled layout of mainlines, submains, and drip laterals while checking velocities, headloss, and pressure uniformity instantly."}),(0,o.jsxs)("div",{className:"row margin-top--lg",children:[(0,o.jsxs)("div",{className:"col col--5",children:[(0,o.jsx)(v,{title:"Field & Terrain",description:"Orientation measured clockwise from true north. Slopes convert to head differences.",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Length (m)",value:e.field.length_m,onChange:e=>m("field","length_m",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Width (m)",value:e.field.width_m,onChange:e=>m("field","width_m",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Orientation (\xb0)",value:e.terrain.orientation_deg,onChange:e=>m("terrain","orientation_deg",e),suffix:"clockwise from N"})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Slope along length (%)",step:.1,value:e.terrain.slope_len_pct,onChange:e=>m("terrain","slope_len_pct",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Slope along width (%)",step:.1,value:e.terrain.slope_wid_pct,onChange:e=>m("terrain","slope_wid_pct",e)})})]})}),(0,o.jsx)(v,{title:"Headworks & Constraints",description:"Pump pressure, filter/fertigation losses, and allowable variation determine available head.",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Pump pressure (kPa)",value:e.headworks.pumpPressure_kPa,onChange:e=>m("headworks","pumpPressure_kPa",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Max flow (m\xb3/h)",value:e.headworks.maxFlow_m3h,onChange:e=>m("headworks","maxFlow_m3h",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Filter loss (kPa)",value:e.headworks.filterLoss_kPa,onChange:e=>m("headworks","filterLoss_kPa",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(b,{label:"Fertigation skid",value:e.headworks.fertigation,onChange:e=>m("headworks","fertigation",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Allowable \u0394P (%)",value:e.constraints.maxPressureVar_pct,onChange:e=>m("constraints","maxPressureVar_pct",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Max velocity (m/s)",value:e.constraints.maxVel_ms,onChange:e=>m("constraints","maxVel_ms",e)})})]})}),(0,o.jsx)(v,{title:"Mainline",description:"Material determines Hazen\u2013Williams C; ring feed halves effective length/flow.",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Diameter (mm)",value:e.mainline.diameter_mm,onChange:e=>m("mainline","diameter_mm",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Length (m)",value:e.mainline.length_m,onChange:e=>m("mainline","length_m",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsxs)("label",{style:{display:"block",marginBottom:12},children:[(0,o.jsx)("span",{style:{display:"block",fontSize:"0.85rem",marginBottom:4},children:"Material"}),(0,o.jsxs)("select",{style:{width:"100%",padding:"8px 10px",border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:8},value:e.mainline.material,onChange:e=>m("mainline","material",e.target.value),children:[(0,o.jsx)("option",{value:"PE",children:"PE (C\u2248140)"}),(0,o.jsx)("option",{value:"PVC",children:"PVC (C\u2248150)"})]})]})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsxs)("label",{style:{display:"block",marginBottom:12},children:[(0,o.jsx)("span",{style:{display:"block",fontSize:"0.85rem",marginBottom:4},children:"Location"}),(0,o.jsxs)("select",{style:{width:"100%",padding:"8px 10px",border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:8},value:e.mainline.location,onChange:e=>m("mainline","location",e.target.value),children:[(0,o.jsx)("option",{value:"edge",children:"Field edge"}),(0,o.jsx)("option",{value:"center",children:"Centerline"})]})]})}),(0,o.jsx)("div",{className:"col col--12",children:(0,o.jsx)(b,{label:"Ring / two-end feed",value:e.mainline.ring,onChange:e=>m("mainline","ring",e)})})]})}),(0,o.jsx)(v,{title:"Submains",description:"Spacing sets the number of runs; two-side supply lowers end losses.",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Spacing (m)",value:e.submains.spacing_m,onChange:e=>m("submains","spacing_m",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Diameter (mm)",value:e.submains.diameter_mm,onChange:e=>m("submains","diameter_mm",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(b,{label:"Two-side feed",value:e.submains.twoSideFeed,onChange:e=>m("submains","twoSideFeed",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Valve every (runs)",value:e.submains.valveEvery,onChange:e=>m("submains","valveEvery",e)})})]})}),(0,o.jsx)(v,{title:"Drip laterals",description:"Emitter spacing/flow and tape pressure determine total demand and headloss.",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Tape spacing (m)",value:e.laterals.tapeSpacing_m,onChange:e=>m("laterals","tapeSpacing_m",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Emitter spacing (cm)",value:e.laterals.emitterSpacing_cm,onChange:e=>m("laterals","emitterSpacing_cm",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Emitter flow (L/h)",value:e.laterals.emitterFlow_Lph,onChange:e=>m("laterals","emitterFlow_Lph",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Operating pressure (kPa)",value:e.laterals.operPressure_kPa,onChange:e=>m("laterals","operPressure_kPa",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(x,{label:"Tape length (m)",value:e.laterals.length_m,onChange:e=>m("laterals","length_m",e)})}),(0,o.jsx)("div",{className:"col col--6",children:(0,o.jsx)(b,{label:"Pressure-compensating",value:e.laterals.pressureComp,onChange:e=>m("laterals","pressureComp",e)})})]})}),(0,o.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[(0,o.jsx)("button",{type:"button",onClick:()=>{if(!t.current)return;const e=new Blob([t.current.outerHTML],{type:"image/svg+xml;charset=utf-8"}),a=URL.createObjectURL(e),i=document.createElement("a");i.href=a,i.download="irrigation-layout.svg",i.click(),URL.revokeObjectURL(a)},className:"button button--primary",children:"Export SVG"}),(0,o.jsx)("button",{type:"button",onClick:()=>a(g),className:"button button--secondary",children:"Reset"})]})]}),(0,o.jsxs)("div",{className:"col col--7",children:[(0,o.jsx)(_,{config:e,layout:c,svgRef:t}),(0,o.jsx)(k,{data:d,config:e}),(0,o.jsx)(C,{warnings:d.warnings}),(0,o.jsxs)("section",{className:"card padding--md margin-bottom--lg",style:{fontSize:"0.9rem"},children:[(0,o.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Tips"}),(0,o.jsx)("ul",{style:{paddingLeft:18},children:f.map((e=>(0,o.jsx)("li",{children:e},e)))})]}),(0,o.jsxs)("section",{className:"card padding--md margin-bottom--lg",children:[(0,o.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Underlying formulas & references"}),(0,o.jsxs)("p",{style:{marginBottom:8},children:["Mainline and submain headloss use the Hazen\u2013Williams form\xa0",(0,o.jsxs)("code",{children:["h",(0,o.jsx)("sub",{children:"f"})," = 10.67 \xb7 L \xb7 Q",(0,o.jsx)("sup",{children:"1.852"})," / (C",(0,o.jsx)("sup",{children:"1.852"})," \xb7 d",(0,o.jsx)("sup",{children:"4.87"}),")"]}),", with the material coefficient",(0,o.jsx)("code",{children:" C"})," set by the PE/PVC selector. Velocities are",(0,o.jsx)("code",{children:" v = Q / (\u03c0 d\xb2 / 4)"})," and slope-induced head difference is",(0,o.jsx)("code",{children:" \u0394h = g \xb7 slope \xb7 length"}),"."]}),(0,o.jsx)("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--ifm-color-emphasis-700)"},children:"Reference: ASABE EP405 / FAO Irrigation and Drainage Paper 29 for recommended limits on velocity, allowable pressure variation, and Christiansen Uniformity (CU) interpretation."})]})]})]}),(0,o.jsx)(n.A,{})]})})}},7921:(e,a,t)=>{function i(){const e="undefined"!=typeof window?window.localStorage.getItem("app_users"):null;if(!e)return[];try{return JSON.parse(e)||[]}catch{return[]}}function r(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}async function n(e,a){const t=(new TextEncoder).encode(e),i=function(e){const a=new Uint8Array(e.length/2);for(let t=0;t<a.length;t++)a[t]=parseInt(e.substr(2*t,2),16);return a.buffer}(a),n=await crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]);return r(await crypto.subtle.deriveBits({name:"PBKDF2",salt:i,iterations:15e4,hash:"SHA-256"},n,256))}async function s(e,a){const t=i();if(t.find((a=>a.email.toLowerCase()===String(e).toLowerCase())))throw new Error("Email already registered");const s=r(crypto.getRandomValues(new Uint8Array(16)).buffer),o=await n(a,s);return t.push({email:e,saltHex:s,hashHex:o,createdAt:(new Date).toISOString()}),function(e){"undefined"!=typeof window&&window.localStorage.setItem("app_users",JSON.stringify(e))}(t),c({email:e}),{email:e}}async function o(e,a){const t=i().find((a=>a.email.toLowerCase()===String(e).toLowerCase()));if(!t)throw new Error("Account not found");if(await n(a,t.saltHex)!==t.hashHex)throw new Error("Invalid credentials");return c({email:e}),{email:e}}function l(){if("undefined"==typeof window)return null;const e=window.localStorage.getItem("app_session");if(!e)return null;try{return JSON.parse(e)||null}catch{return null}}function c(e){"undefined"!=typeof window&&window.localStorage.setItem("app_session",JSON.stringify({email:e.email,at:Date.now()}))}function d(){"undefined"!=typeof window&&window.localStorage.removeItem("app_session")}t.d(a,{Ht:()=>l,iD:()=>o,kz:()=>s,ri:()=>d})}}]);