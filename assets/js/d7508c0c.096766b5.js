"use strict";(self.webpackChunkliangchao_website=self.webpackChunkliangchao_website||[]).push([[4035],{36506:(e,t,o)=>{o.r(t),o.d(t,{default:()=>g});var r=o(96540),n=o(63018),a=o(5260),i=o(62835),s=o(74848);const l="undefined"!=typeof window&&window.__CLOUDNOTE_BACKEND_URL__?window.__CLOUDNOTE_BACKEND_URL__:"";function d(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}function c(e){if(!e)return new Uint8Array;const t=new Uint8Array(e.length/2);for(let o=0;o<t.length;o++)t[o]=parseInt(e.substr(2*o,2),16);return t.buffer}async function p(e,t){const o=c(t),r=(new TextEncoder).encode(e),n=await window.crypto.subtle.importKey("raw",r,"PBKDF2",!1,["deriveKey"]);return await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:o,iterations:2e5,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function u(e){const t=c(e);return window.crypto.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt","encrypt"])}async function y(e,t){const o=crypto.getRandomValues(new Uint8Array(12)),r=(new TextEncoder).encode(JSON.stringify(t)),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:o},e,r);return{iv:d(o.buffer),ct:(a=n,btoa(String.fromCharCode(...new Uint8Array(a))))};var a}async function h(e,t,o){const r=c(t),n=function(e){const t=atob(e),o=new Uint8Array(t.length);for(let r=0;r<t.length;r++)o[r]=t.charCodeAt(r);return o.buffer}(o),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},e,n),i=(new TextDecoder).decode(a);return JSON.parse(i)}async function m(e,t=""){if(t&&t.length>0){const r=d(crypto.getRandomValues(new Uint8Array(16)).buffer),n=await p(t,r),a=await y(n,e),i={mode:"pw",salt:r,iv:a.iv,ct:a.ct,meta:{v:1}};try{if(e&&e.name){try{window.localStorage.setItem(`cloudnote_store:${e.name}`,JSON.stringify(i))}catch(o){console.warn("Could not save cloudnote to localStorage:",o)}try{await async function(e,t){if(l&&e)try{await fetch(`${l.replace(/\/$/,"")}/notes/${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(o){console.warn("backendSavePayload failed",o)}}(e&&e.name,i)}catch(o){console.warn("backend save failed",o)}}}catch(o){console.warn("localStorage unavailable:",o)}return`note=${btoa(JSON.stringify(i))}`}{const t=await async function(){const e=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return d(await crypto.subtle.exportKey("raw",e))}(),o=await u(t),r=await y(o,e),n={mode:"key",iv:r.iv,ct:r.ct,meta:{v:1}};return`note=${btoa(JSON.stringify(n))}.${t}`}}async function f(e){try{const o=window.localStorage.getItem(`cloudnote_store:${e}`);if(o)try{return JSON.parse(o)}catch(t){}}catch(t){console.warn("Failed to read stored payload from localStorage:",t)}if(l)try{const o=await async function(e){if(!l||!e)return null;try{const t=await fetch(`${l.replace(/\/$/,"")}/notes/${encodeURIComponent(e)}`);return t.ok?await t.json():null}catch(t){return console.warn("backendFetchPayload failed",t),null}}(e);if(o)return o}catch(t){console.warn("backendFetchPayload error",t)}return null}function g(){const[e,t]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[y,g]=(0,r.useState)(""),[b,w]=(0,r.useState)(!1),[v,j]=(0,r.useState)(""),[C,k]=(0,r.useState)(""),[S,T]=(0,r.useState)(null),[O,_]=(0,r.useState)(!1),[A,P]=(0,r.useState)(""),[N,I]=(0,r.useState)(null),[R,U]=(0,r.useState)(""),[D,B]=(0,r.useState)("");function K(e){if(!e)return!1;if(e.expiresAtISO){const t=new Date(e.expiresAtISO);if(isNaN(t.getTime()));else if(Date.now()>t.getTime())return k("This note has expired."),!1}return!0}function z(){history.replaceState(null,"",location.pathname+location.search),I(null),T(null),k("")}function E(){return!!S&&!S.readOnly}return(0,r.useEffect)((()=>{const e=function(){const e=location.hash||"";if(!e.includes("note="))return null;const t=e.split("note=")[1];if(!t)return null;const[o,r]=t.split(".");try{return{payload:JSON.parse(atob(o)),rawKeyHex:r||null}}catch(n){return null}}();I(e),e&&("pw"===e.payload.mode?(_(!0),k("Protected note \u2014 enter password to open.")):"key"===e.payload.mode?e.rawKeyHex?(async()=>{try{const t=await u(e.rawKeyHex),o=await h(t,e.payload.iv,e.payload.ct);K(o)&&(T(o),k("Opened note from link."))}catch(t){console.error(t),k("Failed to decrypt with key from link.")}})():k("Shared link missing key \u2014 cannot open."):k("Unknown link mode."))}),[]),(0,s.jsxs)(n.A,{title:"Cloud Sticky Notes",children:[(0,s.jsx)(a.A,{children:(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})}),(0,s.jsxs)("div",{className:"app-container",style:{maxWidth:900,padding:"12px"},children:[(0,s.jsxs)("div",{className:"app-header",style:{marginBottom:16},children:[(0,s.jsx)("h1",{className:"app-title",children:"Cloud Sticky Note (static)"}),(0,s.jsx)("a",{className:"button button--secondary",href:"/docs/tutorial-apps/cloud-sticky-note-tutorial",children:"Tutorial"})]}),(0,s.jsx)("div",{className:"app-card",style:{marginBottom:12,display:"undefined"==typeof window||window.__APP_AUTH_OK__?"none":"block"},children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)("span",{className:"app-muted",children:"Please login to use app features"}),(0,s.jsx)("a",{className:"button button--secondary",href:"/auth",children:"Login / Register"})]})}),(0,s.jsx)("p",{style:{color:"var(--ifm-color-emphasis-800)"},children:"Create a temporary/shareable note. This zero-backend version stores the note encrypted in the URL fragment. Sharing the link allows others to open it. Use a password for higher privacy (recipient must know the password)."}),(0,s.jsxs)("div",{style:{display:"grid",gap:10,marginTop:12},children:[(0,s.jsxs)("label",{children:["Note name",(0,s.jsx)("input",{style:x.input,value:e,onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("label",{children:["Content",(0,s.jsx)("textarea",{rows:8,style:x.textarea,value:o,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,s.jsxs)("label",{style:{flex:1},children:["Expires (optional)",(0,s.jsx)("input",{type:"datetime-local",style:x.input,value:d,onChange:e=>c(e.target.value)})]}),(0,s.jsxs)("label",{style:{flexBasis:200},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,s.jsx)("input",{type:"checkbox",checked:b,onChange:e=>w(e.target.checked)}),(0,s.jsx)("div",{children:"Read-only link"})]}),(0,s.jsx)("small",{style:{color:"var(--ifm-color-emphasis-600)"},children:"Marking read-only is advisory in static links."})]}),(0,s.jsxs)("label",{style:{flexBasis:260},children:[(0,s.jsx)("div",{children:"Protect with password (optional)"}),(0,s.jsx)("input",{style:x.input,value:y,onChange:e=>g(e.target.value),placeholder:"Optional password"}),(0,s.jsx)("small",{style:{color:"var(--ifm-color-emphasis-600)"},children:"If set, recipients will need the password to open the note."})]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,s.jsx)("button",{onClick:async function(){try{k("Generating link...");const t={name:e||"Untitled",content:o||"",createdAtISO:(new Date).toISOString(),expiresAtISO:d?new Date(d).toISOString():null,readOnly:!!b},r=await m(t,y),n=`${location.origin}${location.pathname}#${r}`;j(n),k("Link generated. Copy and share.")}catch(t){console.error(t),k("Failed to generate link: "+t.message)}},style:x.btnPrimary,disabled:"undefined"!=typeof window&&!window.__APP_AUTH_OK__,children:"Generate share link"}),(0,s.jsx)("button",{onClick:function(){v&&navigator.clipboard.writeText(v).then((()=>k("Link copied to clipboard."))).catch((e=>k("Copy failed: "+e.message)))},style:x.btnSecondary,disabled:!v,children:"Copy link"}),(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(o||"")},style:x.btnGhost,children:"Copy content"}),(0,s.jsx)("button",{onClick:()=>{t(""),l(""),c(""),g(""),w(!1),j(""),k("")},style:x.btnGhost,children:"Reset"})]}),v&&(0,s.jsxs)("div",{style:{background:"var(--ifm-background-surface-color)",padding:8,borderRadius:6},children:[(0,s.jsx)("div",{style:{fontSize:13,color:"var(--ifm-color-emphasis-700)"},children:"Share link (fragment)"}),(0,s.jsx)("textarea",{readOnly:!0,rows:2,style:x.shareArea,value:v})]}),(0,s.jsxs)("div",{style:{marginTop:6},children:[(0,s.jsx)("strong",{children:"Status:"})," ",C]}),(0,s.jsx)("hr",{}),(0,s.jsx)("h3",{children:"Open shared note (from URL)"}),(0,s.jsxs)("div",{style:{marginTop:12},children:[(0,s.jsx)("h4",{children:"Open by name & password"}),(0,s.jsxs)("div",{style:{display:"grid",gap:8,maxWidth:520},children:[(0,s.jsxs)("label",{children:["Note name",(0,s.jsx)("input",{style:x.input,value:R,onChange:e=>U(e.target.value)})]}),(0,s.jsxs)("label",{children:["Password",(0,s.jsx)("input",{type:"password",style:x.input,value:D,onChange:e=>B(e.target.value)})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,s.jsx)("button",{onClick:async function(){if(!R)return void k("Please enter a note name to open.");const e=await f(R);if(e)if("pw"===e.mode)if(D)try{const t=await p(D,e.salt),o=await h(t,e.iv,e.ct);if(!K(o))return;T(o),k("Opened note by name + password."),_(!1),I(null)}catch(t){console.error(t),k("Wrong password or decryption failed.")}else k("Please enter the password to open this note.");else k("Stored note is not password-protected or cannot be opened by name/password.");else k("No stored note with that name found in this browser.")},style:x.btnPrimary,disabled:"undefined"!=typeof window&&!window.__APP_AUTH_OK__,children:"Open"}),(0,s.jsx)("button",{onClick:()=>{U(""),B(""),k("")},style:x.btnGhost,children:"Clear"})]}),(0,s.jsx)("div",{style:{color:"var(--ifm-color-emphasis-600)",fontSize:13},children:"Notes saved by password-protected generation (this browser) are accessible by entering the same name and password."})]})]}),N?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{padding:8,background:"var(--ifm-background-surface-color)",borderRadius:6},children:["Parsed shared link found in URL fragment. Mode: ",(0,s.jsx)("b",{children:N.payload.mode}),"."]}),"pw"===N.payload.mode&&(0,s.jsxs)("div",{style:{marginTop:8},children:[(0,s.jsx)("label",{children:"Enter password to open"}),(0,s.jsx)("input",{style:x.input,value:A,onChange:e=>P(e.target.value)}),(0,s.jsxs)("div",{style:{display:"flex",gap:8,marginTop:8},children:[(0,s.jsx)("button",{onClick:async function(){if(N)try{const e=await p(A,N.payload.salt),t=await h(e,N.payload.iv,N.payload.ct);if(!K(t))return;T(t),k("Opened note with password."),_(!1)}catch(e){console.error(e),k("Wrong password or decryption failed.")}},style:x.btnPrimary,disabled:"undefined"!=typeof window&&!window.__APP_AUTH_OK__,children:"Open"}),(0,s.jsx)("button",{onClick:z,style:x.btnGhost,children:"Clear"})]})]}),"key"===N.payload.mode&&(0,s.jsxs)("div",{style:{marginTop:8},children:[(0,s.jsx)("div",{children:"Key present in fragment (auto-decrypt attempted)."}),(0,s.jsx)("div",{style:{display:"flex",gap:8,marginTop:8},children:(0,s.jsx)("button",{onClick:z,style:x.btnGhost,children:"Clear"})})]})]}):(0,s.jsxs)("div",{children:["No share fragment found in URL. To open a note, paste a link with ",(0,s.jsx)("code",{children:"#note=..."})," and reload."]}),S&&(0,s.jsxs)("div",{style:{marginTop:12,padding:12,borderRadius:8,background:"var(--ifm-background-surface-color)"},children:[(0,s.jsx)("h3",{children:S.name}),(0,s.jsxs)("div",{style:{color:"var(--ifm-color-emphasis-600)",fontSize:13},children:["Created: ",S.createdAtISO,S.expiresAtISO&&(0,s.jsxs)("span",{children:[" \xb7 Expires: ",S.expiresAtISO]}),S.readOnly&&(0,s.jsx)("span",{children:" \xb7 Read-only"})]}),(0,s.jsx)("div",{style:{marginTop:8},children:(0,s.jsx)("textarea",{style:x.textarea,rows:8,value:S.content,readOnly:!E(),onChange:e=>T({...S,content:e.target.value})})}),(0,s.jsxs)("div",{style:{display:"flex",gap:8,marginTop:10},children:[(0,s.jsx)("button",{disabled:!E()||"undefined"!=typeof window&&!window.__APP_AUTH_OK__,onClick:async()=>{await async function(){if(!S)return;const e={...S,content:S.content,createdAtISO:S.createdAtISO||(new Date).toISOString()};let t="";N&&"pw"===N.payload.mode&&(t=A);const o=await m(e,t),r=`${location.origin}${location.pathname}#${o}`;j(r),k("Regenerated link for edited note. Copy to share.")}()},style:x.btnPrimary,children:"Save edits & regenerate link"}),(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(S.content||"")},style:x.btnSecondary,children:"Copy content"}),(0,s.jsx)("button",{onClick:z,style:x.btnGhost,children:"Close"})]})]})]}),(0,s.jsx)(i.A,{})]})]})}const x={input:{width:"100%",padding:"8px 10px",marginTop:6,borderRadius:6,border:"1px solid var(--ifm-border-color)"},textarea:{width:"100%",padding:"8px 10px",marginTop:6,borderRadius:6,border:"1px solid var(--ifm-border-color)",fontFamily:"inherit"},shareArea:{width:"100%",borderRadius:6,border:"1px solid var(--ifm-border-color)",padding:6},btnPrimary:{background:"var(--ifm-color-primary)",color:"var(--ifm-color-white)",padding:"8px 12px",borderRadius:6,border:"1px solid var(--ifm-color-primary)",cursor:"pointer"},btnSecondary:{background:"var(--ifm-color-primary)",color:"var(--ifm-color-white)",padding:"8px 12px",borderRadius:6,border:"1px solid var(--ifm-color-primary)",cursor:"pointer"},btnGhost:{background:"var(--ifm-background-color)",color:"var(--ifm-color-emphasis-900)",padding:"8px 12px",borderRadius:6,border:"1px solid var(--ifm-border-color)",cursor:"pointer"}}},62835:(e,t,o)=>{o.d(t,{A:()=>p});var r=o(96540),n=o(74848);const a={maxWidth:"800px",margin:"60px auto 0",textAlign:"left",padding:"0 20px"},i={fontSize:"2rem",fontWeight:"600",marginBottom:"16px",color:"var(--ifm-color-emphasis-900)"},s={fontSize:"1.1rem",color:"var(--ifm-color-emphasis-700)",lineHeight:1.6,marginBottom:"16px"},l={borderLeft:"4px solid var(--ifm-border-color)",paddingLeft:"16px",color:"var(--ifm-color-emphasis-700)",fontStyle:"italic",lineHeight:1.6,marginBottom:"16px"},d={backgroundColor:"var(--ifm-background-surface-color)",padding:"16px",borderRadius:"12px",overflowX:"auto",border:"1px solid var(--ifm-border-color)",color:"var(--ifm-color-emphasis-800)"},c={fontSize:"1.5rem",fontWeight:"600",marginBottom:"16px",color:"var(--ifm-color-emphasis-900)"};function p({containerStyle:e}){const[t,o]=(0,r.useState)(!1),[p,u]=(0,r.useState)(!1),y="LiangchaoDeng. (2025). smiler488/smiler488.github.io: Digital Plant Phenotyping Platform v25.0 (v25.0.0). Zenodo. https://doi.org/10.5281/zenodo.17544584",h="@software{Deng2025_DPPP_v25,\n  author       = {Deng, Liangchao},\n  title        = {Digital Plant Phenotyping Platform (v25.0)},\n  year         = {2025},\n  publisher    = {Zenodo},\n  doi          = {10.5281/zenodo.17544584},\n  url          = {https://doi.org/10.5281/zenodo.17544584},\n  note         = {[Computer software]}\n}";return(0,n.jsxs)("div",{style:{...a,...e},children:[(0,n.jsx)("h2",{style:i,children:"Citation"}),(0,n.jsxs)("p",{style:s,children:["If you use ",(0,n.jsx)("strong",{children:"Digital Plant Phenotyping Platform v25.0"})," or any of its applications in your research, please cite it as:"]}),(0,n.jsxs)("blockquote",{style:l,children:["LiangchaoDeng. (2025)."," ",(0,n.jsx)("em",{children:"smiler488/smiler488.github.io: Digital Plant Phenotyping Platform v25.0 (v25.0.0)"}),". Zenodo.",(0,n.jsx)("br",{}),(0,n.jsx)("a",{href:"https://doi.org/10.5281/zenodo.17544584",children:"https://doi.org/10.5281/zenodo.17544584"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",gap:"12px"},children:[(0,n.jsx)("button",{type:"button",onClick:async()=>{try{if("undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(y);else if("undefined"!=typeof document){const e=document.createElement("textarea");e.value=y,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}o(!0),setTimeout((()=>o(!1)),2e3)}catch{o(!1)}},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid var(--ifm-color-emphasis-900)",backgroundColor:"var(--ifm-color-emphasis-900)",color:"var(--ifm-color-emphasis-0)",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"transform 0.15s ease, background-color 0.15s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-primary)",e.currentTarget.style.borderColor="var(--ifm-color-primary)",e.currentTarget.style.transform="translateY(-1px)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.borderColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.transform="translateY(0)"},children:t?"Copied!":"Copy citation"}),(0,n.jsx)("span",{style:{fontSize:"0.9rem",color:t?"var(--ifm-color-success)":"var(--ifm-color-emphasis-600)"},children:t?"Citation copied to clipboard.":"Click to copy APA citation."})]}),(0,n.jsx)("a",{href:"https://doi.org/10.5281/zenodo.17544584",style:{display:"inline-block",marginBottom:"24px"},children:(0,n.jsx)("img",{src:"https://img.shields.io/badge/DOI-10.5281%2Fzenodo.17544584-blue",alt:"DOI badge",style:{height:"28px"}})}),(0,n.jsx)("hr",{style:{border:"none",borderTop:"1px solid var(--ifm-border-color)",marginBottom:"24px"}}),(0,n.jsx)("h3",{style:c,children:"BibTeX citation (Zotero \u2192 File \u2192 Import from Clipboard)"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",gap:"12px"},children:[(0,n.jsx)("button",{type:"button",onClick:async()=>{try{if("undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(h);else if("undefined"!=typeof document){const e=document.createElement("textarea");e.value=h,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}u(!0),setTimeout((()=>u(!1)),2e3)}catch{u(!1)}},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid var(--ifm-color-emphasis-900)",backgroundColor:"var(--ifm-color-emphasis-900)",color:"var(--ifm-color-emphasis-0)",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"transform 0.15s ease, background-color 0.15s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-primary)",e.currentTarget.style.borderColor="var(--ifm-color-primary)",e.currentTarget.style.transform="translateY(-1px)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.borderColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.transform="translateY(0)"},children:p?"Copied!":"Copy BibTeX"}),(0,n.jsx)("span",{style:{fontSize:"0.9rem",color:p?"var(--ifm-color-success)":"var(--ifm-color-emphasis-600)"},children:p?"BibTeX copied to clipboard. Switch to Zotero and choose Import from Clipboard.":"Click to copy BibTeX to clipboard for Zotero import."})]}),(0,n.jsx)("pre",{style:d,children:(0,n.jsx)("code",{children:h})})]})}}}]);