"use strict";(self.webpackChunkliangchao_website=self.webpackChunkliangchao_website||[]).push([[9082],{28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var s=i(96540);const l={},r=s.createContext(l);function t(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}},45482:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});var s=i(55431),l=i(74848),r=i(28453);const t={slug:"dji-p4m-webodm-qgis-workflow",title:"Complete Workflow for DJI P4M Multispectral Image Processing with WebODM and QGIS",authors:["liangchao"],tags:["UAV","WebODM","QGIS","Multispectral","P4M","Docker"],image:"/img/blog-default.jpg",date:new Date("2023-04-22T00:00:00.000Z")},a=void 0,o={authorsImageUrls:[void 0]},c=[{value:"Project Overview",id:"project-overview",level:2},{value:"Part 1: Environment Setup and Software Installation",id:"part-1-environment-setup-and-software-installation",level:2},{value:"1. Software Downloads",id:"1-software-downloads",level:3},{value:"2. WebODM Installation and Deployment",id:"2-webodm-installation-and-deployment",level:3},{value:"Mac / Windows (Bash)",id:"mac--windows-bash",level:4},{value:"3. Docker Image Acceleration (Recommended for China)",id:"3-docker-image-acceleration-recommended-for-china",level:3},{value:"4. Accessing WebODM",id:"4-accessing-webodm",level:3},{value:"Part 2: WebODM Image Processing",id:"part-2-webodm-image-processing",level:2},{value:"1. Multispectral Data Preparation (Critical)",id:"1-multispectral-data-preparation-critical",level:3},{value:"2. Creating Projects and Tasks",id:"2-creating-projects-and-tasks",level:3},{value:"3. Processing Parameter Settings (Core Steps)",id:"3-processing-parameter-settings-core-steps",level:3},{value:"4. Exporting Results",id:"4-exporting-results",level:3},{value:"Part 3: QGIS Post-processing and Analysis",id:"part-3-qgis-post-processing-and-analysis",level:2},{value:"1. Data Loading and CRS Check",id:"1-data-loading-and-crs-check",level:3},{value:"2. Clipping Field Area (Clip)",id:"2-clipping-field-area-clip",level:3},{value:"3. Calculating Vegetation Index (NDVI)",id:"3-calculating-vegetation-index-ndvi",level:3},{value:"4. Generating Vegetation Mask (Removing Soil Background)",id:"4-generating-vegetation-mask-removing-soil-background",level:3},{value:"5. Grayscale Quantization (GLCM Texture Calculation Preparation)",id:"5-grayscale-quantization-glcm-texture-calculation-preparation",level:3},{value:"6. Calculating GLCM Texture Features",id:"6-calculating-glcm-texture-features",level:3},{value:"7. Plot-scale Feature Extraction (Zonal Statistics)",id:"7-plot-scale-feature-extraction-zonal-statistics",level:3},{value:"Important Notes and Best Practices",id:"important-notes-and-best-practices",level:2},{value:"Data Preparation Phase",id:"data-preparation-phase",level:3},{value:"WebODM Processing Phase",id:"webodm-processing-phase",level:3},{value:"QGIS Post-processing Phase",id:"qgis-post-processing-phase",level:3},{value:"Result Validation",id:"result-validation",level:3}];function d(e){const n={code:"code",del:"del",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"project-overview",children:"Project Overview"}),"\n",(0,l.jsx)(n.p,{children:"This document provides a comprehensive guide on how to process DJI P4 Multispectral (P4M) multispectral imagery using open-source software WebODM and QGIS, from environment setup to final vegetation index extraction."}),"\n",(0,l.jsx)(n.h1,{id:"complete-workflow-for-dji-p4m-multispectral-image-processing-with-webodm-and-qgis",children:"Complete Workflow for DJI P4M Multispectral Image Processing with WebODM and QGIS"}),"\n",(0,l.jsx)(n.h2,{id:"part-1-environment-setup-and-software-installation",children:"Part 1: Environment Setup and Software Installation"}),"\n",(0,l.jsx)(n.h3,{id:"1-software-downloads",children:"1. Software Downloads"}),"\n",(0,l.jsx)(n.p,{children:"Ensure the following base software is installed:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Git"}),": For cloning code repositories."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Docker Desktop"}),": The container environment required for WebODM."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Python (v3.0+)"}),": Script execution environment."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"2-webodm-installation-and-deployment",children:"2. WebODM Installation and Deployment"}),"\n",(0,l.jsx)(n.h4,{id:"mac--windows-bash",children:"Mac / Windows (Bash)"}),"\n",(0,l.jsx)(n.p,{children:"Open Terminal (Terminal or Git Bash) and execute the following commands:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd D:/  # Or any other directory where you want to install\n# Set Git proxy (optional, if network is restricted)\n# git config --global http.proxy 'http://proxy_ip:port'\n# git config --global https.proxy 'http://proxy_ip:port'\n\n# Clone WebODM repository\ngit clone https://github.com/OpenDroneMap/WebODM\ncd WebODM\n\n# Docker login (optional, if you need to pull private images or avoid rate limits)\n# docker login -u <username>\n\n# Start WebODM\n./webodm.sh start\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3-docker-image-acceleration-recommended-for-china",children:"3. Docker Image Acceleration (Recommended for China)"}),"\n",(0,l.jsx)(n.p,{children:"If download speeds are slow, you can add mirror accelerators in Docker Desktop settings:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'"registry-mirror": [\n  "https://docker.mirrors.ustc.edu.cn",\n  "https://mirror.ccs.tencentyun.com"\n]\n'})}),"\n",(0,l.jsx)(n.p,{children:"Restart WebODM:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd WebODM\n./webodm.sh stop\n./webodm.sh start\n"})}),"\n",(0,l.jsx)(n.h3,{id:"4-accessing-webodm",children:"4. Accessing WebODM"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Open browser and visit ",(0,l.jsx)(n.code,{children:"http://localhost:8000"}),"."]}),"\n",(0,l.jsx)(n.li,{children:"Create username and password on first login."}),"\n",(0,l.jsx)(n.li,{children:"Enter the console to start processing tasks."}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"part-2-webodm-image-processing",children:"Part 2: WebODM Image Processing"}),"\n",(0,l.jsx)(n.h3,{id:"1-multispectral-data-preparation-critical",children:"1. Multispectral Data Preparation (Critical)"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Original Data Requirements (Must Follow):"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Must retain EXIF information"}),": Especially DLS (Daylight Sensor) information for radiometric calibration."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Do not rename files"}),": Keep original filenames."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"P4M Data Structure"}),": Each capture point should contain 6 images:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"RGB (jpg)"}),"\n",(0,l.jsx)(n.li,{children:"Blue (tif)"}),"\n",(0,l.jsx)(n.li,{children:"Green (tif)"}),"\n",(0,l.jsx)(n.li,{children:"Red (tif)"}),"\n",(0,l.jsx)(n.li,{children:"RedEdge (tif)"}),"\n",(0,l.jsx)(n.li,{children:"NIR (tif)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Important Note"}),": WebODM automatically parses bands, so there's no need to manually separate band files. Just upload all images directly."]}),"\n",(0,l.jsx)(n.h3,{id:"2-creating-projects-and-tasks",children:"2. Creating Projects and Tasks"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"New Project"}),": Click ",(0,l.jsx)(n.code,{children:"New Project"}),", name it (e.g.): ",(0,l.jsx)(n.code,{children:"maize_N_trial_2025"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"New Task"}),": Click ",(0,l.jsx)(n.code,{children:"New Task"}),", upload all multispectral images (WebODM will automatically parse bands without manual classification)."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"3-processing-parameter-settings-core-steps",children:"3. Processing Parameter Settings (Core Steps)"}),"\n",(0,l.jsxs)(n.p,{children:["Click ",(0,l.jsx)(n.code,{children:"Task Options"}),", use the following settings to ensure multispectral data accuracy:"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Recommended Preset"}),": Select ",(0,l.jsx)(n.code,{children:"Multispectral"})," preset, or manually confirm the following options."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Must Check/Enable:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Radiometric calibration"}),": Radiometric correction (using DLS information)."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Use EXIF GPS"}),": Use GPS positioning."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Use fixed camera parameters"}),": Fixed camera parameters."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Use band alignment"}),": Band registration (ensure spatial alignment across bands)."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Disable Unnecessary Modules (Save Time):"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Skip 3D model"}),": Skip 3D model generation."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Skip point cloud"}),": Skip point cloud generation."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Skip textured model"}),": Skip textured model."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Resolution and Quality:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Feature quality"}),": Medium (balance speed and quality)."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Orthophoto resolution"}),": Leave blank (automatic, recommended to keep original resolution)."]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Click ",(0,l.jsx)(n.strong,{children:"Start Task"})," to begin processing."]}),"\n",(0,l.jsx)(n.h3,{id:"4-exporting-results",children:"4. Exporting Results"}),"\n",(0,l.jsxs)(n.p,{children:["After task completion, go to ",(0,l.jsx)(n.code,{children:"Assets"})," -> ",(0,l.jsx)(n.code,{children:"Results"})," to download results.\nCore file: ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"orthophoto.tif"})})," (multiband multispectral orthophoto mosaic)."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"part-3-qgis-post-processing-and-analysis",children:"Part 3: QGIS Post-processing and Analysis"}),"\n",(0,l.jsx)(n.h3,{id:"1-data-loading-and-crs-check",children:"1. Data Loading and CRS Check"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Drag ",(0,l.jsx)(n.code,{children:"orthophoto.tif"})," into QGIS."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Check Coordinate System (CRS)"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Right-click layer -> ",(0,l.jsx)(n.code,{children:"Properties"})," -> ",(0,l.jsx)(n.code,{children:"Information"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Confirm CRS is a projected coordinate system (e.g., ",(0,l.jsx)(n.code,{children:"EPSG:32645"})," WGS84 / UTM Zone 45N), units should be ",(0,l.jsx)(n.strong,{children:"meters"}),"."]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.em,{children:"Note: All subsequent vector layers must match this coordinate system."})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"2-clipping-field-area-clip",children:"2. Clipping Field Area (Clip)"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Create Boundary"}),": If no boundary file exists, create a new GeoPackage layer (",(0,l.jsx)(n.code,{children:"Layer"})," -> ",(0,l.jsx)(n.code,{children:"Create Layer"})," -> ",(0,l.jsx)(n.code,{children:"New GeoPackage Layer"}),"), type Polygon, consistent CRS. Manually draw field boundaries and save."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Clip by Mask"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Toolbox path: ",(0,l.jsx)(n.code,{children:"GDAL"})," -> ",(0,l.jsx)(n.code,{children:"Raster extraction"})," -> ",(0,l.jsx)(n.code,{children:"Clip raster by mask layer"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Input raster"}),": Orthophoto."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Mask layer"}),": Field boundary Polygon."]}),"\n",(0,l.jsxs)(n.li,{children:["Check ",(0,l.jsx)(n.code,{children:"Crop to cutline"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Output: ",(0,l.jsx)(n.code,{children:"orthophoto_field.tif"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"3-calculating-vegetation-index-ndvi",children:"3. Calculating Vegetation Index (NDVI)"}),"\n",(0,l.jsxs)(n.p,{children:["Assume band order: Red (Band 1), NIR (Band 4) ",(0,l.jsx)(n.em,{children:"\uff08Please confirm P4M band order according to camera manual, as P4M Tif output order may vary, check band properties first\uff09"}),"."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Formula"}),": ",(0,l.jsx)(n.code,{children:"NDVI = (NIR - Red) / (NIR + Red)"})]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Open ",(0,l.jsx)(n.code,{children:"Raster"})," -> ",(0,l.jsx)(n.code,{children:"Raster Calculator"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Input formula (example):","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'("xkx-1-orthophoto@4" - "xkx-1-orthophoto@1") / ("xkx-1-orthophoto@4" + "xkx-1-orthophoto@1")\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Output file: ",(0,l.jsx)(n.code,{children:"NDVI.tif"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"4-generating-vegetation-mask-removing-soil-background",children:"4. Generating Vegetation Mask (Removing Soil Background)"}),"\n",(0,l.jsx)(n.p,{children:"To ensure accurate statistics, remove interference from bare soil between rows."}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Open Raster Calculator."}),"\n",(0,l.jsxs)(n.li,{children:["Formula:","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'("NDVI@1" > 0.2) * "NDVI@1"\n'})}),"\n",(0,l.jsx)(n.em,{children:"Explanation: When NDVI > 0.2, retain original value, otherwise set to 0 (or NoData)."})]}),"\n",(0,l.jsxs)(n.li,{children:["Output: ",(0,l.jsx)(n.code,{children:"NDVI_veg.tif"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"5-grayscale-quantization-glcm-texture-calculation-preparation",children:"5. Grayscale Quantization (GLCM Texture Calculation Preparation)"}),"\n",(0,l.jsx)(n.p,{children:"GLCM texture calculation typically requires integer grayscale images, while NDVI is floating-point."}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Open Raster Calculator."}),"\n",(0,l.jsxs)(n.li,{children:["Formula: Map -1",(0,l.jsx)(n.del,{children:"1 NDVI to 0"}),"255 integers.","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'("NDVI_veg@1" + 1) * 127\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Critical Setting"}),": ",(0,l.jsx)(n.code,{children:"Output data type"})," must select ",(0,l.jsx)(n.strong,{children:"Byte (UInt8)"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Output: ",(0,l.jsx)(n.code,{children:"NDVI_veg_uint8.tif"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"6-calculating-glcm-texture-features",children:"6. Calculating GLCM Texture Features"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Important Prerequisite: Grayscale Quantization"}),"\nGLCM texture calculation requires input images to have integer grayscale values, while NDVI is Float32 continuous values (range -1~1), direct calculation will cause errors. Grayscale quantization is mandatory:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Grayscale Quantization Steps"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Open ",(0,l.jsx)(n.code,{children:"Raster"})," -> ",(0,l.jsx)(n.code,{children:"Raster Calculator"})]}),"\n",(0,l.jsxs)(n.li,{children:["Formula: ",(0,l.jsx)(n.code,{children:'("NDVI_veg@1" + 1) * 127'})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Critical Setting"}),": ",(0,l.jsx)(n.code,{children:"Output data type"})," must select ",(0,l.jsx)(n.strong,{children:"Byte (UInt8)"})]}),"\n",(0,l.jsxs)(n.li,{children:["Output: ",(0,l.jsx)(n.code,{children:"NDVI_veg_uint8.tif"})]}),"\n",(0,l.jsxs)(n.li,{children:["Verification: Right-click layer -> ",(0,l.jsx)(n.code,{children:"Properties"})," -> ",(0,l.jsx)(n.code,{children:"Information"}),", confirm ",(0,l.jsx)(n.code,{children:"Data type = Byte"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"GLCM Texture Calculation"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Toolbox path: ",(0,l.jsx)(n.code,{children:"GRASS"})," -> ",(0,l.jsx)(n.code,{children:"Raster (r.*)"})," -> ",(0,l.jsx)(n.code,{children:"r.texture"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Input raster"}),": ",(0,l.jsx)(n.code,{children:"NDVI_veg_uint8.tif"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Neighborhood size"})," (Window size):","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["UAV 5-10cm resolution: Recommended ",(0,l.jsx)(n.strong,{children:"3"})," or ",(0,l.jsx)(n.strong,{children:"7"})]}),"\n",(0,l.jsx)(n.li,{children:"Larger windows = smoother texture features; smaller windows = richer details"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Check texture metrics:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"asm"})," (Angular Second Moment)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"contrast"})," (Contrast)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"corr"})," (Correlation)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"var"})," (Variance)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"idm"})," (Inverse Difference Moment)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"entr"})," (Entropy)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"dv"})," (Variance)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"sa"})," (Angular Second Moment)"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Output prefix: ",(0,l.jsx)(n.code,{children:"NDVI_tex"})]}),"\n",(0,l.jsxs)(n.li,{children:["Generated files:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"NDVI_tex_asm.tif"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"NDVI_tex_contrast.tif"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"NDVI_tex_corr.tif"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"NDVI_tex_var.tif"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"NDVI_tex_idm.tif"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"NDVI_tex_entr.tif"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"NDVI_tex_dv.tif"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"NDVI_tex_sa.tif"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"7-plot-scale-feature-extraction-zonal-statistics",children:"7. Plot-scale Feature Extraction (Zonal Statistics)"}),"\n",(0,l.jsx)(n.p,{children:"Finally, aggregate raster pixel values to each experimental plot (Plot)."}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Toolbox path: ",(0,l.jsx)(n.code,{children:"Raster analysis"})," -> ",(0,l.jsx)(n.code,{children:"Zonal statistics"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Raster layer"}),": ",(0,l.jsx)(n.code,{children:"NDVI_veg.tif"})," (or other texture layers)."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Vector layer containing zones"}),": Plot polygon layer (Polygon)."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Zone field"}),": Plot ID (",(0,l.jsx)(n.code,{children:"plot_id"}),")."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Statistics"}),": Select ",(0,l.jsx)(n.code,{children:"Mean"})," (mean), ",(0,l.jsx)(n.code,{children:"StDev"})," (standard deviation), etc."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Output column prefix"}),": e.g., ",(0,l.jsx)(n.code,{children:"NDVI_ZS_"})," (Zonal Statistics abbreviation)."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"After running, the plot layer's attribute table will contain calculated statistics:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"NDVI_ZS_mean"}),": Plot NDVI mean"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"NDVI_ZS_std"}),": Plot NDVI standard deviation"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"You will eventually obtain a plot-level feature table that can be exported as CSV for subsequent agricultural statistical analysis."}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"important-notes-and-best-practices",children:"Important Notes and Best Practices"}),"\n",(0,l.jsx)(n.h3,{id:"data-preparation-phase",children:"Data Preparation Phase"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Data Integrity"}),": Retain all EXIF information from original TIFF files, especially DLS data, which is the foundation for radiometric calibration."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"File Naming"}),": Never rename original files, keep camera-generated filenames."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Data Integrity Check"}),": Before uploading, confirm each capture point contains all 6 band files."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"webodm-processing-phase",children:"WebODM Processing Phase"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Parameter Selection"}),": The ",(0,l.jsx)(n.code,{children:"Multispectral"})," preset includes most necessary parameters, but manually confirm radiometric calibration and band alignment are enabled."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Resolution Settings"}),": Leave Orthophoto resolution blank to maintain original resolution, or specify specific values (e.g., 5cm) if downsampling is needed."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Time Control"}),": Disabling 3D-related modules significantly reduces processing time."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"qgis-post-processing-phase",children:"QGIS Post-processing Phase"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"CRS Consistency"}),": All subsequent analyses must be performed in a unified projected coordinate system to avoid area calculation errors."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Band Order Confirmation"}),": P4M band order may vary with firmware version, always check band properties before calculating indices."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Mask Threshold Selection"}),": NDVI threshold 0.2 is empirical, adjust based on actual crop types and soil background."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"GLCM Window Size"}),": Window size affects the spatial scale of texture features, choose based on research objectives and UAV resolution."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"result-validation",children:"Result Validation"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Intermediate Result Check"}),": Visualize results after each step to ensure no obvious errors."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Data Type Verification"}),": Confirm input is Byte type before GLCM calculation."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Statistical Reasonableness"}),": Check final plot statistics are within reasonable ranges (e.g., NDVI typically 0.2-0.8)."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},55431:e=>{e.exports=JSON.parse('{"permalink":"/blog/dji-p4m-webodm-qgis-workflow","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2023-04-22-dji-p4m-webodm-qgis-tutorial.md","source":"@site/blog/2023-04-22-dji-p4m-webodm-qgis-tutorial.md","title":"Complete Workflow for DJI P4M Multispectral Image Processing with WebODM and QGIS","description":"Project Overview","date":"2023-04-22T00:00:00.000Z","tags":[{"inline":false,"label":"UAV","permalink":"/blog/tags/uav","description":"Unmanned Aerial Vehicle"},{"inline":false,"label":"WebODM","permalink":"/blog/tags/webodm","description":"Web OpenDroneMap"},{"inline":false,"label":"QGIS","permalink":"/blog/tags/qgis","description":"QGIS geographic information system"},{"inline":false,"label":"Multispectral","permalink":"/blog/tags/multispectral","description":"Multispectral imaging"},{"inline":false,"label":"P4M","permalink":"/blog/tags/p4m","description":"DJI P4 Multispectral"},{"inline":false,"label":"Docker","permalink":"/blog/tags/docker","description":"Docker containerization"}],"readingTime":6.21,"hasTruncateMarker":true,"authors":[{"name":"Liangchao Deng","title":"Ph.D. Candidate @ SHZU @CAS-Cemps","url":"https://github.com/smiler488","page":{"permalink":"/blog/authors/liangchao"},"socials":{"x":"https://x.com/smiler488","github":"https://github.com/smiler488"},"imageURL":"/img/cv_person.png","key":"liangchao"}],"frontMatter":{"slug":"dji-p4m-webodm-qgis-workflow","title":"Complete Workflow for DJI P4M Multispectral Image Processing with WebODM and QGIS","authors":["liangchao"],"tags":["UAV","WebODM","QGIS","Multispectral","P4M","Docker"],"image":"/img/blog-default.jpg","date":"2023-04-22T00:00:00.000Z"},"unlisted":false,"prevItem":{"title":"Canopy Photosynthesis Modeling","permalink":"/blog/canopy-photosynthesis-modeling-en"},"nextItem":{"title":"PyTorch Tutorial","permalink":"/blog/pytorch-ml-dl-tutorial"}}')}}]);