"use strict";(self.webpackChunkliangchao_website=self.webpackChunkliangchao_website||[]).push([[9557],{6957:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var i=r(6540),o=r(3018),s=r(5260),d=r(4848);function n(){return(0,i.useEffect)((()=>{const e=e=>document.getElementById(e),t=()=>e("status"),r=(e,r=!1)=>{t()&&(t().textContent=e,t().style.color="#333333",t().style.fontWeight=r?"bold":"normal")},i=()=>{const t=e("cbRows"),r=e("cbCols"),i=e("cbSize"),o=e("cbComputed"),s=e("cbValidation");if(!(t&&r&&i&&o))return;const d=parseInt(t.value||"0",10),n=parseInt(r.value||"0",10),a=parseFloat(i.value||"0"),l=[];if(d<3&&l.push("Rows must be \u2265 3"),n<3&&l.push("Cols must be \u2265 3"),a<2&&l.push("Size must be \u2265 2mm"),a>100&&l.push("Size should be \u2264 100mm"),l.length>0)return o.textContent="Invalid parameters",o.style.color="#333333",void(s&&(s.textContent=l.join(", "),s.style.color="#333333",s.style.display="block"));const p=d+1,c=n+1,u=p*c,b=c*a,g=p*a;o.textContent=`Printed squares = ${p} \xd7 ${c} = ${u}`,o.style.color="#333333",s&&(s.textContent=`Board size: ${b}\xd7${g}mm`,s.style.color="#6c757d",s.style.display="block");const m=e("paper")?.value||"a4",x=parseFloat(e("margin")?.value||10),h={a4:[210,297],letter:[215.9,279.4]},[y,f]=h[m]||h.a4,v=y-2*x,w=f-2*x;if(b>v||g>w){const e=a*Math.min(v/b,w/g);s&&(s.textContent+=` | Will auto-scale to ${e.toFixed(1)}mm squares`,s.style.color="#666666")}},o=()=>{const t=parseFloat(e("beOuter")?.value||0),r=parseInt(e("beRings")?.value||0,10),i=parseFloat(e("beHole")?.value||0),o=parseFloat(e("beStroke")?.value||0),s=[];t<20&&s.push("Outer diameter too small"),t>250&&s.push("Outer diameter too large"),r<1&&s.push("Need at least 1 ring"),r>20&&s.push("Too many rings"),i>=t/2&&s.push("Center hole too large"),o>5&&s.push("Stroke too thick");const d=e("beValidation");return d&&(s.length>0?(d.textContent=s.join(", "),d.style.color="#333333"):(d.textContent=`Target size: ${t}mm diameter`,d.style.color="#28a745"),d.style.display="block"),0===s.length},s=()=>{const t=parseFloat(e("raOuter")?.value||0),r=parseFloat(e("raWidth")?.value||0),i=parseFloat(e("raA1")?.value||0),o=parseFloat(e("raA2")?.value||0),s=parseFloat(e("raHub")?.value||0),d=[];t<50&&d.push("Outer diameter too small"),r>=t/2&&d.push("Ring width too large"),(i<10||i>350)&&d.push("Gap 1 angle invalid"),(o<10||o>350)&&d.push("Gap 2 angle invalid"),s>=t/2&&d.push("Hub too large");const n=e("raValidation");if(n){if(d.length>0)n.textContent=d.join(", "),n.style.color="#333333";else{const e=t-2*r;n.textContent=`Ring: ${t}mm outer, ${e.toFixed(1)}mm inner`,n.style.color="#28a745"}n.style.display="block"}return 0===d.length},d=()=>{const t=e("targetType")?.value||"chessboard",r={type:t,paper:e("paper")?.value||"a4",margin:parseFloat(e("margin")?.value||10)};if("chessboard"===t){const t=parseInt(e("cbRows")?.value||9,10),i=parseInt(e("cbCols")?.value||6,10),o=parseFloat(e("cbSize")?.value||25);r.cbInnerRows=t,r.cbInnerCols=i,r.cbSize=o;const s=t+1,d=i+1;r.cbSquaresRows=s,r.cbSquaresCols=d,r.cbRows=s,r.cbCols=d,r.rows=s,r.cols=d,r.innerRows=t,r.innerCols=i}else"bullseye"===t?(r.beOuter=parseFloat(e("beOuter")?.value||160),r.beRings=parseInt(e("beRings")?.value||4,10),r.beHole=parseFloat(e("beHole")?.value||4),r.beStroke=parseFloat(e("beStroke")?.value||0)):"ringArcs"===t&&(r.raOuter=parseFloat(e("raOuter")?.value||180),r.raWidth=parseFloat(e("raWidth")?.value||30),r.raA1=parseFloat(e("raA1")?.value||300),r.raA2=parseFloat(e("raA2")?.value||120),r.raHub=parseFloat(e("raHub")?.value||40),r.raDot=parseFloat(e("raDot")?.value||2.5));return r},n=()=>{const t=e("targetType")?.value||"chessboard",r=e("chessParams"),d=e("bullseyeParams"),n=e("RingArcsParams");r&&(r.style.display="chessboard"===t?"block":"none"),d&&(d.style.display="bullseye"===t?"block":"none"),n&&(n.style.display="ringArcs"===t?"block":"none"),"chessboard"===t?i():"bullseye"===t?o():"ringArcs"===t&&s()},a=t=>{if("undefined"==typeof window)return!1;if(!!!(window.TARGETS_INIT||window.targetsPreview||window.targetsDownload))return!1;try{window.TARGETS_INIT&&!window.__targetsReady&&(window.TARGETS_INIT(),window.__targetsReady=!0);const t=e("btnPreview"),i=e("btnDownload"),a=e("previewSvg"),l=()=>{const e=d();let t=!0;if("chessboard"===e.type?(e.cbInnerRows<3||e.cbInnerCols<3||e.cbSize<2)&&(r("Invalid chessboard parameters",!0),t=!1):"bullseye"===e.type?(t=o(),t||r("Invalid bullseye parameters",!0)):"ringArcs"===e.type&&(t=s(),t||r("Invalid ring arcs parameters",!0)),t){if(console.log("[targets] preview params",e),"function"==typeof window.targetsPreview)return window.targetsPreview(e,a),void r("Preview updated successfully");if("function"==typeof window.TARGETS_PREVIEW)return window.TARGETS_PREVIEW(e),void r("Preview requested");window.__TARGETS_LAST_PARAMS=e,window.dispatchEvent(new CustomEvent("targets_preview_request",{detail:e})),r("Preview event dispatched")}},p=()=>{const e=d();let t=!0;if("chessboard"===e.type){if(e.cbInnerRows<3||e.cbInnerCols<3||e.cbSize<2)return void r("Cannot download: Invalid chessboard parameters",!0)}else if("bullseye"===e.type){if(t=o(),!t)return void r("Cannot download: Invalid bullseye parameters",!0)}else if("ringArcs"===e.type&&(t=s(),!t))return void r("Cannot download: Invalid ring arcs parameters",!0);return"function"==typeof window.targetsDownload?(window.targetsDownload(e),void r("Generating PDF...")):"function"==typeof window.TARGETS_DOWNLOAD?(window.TARGETS_DOWNLOAD(e),void r("Generating PDF...")):(window.__TARGETS_LAST_PARAMS=e,window.dispatchEvent(new CustomEvent("targets_download_request",{detail:e})),void r("Download event dispatched"))};return t&&!t.__bound&&(t.addEventListener("click",l),t.__bound=!0),i&&!i.__bound&&(i.addEventListener("click",p),i.__bound=!0),n(),l(),r("Calibration targets generator ready"),!0}catch(i){return console.error("Targets init failed from",t,i),r("Initialization failed. Check console for details.",!0),!1}};if(a("immediate"))return;const l=()=>a("targets_ready"),p=()=>a("window.load");window.addEventListener("targets_ready",l),window.addEventListener("load",p);const c=setInterval((()=>{a("poll")&&clearInterval(c)}),150);let u=null;const b=t=>{clearTimeout(u),u=setTimeout((()=>{t();const r=e("btnPreview");r&&r.click()}),300)},g=e("targetType");g&&g.addEventListener("change",(()=>{n();const t=e("btnPreview");t&&t.click()}));["cbRows","cbCols","cbSize"].forEach((t=>{const r=e(t);r&&(r.addEventListener("input",(()=>b(i))),r.addEventListener("change",(()=>b(i))))}));["beOuter","beRings","beHole","beStroke"].forEach((t=>{const r=e(t);r&&(r.addEventListener("input",(()=>b(o))),r.addEventListener("change",(()=>b(o))))}));["raOuter","raWidth","raA1","raA2","raHub","raDot"].forEach((t=>{const r=e(t);r&&(r.addEventListener("input",(()=>b(s))),r.addEventListener("change",(()=>b(s))))}));const m=e("paper"),x=e("margin");return m&&m.addEventListener("change",(()=>b(i))),x&&x.addEventListener("input",(()=>b(i))),i(),()=>{window.removeEventListener("targets_ready",l),window.removeEventListener("load",p),clearInterval(c),clearTimeout(u)}}),[]),(0,d.jsxs)(o.A,{title:"Calibration Targets Generator",children:[(0,d.jsxs)(s.A,{children:[(0,d.jsx)("script",{src:"https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"}),(0,d.jsx)("script",{id:"targets-script",src:"/js/targets_app.js",defer:!0})]}),(0,d.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto",padding:"24px"},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,d.jsx)("h1",{children:"Professional Calibration Targets Generator"}),(0,d.jsx)("a",{href:"/docs/tutorial-apps/calibration-targets-tutorial",style:{padding:"8px 16px",backgroundColor:"#000000",color:"#ffffff",textDecoration:"none",borderRadius:"10px",fontSize:"14px",fontWeight:"500",border:"1px solid #000000",transition:"all 0.2s ease"},onMouseOver:e=>{e.target.style.backgroundColor="#333333",e.target.style.borderColor="#333333",e.target.style.transform="translateY(-1px)"},onMouseOut:e=>{e.target.style.backgroundColor="#000000",e.target.style.borderColor="#000000",e.target.style.transform="translateY(0)"},children:"Tutorial"})]}),(0,d.jsxs)("p",{style:{marginTop:4,marginBottom:24,color:"#6c757d"},children:["Generate high-precision printable calibration targets for camera calibration and photogrammetry. Print at ",(0,d.jsx)("strong",{children:"100% / Actual size"})," to preserve accurate measurements. For chessboards, inputs are ",(0,d.jsx)("strong",{children:"inner corners"})," (intersection points)."]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"400px 1fr",gap:"32px",alignItems:"start"},children:[(0,d.jsxs)("div",{id:"controls",style:{border:"2px solid #e9ecef",borderRadius:16,padding:24,backgroundColor:"#f8f9fa"},children:[(0,d.jsx)("h3",{style:{marginTop:0,color:"#495057"},children:"Target Parameters"}),(0,d.jsxs)("div",{style:{marginBottom:20},children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Target Type"}),(0,d.jsxs)("select",{id:"targetType",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14},children:[(0,d.jsx)("option",{value:"chessboard",children:"Chessboard (OpenCV Standard)"}),(0,d.jsx)("option",{value:"bullseye",children:"Bullseye (Concentric Circles)"}),(0,d.jsx)("option",{value:"ringArcs",children:"Ring with Arc Gaps"})]})]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:20},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Paper Format"}),(0,d.jsxs)("select",{id:"paper",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14},children:[(0,d.jsx)("option",{value:"a4",children:"A4 (210\xd7297 mm)"}),(0,d.jsx)("option",{value:"letter",children:"Letter (8.5\xd711 in)"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Margin (mm)"}),(0,d.jsx)("input",{id:"margin",type:"number",defaultValue:"15",min:"5",max:"50",step:"1",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]})]}),(0,d.jsx)("hr",{style:{margin:"24px 0",border:"none",borderTop:"1px solid #dee2e6"}}),(0,d.jsxs)("div",{id:"chessParams",children:[(0,d.jsx)("h4",{style:{color:"#495057",marginBottom:16},children:"Chessboard Configuration"}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Rows (inner corners)"}),(0,d.jsx)("input",{id:"cbRows",type:"number",min:"3",max:"50",defaultValue:"9",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Cols (inner corners)"}),(0,d.jsx)("input",{id:"cbCols",type:"number",min:"3",max:"50",defaultValue:"6",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]})]}),(0,d.jsxs)("div",{style:{marginBottom:16},children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Square Size (mm)"}),(0,d.jsx)("input",{id:"cbSize",type:"number",min:"2",max:"100",step:"0.5",defaultValue:"25",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]}),(0,d.jsxs)("div",{style:{padding:12,backgroundColor:"#e3f2fd",borderRadius:8,fontSize:12,color:"#1565c0",marginBottom:8},children:[(0,d.jsx)("strong",{children:"Note:"})," OpenCV detects ",(0,d.jsx)("em",{children:"inner corners"})," (intersection points). Printed squares = ",(0,d.jsx)("code",{children:"(rows + 1) \xd7 (cols + 1)"})]}),(0,d.jsx)("div",{id:"cbComputed",style:{fontSize:13,fontWeight:"bold",padding:8,backgroundColor:"#fff",border:"1px solid #dee2e6",borderRadius:6}}),(0,d.jsx)("div",{id:"cbValidation",style:{fontSize:12,marginTop:8,padding:8,backgroundColor:"#fff",border:"1px solid #dee2e6",borderRadius:6,display:"none"}})]}),(0,d.jsxs)("div",{id:"bullseyeParams",style:{display:"none"},children:[(0,d.jsx)("h4",{style:{color:"#495057",marginBottom:16},children:"Bullseye Configuration"}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Outer Diameter (mm)"}),(0,d.jsx)("input",{id:"beOuter",type:"number",min:"20",max:"250",step:"5",defaultValue:"160",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Ring Count"}),(0,d.jsx)("input",{id:"beRings",type:"number",min:"1",max:"20",defaultValue:"4",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Center Hole (mm)"}),(0,d.jsx)("input",{id:"beHole",type:"number",min:"0",max:"50",step:"0.5",defaultValue:"4",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Border Stroke (mm)"}),(0,d.jsx)("input",{id:"beStroke",type:"number",min:"0",max:"5",step:"0.1",defaultValue:"0",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]})]}),(0,d.jsx)("div",{id:"beValidation",style:{fontSize:12,padding:8,backgroundColor:"#fff",border:"1px solid #dee2e6",borderRadius:6,display:"none"}})]}),(0,d.jsxs)("div",{id:"RingArcsParams",style:{display:"none"},children:[(0,d.jsx)("h4",{style:{color:"#495057",marginBottom:16},children:"Ring with Arc Gaps"}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Outer Diameter (mm)"}),(0,d.jsx)("input",{id:"raOuter",type:"number",min:"50",max:"250",step:"5",defaultValue:"180",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Ring Width (mm)"}),(0,d.jsx)("input",{id:"raWidth",type:"number",min:"5",max:"50",step:"1",defaultValue:"30",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Gap 1 Angle (\xb0)"}),(0,d.jsx)("input",{id:"raA1",type:"number",min:"10",max:"350",step:"5",defaultValue:"300",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Gap 2 Angle (\xb0)"}),(0,d.jsx)("input",{id:"raA2",type:"number",min:"10",max:"350",step:"5",defaultValue:"120",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Center Hub (mm)"}),(0,d.jsx)("input",{id:"raHub",type:"number",min:"0",max:"100",step:"1",defaultValue:"40",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:"bold"},children:"Key Dot (mm)"}),(0,d.jsx)("input",{id:"raDot",type:"number",min:"0",max:"10",step:"0.1",defaultValue:"2.5",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:6,fontSize:14}})]})]}),(0,d.jsx)("div",{id:"raValidation",style:{fontSize:12,padding:8,backgroundColor:"#fff",border:"1px solid #dee2e6",borderRadius:6,display:"none"}})]}),(0,d.jsx)("hr",{style:{margin:"24px 0",border:"none",borderTop:"1px solid #dee2e6"}}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,d.jsx)("button",{type:"button",id:"btnPreview",style:{padding:"12px 16px",border:"2px solid #007bff",borderRadius:8,backgroundColor:"#fff",color:"#007bff",fontWeight:"bold",cursor:"pointer",fontSize:14},children:"Live Preview"}),(0,d.jsx)("button",{type:"button",id:"btnDownload",style:{padding:"12px 16px",border:"none",borderRadius:8,backgroundColor:"#28a745",color:"#fff",fontWeight:"bold",cursor:"pointer",fontSize:14},children:"Download PDF"})]}),(0,d.jsx)("p",{id:"status",style:{marginTop:16,fontSize:13,padding:8,backgroundColor:"#fff",border:"1px solid #dee2e6",borderRadius:6,textAlign:"center"},children:"Initializing..."})]}),(0,d.jsxs)("div",{style:{border:"2px solid #e9ecef",borderRadius:16,padding:24,backgroundColor:"#fff"},children:[(0,d.jsx)("h3",{style:{marginTop:0,color:"#495057"},children:"Live Preview"}),(0,d.jsx)("div",{style:{width:"100%",background:"#f8f9fa",border:"2px dashed #dee2e6",borderRadius:12,overflow:"hidden",padding:16,minHeight:400},children:(0,d.jsx)("svg",{id:"previewSvg",viewBox:"0 0 210 297",width:"100%",style:{maxHeight:"600px",border:"1px solid #dee2e6",borderRadius:8,backgroundColor:"#fff"}})}),(0,d.jsxs)("div",{style:{marginTop:16,color:"#6c757d",fontSize:14,textAlign:"center",padding:12,backgroundColor:"#f8f9fa",borderRadius:8},children:[(0,d.jsx)("strong",{children:"Preview Note:"})," Scale is proportional for display. Physical dimensions are preserved in the exported PDF."]})]})]}),(0,d.jsxs)("div",{style:{marginTop:32,padding:20,backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:12,fontSize:14,color:"#856404"},children:[(0,d.jsx)("h4",{style:{marginTop:0,color:"#856404"},children:"Printing Instructions"}),(0,d.jsxs)("ul",{style:{marginBottom:0,paddingLeft:20},children:[(0,d.jsx)("li",{children:"Use high-quality white paper (minimum 80gsm recommended)"}),(0,d.jsxs)("li",{children:["Print at ",(0,d.jsx)("strong",{children:"100% scale / Actual size"}),' - disable "Fit to page"']}),(0,d.jsx)("li",{children:"Use a laser printer for best precision and contrast"}),(0,d.jsx)("li",{children:"Verify printed dimensions with a ruler before use"}),(0,d.jsx)("li",{children:"For best results, mount on rigid backing (foam board, etc.)"})]})]})]})]})}}}]);