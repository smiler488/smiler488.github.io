"use strict";(self.webpackChunkliangchao_website=self.webpackChunkliangchao_website||[]).push([[4255],{5246:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n=i(6540),o=i(4848);function r(){const{videoRef:e,ready:t,error:i}=function(){const e=(0,n.useRef)(null),[t,i]=(0,n.useState)(!1),[o,r]=(0,n.useState)(null);return(0,n.useEffect)((()=>{let t=null;return(async()=>{try{t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}),e.current&&(e.current.srcObject=t,await e.current.play(),i(!0))}catch(n){r(n?.message||String(n))}})(),()=>{t&&t.getTracks().forEach((e=>e.stop()))}}),[]),{videoRef:e,ready:t,error:o}}(),[r,a]=(0,n.useState)("proxy"),[s,l]=(0,n.useState)((()=>{if("undefined"!=typeof window){if("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)return"http://localhost:3000/api/solve"}return"mock://ai-solver"})),[d,c]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),u=[{id:"default",name:"Default Analysis",prompt:"Please analyze the problem in the image and provide a step-by-step solution.",description:"General analysis for most problems"},{id:"math",name:"Math Problem Solver",prompt:"Please analyze the mathematical problem in the image and provide detailed solution steps and the final answer. If there are multiple approaches, show the most elegant method.",description:"For math equations, geometry problems, etc."},{id:"lab_safety",name:"Laboratory Safety Officer",prompt:"As a laboratory safety officer, please analyze the safety concerns in this image. Identify potential hazards, safety violations, or improper procedures. Provide specific recommendations for correcting these issues according to standard laboratory safety protocols. If PPE (Personal Protective Equipment) is visible, evaluate if it's appropriate and properly worn. For chemical or biological hazards, include proper handling and disposal procedures.",description:"Safety assessment for laboratory environments"},{id:"plant",name:"Plant Identification",prompt:"Please identify the plant in the image. Provide its scientific name, common names, growth habits, native regions, and any special uses (medicinal, ornamental, etc.). For common plants, include care tips.",description:"Identify plant species and related information"},{id:"code",name:"Code Analysis",prompt:"Please analyze the code in the image. Explain its functionality, identify potential issues or bugs, and suggest optimizations. If there are obvious errors, provide corrected code.",description:"Analyze code issues and provide fixes"},{id:"translation",name:"Academic Translation",prompt:"Please translate the academic text in the image to English, maintaining accuracy of technical terms. The translation should be fluent and natural while preserving the academic style.",description:"Professional translation of academic literature"},{id:"physics",name:"Physics Problem Solver",prompt:"Please analyze the physics problem in the image. Explain the relevant physics concepts and principles, then provide detailed solution steps and the final answer. For formula derivations, clearly show each step.",description:"Detailed analysis of physics problems"},{id:"chemistry",name:"Chemistry Problem Solver",prompt:"Please analyze the chemistry problem in the image. Explain the relevant chemical concepts and principles, provide chemical equations, balanced equations or reaction mechanisms, then give detailed solution steps and the final answer.",description:"Detailed analysis of chemistry problems"},{id:"english",name:"English Learning",prompt:"Please analyze the English text in the image. Explain its grammatical structure, key vocabulary, and expressions. If it's an exercise, provide the correct answers with detailed explanations. For difficult vocabulary, provide definitions and example sentences.",description:"English learning and exercise analysis"},{id:"ocr",name:"Text Extraction",prompt:"Please extract all text content from the image, maintaining the original paragraph structure and format. If there are tables, try to preserve the table structure. The extracted text should be accurate.",description:"Extract text content from images"},{id:"custom",name:"Custom",prompt:"",description:"Custom prompt"}],[m,g]=(0,n.useState)("default"),[y,x]=(0,n.useState)(u[0].prompt),[f,v]=(0,n.useState)("hunyuan-vision"),[b,w]=(0,n.useState)(""),[j,S]=(0,n.useState)(!1),[C,k]=(0,n.useState)(null),[P,R]=(0,n.useState)("camera"),[T,E]=(0,n.useState)(""),[z,M]=(0,n.useState)(null),[A,D]=(0,n.useState)(null),[I,L]=(0,n.useState)(!1);async function N(e){if("direct"!==r){if(!s||!s.trim())throw new Error("Please provide a valid proxy URL in the settings below");try{const t=await async function(e,t){if("string"==typeof e&&e.startsWith("mock://")){const e=(new Date).toISOString(),i=(()=>{const e=t?.question||"No question provided",i=t?.model||"hunyuan-lite";return`${t?.imageBase64||t?.imageUrl?"Mock Vision Analysis":"Mock Text Analysis"} (model: ${i})\n\nUser question:\n${e}\n\nThis is a mocked response for demo purposes. Replace proxy URL with your real API when ready.`})(),n={Response:{RequestId:"mock-"+Math.random().toString(36).slice(2),Choices:[{Message:{Content:i}}],Usage:{PromptTokens:128,CompletionTokens:256,TotalTokens:384},Timestamp:e}};return{ok:!0,status:200,json:async()=>n,text:async()=>JSON.stringify(n),headers:new Map([["content-type","application/json"]])}}return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}(s,e);if(!t.ok){const e=await t.text().catch((()=>""));throw new Error(`Request failed ${t.status}: ${e}`)}const i=await t.json().catch((async()=>({raw:await t.text()})));if(i.Response&&i.Response.Choices&&i.Response.Choices.length>0){const e=i.Response.Choices[0].Message?.Content||"",t=i.Response.Usage||{},n=`${e}\n\n---\nTokens: ${t.TotalTokens||"N/A"} (Prompt: ${t.PromptTokens||"N/A"}, Completion: ${t.CompletionTokens||"N/A"})`;w(n),window.lastFullResponse=i}else w(JSON.stringify(i,null,2))}catch(t){if("TypeError"===t.name&&t.message.includes("fetch"))throw new Error(`Network error: Cannot connect to ${s}. Please check the proxy URL or your network connection.`);throw t}}else{if(!d||!h)throw new Error("Please enter SecretId and SecretKey");w("Direct mode is not implemented yet, please use proxy mode")}}async function O(e){const t={imageBase64:e,question:y,model:f};await N(t)}function U(e,t){if(!z||!A)return;e.preventDefault(),e.stopPropagation();const i=e.currentTarget.getBoundingClientRect(),n=z.width/i.width,o=z.height/i.height,r=JSON.parse(JSON.stringify(A)),a=e.clientX,s=e.clientY,l={...r},d=e=>{e.preventDefault();const i=e.clientX-a,d=e.clientY-s,c=i*n,h=d*o;let p;if("move"===t){const e=Math.max(0,Math.min(z.width-r.width,r.x+c)),t=Math.max(0,Math.min(z.height-r.height,r.y+h));p={...r,x:e,y:t}}else if("resize"===t){const e=Math.max(50,Math.min(z.width-r.x,r.width+c)),t=Math.max(50,Math.min(z.height-r.y,r.height+h));p={...r,width:e,height:t}}Object.assign(l,p),D(p)},c=()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",c),document.removeEventListener("mouseleave",c)};document.addEventListener("mousemove",d,{passive:!1}),document.addEventListener("mouseup",c),document.addEventListener("mouseleave",c)}return(0,o.jsxs)("div",{style:{maxWidth:920,margin:"0 auto",padding:"24px"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,o.jsx)("h1",{children:"AI Solver (Hunyuan)"}),(0,o.jsx)("a",{href:"/docs/ai-solver-tutorial",style:{padding:"8px 16px",backgroundColor:"#000000",color:"#ffffff",textDecoration:"none",borderRadius:"10px",fontSize:"14px",fontWeight:"500",border:"1px solid #000000",transition:"all 0.2s ease"},onMouseOver:e=>{e.target.style.backgroundColor="#333333",e.target.style.borderColor="#333333",e.target.style.transform="translateY(-1px)"},onMouseOut:e=>{e.target.style.backgroundColor="#000000",e.target.style.borderColor="#000000",e.target.style.transform="translateY(0)"},children:"Tutorial"})]}),(0,o.jsx)("p",{children:"Supports camera capture, screen capture, and text questions. For security, the page does not accept any keys."}),(0,o.jsxs)("p",{style:{fontSize:14,color:"#666"},children:["Tip: In text mode, type ",(0,o.jsx)("code",{children:"/preset name"})," to quickly switch presets, e.g. ",(0,o.jsx)("code",{children:"/preset Math Problem Solver"})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:24,alignItems:"flex-start",flexWrap:"wrap"},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("fieldset",{style:{border:"1px solid #ddd",borderRadius:8,padding:12,marginBottom:16},children:[(0,o.jsx)("legend",{children:"Input Mode"}),(0,o.jsxs)("label",{style:{display:"block",marginBottom:8},children:[(0,o.jsx)("input",{type:"radio",value:"camera",checked:"camera"===P,onChange:e=>R(e.target.value)}),(0,o.jsx)("span",{style:{marginLeft:8},children:" Camera Capture"})]}),(0,o.jsxs)("label",{style:{display:"block",marginBottom:8},children:[(0,o.jsx)("input",{type:"radio",value:"screenshot",checked:"screenshot"===P,onChange:e=>R(e.target.value)}),(0,o.jsx)("span",{style:{marginLeft:8},children:" Screen Capture"})]}),(0,o.jsxs)("label",{style:{display:"block"},children:[(0,o.jsx)("input",{type:"radio",value:"text",checked:"text"===P,onChange:e=>R(e.target.value)}),(0,o.jsx)("span",{style:{marginLeft:8},children:" Text Question"})]})]}),"camera"===P&&(0,o.jsxs)("div",{children:[(0,o.jsx)("video",{ref:e,autoPlay:!0,playsInline:!0,style:{width:320,background:"#000",borderRadius:8}}),(0,o.jsx)("div",{style:{marginTop:8,color:"#666"},children:t?"Camera ready":i?`Camera error: ${i}`:"Requesting camera permission\u2026"}),(0,o.jsx)("button",{onClick:async function(){if(e.current){w(""),S(!0);try{const t=await async function(e,t=1280,i=.85){const n=e.videoWidth||1080,o=e.videoHeight||1440,r=Math.min(1,t/Math.max(n,o)),a=document.createElement("canvas");return a.width=Math.round(n*r),a.height=Math.round(o*r),a.getContext("2d").drawImage(e,0,0,a.width,a.height),await new Promise((e=>a.toBlob((t=>e(t)),"image/jpeg",i)))}(e.current);k(Math.round(t.size/1024));const i=await new Promise((e=>{const i=new FileReader;i.onload=()=>e(i.result),i.readAsDataURL(t)})),n=String(i).split(",")[1];await O(n)}catch(t){w("Error: "+(t?.message||String(t)))}finally{S(!1)}}},disabled:!t||j,style:{marginTop:12,padding:"8px 16px",fontSize:14},children:j?"Processing\u2026":" Capture and Solve"})]}),"screenshot"===P&&(0,o.jsx)("div",{children:I?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{position:"relative",width:320,height:240,border:"2px solid #000000",borderRadius:8,overflow:"hidden"},children:[(0,o.jsx)("img",{src:z?.dataUrl,alt:"Screenshot",style:{width:"100%",height:"100%",objectFit:"contain"},onMouseDown:e=>U(e,"move")}),A&&z&&(0,o.jsx)("div",{style:{position:"absolute",left:A.x/z.width*100+"%",top:A.y/z.height*100+"%",width:A.width/z.width*100+"%",height:A.height/z.height*100+"%",border:"2px solid #333333",backgroundColor:"rgba(0, 0, 0, 0.06)",cursor:"move",boxSizing:"border-box"},onMouseDown:e=>{e.stopPropagation(),U(e,"move")},children:(0,o.jsx)("div",{style:{position:"absolute",right:-4,bottom:-4,width:8,height:8,backgroundColor:"#333333",cursor:"se-resize",borderRadius:"50%"},onMouseDown:e=>{e.stopPropagation(),U(e,"resize")}})})]}),(0,o.jsx)("div",{style:{marginTop:8,color:"#666",fontSize:12},children:"Selection box shows selected area. Drag to move, drag corner to resize."}),(0,o.jsxs)("div",{style:{marginTop:12,display:"flex",gap:8},children:[(0,o.jsx)("button",{onClick:async function(){if(z&&A){S(!0);try{const e=document.createElement("canvas");e.width=A.width,e.height=A.height;e.getContext("2d").drawImage(z.canvas,A.x,A.y,A.width,A.height,0,0,A.width,A.height);const t=await new Promise((t=>e.toBlob((e=>t(e)),"image/jpeg",.85)));k(Math.round(t.size/1024));const i=await new Promise((e=>{const i=new FileReader;i.onload=()=>e(i.result),i.readAsDataURL(t)})),n=String(i).split(",")[1];await O(n),M(null),D(null),L(!1)}catch(e){w("Error: "+(e?.message||String(e)))}finally{S(!1)}}},disabled:j,style:{padding:"8px 16px",fontSize:14,backgroundColor:"#6c6c70",color:"white",border:"1px solid #6c6c70",borderRadius:4,cursor:"pointer"},children:j?"Processing\u2026":"Analyze Selected Area"}),(0,o.jsx)("button",{onClick:function(){M(null),D(null),L(!1)},disabled:j,style:{padding:"8px 16px",fontSize:14,backgroundColor:"#6c6c70",color:"white",border:"1px solid #6c6c70",borderRadius:4,cursor:"not-allowed"},children:"Cancel"})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{width:320,height:240,background:"#f5f5f5",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",border:"2px dashed #ccc"},children:(0,o.jsxs)("div",{style:{textAlign:"center",color:"#666"},children:[(0,o.jsx)("div",{style:{fontSize:48,marginBottom:8},children:" "}),(0,o.jsx)("div",{children:"Click the button below to start screenshot"})]})}),(0,o.jsx)("div",{style:{marginTop:8,color:"#666"},children:"Screenshot mode: You can select a specific area after capturing"}),(0,o.jsx)("button",{onClick:async function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia){w(""),S(!0);try{const e=await navigator.mediaDevices.getDisplayMedia({video:{mediaSource:"screen"},audio:!1}),t=document.createElement("video");t.srcObject=e,t.play(),await new Promise((e=>{t.onloadedmetadata=e}));const i=document.createElement("canvas");i.width=t.videoWidth,i.height=t.videoHeight;i.getContext("2d").drawImage(t,0,0),e.getTracks().forEach((e=>e.stop()));const n=i.toDataURL("image/jpeg",.85);M({dataUrl:n,width:i.width,height:i.height,canvas:i});const o=.5*Math.min(i.width,i.height);D({x:(i.width-o)/2,y:(i.height-o)/2,width:o,height:o}),L(!0)}catch(e){"NotAllowedError"===e.name?w("Error: The user canceled screen sharing permission"):w("Error: "+(e?.message||String(e)))}finally{S(!1)}}else w("Error: The browser does not support screen capture")},disabled:j,style:{marginTop:12,padding:"8px 16px",fontSize:14},children:j?"Processing\u2026":" Capture Screen"})]})}),"text"===P&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{width:320,minHeight:240,background:"#f9f9f9",borderRadius:8,padding:16,border:"1px solid #ddd"},children:[(0,o.jsx)("div",{style:{marginBottom:12,color:"#666",fontSize:14},children:" Text Question Mode"}),(0,o.jsx)("textarea",{value:T,onChange:e=>E(e.target.value),placeholder:"Please enter your question, for example:\n\u2022 Explain the basic principles of quantum mechanics\n\u2022 Write a Python sorting algorithm\n\u2022 Type /preset to see available presets",style:{width:"100%",height:160,border:"1px solid #ccc",borderRadius:4,padding:8,fontSize:14,resize:"vertical",fontFamily:"inherit"}})]}),(0,o.jsx)("div",{style:{marginTop:8,color:"#666"},children:"Enter your question directly and the AI will provide a detailed answer"}),(0,o.jsx)("button",{onClick:async function(){if(T.trim()){w(""),S(!0);try{await async function(e){if(e.startsWith("/preset ")){const t=e.substring(8).trim().toLowerCase(),i=u.find((e=>e.id.toLowerCase()===t||e.name.toLowerCase()===t));return i?(g(i.id),x(i.prompt),void w(`Switched to preset: ${i.name}\n\nPreset prompt: ${i.prompt}`)):void w(`Preset "${t}" not found. Available presets: ${u.map((e=>e.name)).join(", ")}`)}const t={question:e,model:"hunyuan-lite"};await N(t)}(T.trim())}catch(e){w("Error: "+(e?.message||String(e)))}finally{S(!1)}}else w("Please enter your question")},disabled:j||!T.trim(),style:{marginTop:12,padding:"8px 16px",fontSize:14},children:j?"Thinking\u2026":" Ask and Get Answer"})]}),null!=C&&(0,o.jsxs)("div",{style:{marginTop:6,fontSize:12,color:"#999"},children:["Last image size: ",C," KB"]})]}),(0,o.jsxs)("div",{style:{flex:1,minWidth:280},children:[(0,o.jsxs)("fieldset",{style:{border:"1px solid #ddd",borderRadius:8,padding:12,marginBottom:16},children:[(0,o.jsx)("legend",{children:"Connection Mode"}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"radio",value:"proxy",checked:"proxy"===r,onChange:e=>a(e.target.value)}),"Proxy Mode (Recommended)"]}),(0,o.jsxs)("label",{style:{marginLeft:16},children:[(0,o.jsx)("input",{type:"radio",value:"direct",checked:"direct"===r,onChange:e=>a(e.target.value)}),"Direct Mode (Testing)"]})]}),"proxy"===r?(0,o.jsxs)("fieldset",{style:{border:"1px solid #e5e5ea",borderRadius:8,padding:12,marginBottom:16,background:"#f5f5f7"},children:[(0,o.jsx)("legend",{children:"Proxy Settings"}),(0,o.jsxs)("label",{children:["Proxy URL",(0,o.jsx)("br",{}),(0,o.jsx)("input",{value:s,onChange:e=>l(e.target.value),placeholder:"Enter your API endpoint or select from options below",style:{width:"100%"}})]}),(0,o.jsxs)("div",{style:{marginTop:12},children:[(0,o.jsx)("div",{style:{fontSize:12,color:"#666",marginBottom:8},children:"Quick Options:"}),(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:(0,o.jsx)("button",{type:"button",onClick:()=>l("https://smiler488githubio.vercel.app/api/solve"),style:{padding:"4px 8px",fontSize:11,background:"#f5f5f7",border:"1px solid #e5e5ea",borderRadius:4,cursor:"pointer"},children:"Old Vercel"})})]}),(0,o.jsxs)("div",{style:{color:"#345",fontSize:12,marginTop:12},children:[(0,o.jsx)("strong",{children:"Tips:"}),(0,o.jsx)("br",{}),"\u2022 Local Dev: For development with local server",(0,o.jsx)("br",{}),"\u2022 CORS Proxy: Bypass CORS restrictions for GitHub Pages",(0,o.jsx)("br",{}),"\u2022 Direct Vercel: Try direct access (may have CORS issues)",(0,o.jsx)("br",{}),"\u2022 Configure in .env.local: HUNYUAN_SECRET_ID, HUNYUAN_SECRET_KEY, HUNYUAN_VERSION"]})]}):(0,o.jsxs)("fieldset",{style:{border:"1px solid #e5e5ea",borderRadius:8,padding:12,marginBottom:16,background:"#f5f5f7"},children:[(0,o.jsx)("legend",{children:"Direct Settings (Testing only)"}),(0,o.jsxs)("label",{children:["Secret ID",(0,o.jsx)("br",{}),(0,o.jsx)("input",{value:d,onChange:e=>c(e.target.value),placeholder:"AKIDxxxxx",style:{width:"100%"}})]}),(0,o.jsxs)("label",{style:{display:"block",marginTop:8},children:["Secret Key",(0,o.jsx)("br",{}),(0,o.jsx)("input",{type:"password",value:h,onChange:e=>p(e.target.value),placeholder:"Secret Key",style:{width:"100%"}})]}),(0,o.jsx)("div",{style:{color:"#d63031",fontSize:12,marginTop:8},children:"Direct mode exposes the key, for local testing only!"})]}),(0,o.jsxs)("fieldset",{style:{border:"1px solid #ddd",borderRadius:8,padding:12},children:[(0,o.jsx)("legend",{children:"Request Parameters"}),(0,o.jsxs)("label",{children:["Model",(0,o.jsx)("br",{}),(0,o.jsx)("input",{value:f,onChange:e=>v(e.target.value),style:{width:"100%"}})]}),(0,o.jsxs)("div",{style:{marginTop:8},children:[(0,o.jsxs)("label",{children:["PromptPreset",(0,o.jsx)("br",{}),(0,o.jsx)("select",{value:m,onChange:e=>{g(e.target.value);const t=u.find((t=>t.id===e.target.value));t&&"custom"!==t.id&&x(t.prompt)},style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid #ccc"},children:u.map((e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)))})]}),(0,o.jsx)("div",{style:{fontSize:12,color:"#666",marginTop:4},children:u.find((e=>e.id===m))?.description||""})]}),(0,o.jsxs)("label",{style:{display:"block",marginTop:8},children:["Question (for image mode)",(0,o.jsx)("br",{}),(0,o.jsx)("textarea",{value:y,onChange:e=>{x(e.target.value),"custom"!==m&&g("custom")},rows:3,style:{width:"100%"}})]})]})]})]}),(0,o.jsxs)("div",{style:{marginTop:16},children:[(0,o.jsx)("h3",{children:"Response"}),(0,o.jsx)("div",{style:{whiteSpace:"pre-wrap",background:"#f8f9fa",color:"#212529",padding:16,borderRadius:8,maxHeight:400,overflow:"auto",border:"1px solid #dee2e6",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSize:"16px",lineHeight:1.5},children:b}),(0,o.jsx)("div",{style:{marginTop:8,textAlign:"right"},children:(0,o.jsx)("button",{onClick:()=>{window.lastFullResponse&&w(JSON.stringify(window.lastFullResponse,null,2))},style:{padding:"4px 8px",fontSize:12,background:"transparent",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",color:"#666"},children:"Show Raw JSON"})})]})]})}}}]);