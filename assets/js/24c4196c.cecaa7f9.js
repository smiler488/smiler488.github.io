"use strict";(self.webpackChunkliangchao_website=self.webpackChunkliangchao_website||[]).push([[4255],{5246:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var i=a(6540),r=a(4848);function n(){const{videoRef:e,ready:t,error:a}=function(){const e=(0,i.useRef)(null),[t,a]=(0,i.useState)(!1),[r,n]=(0,i.useState)(null);return(0,i.useEffect)((()=>{let t=null;return(async()=>{try{t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}),e.current&&(e.current.srcObject=t,await e.current.play(),a(!0))}catch(i){n(i?.message||String(i))}})(),()=>{t&&t.getTracks().forEach((e=>e.stop()))}}),[]),{videoRef:e,ready:t,error:r}}(),[n,s]=(0,i.useState)("proxy"),[o,d]=(0,i.useState)((()=>{if("undefined"!=typeof window){return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:3002/api/solve":"https://smiler488-github-nzz4erldm-smiler488s-projects.vercel.app/api/solve"}return"/api/solve"})),[l,c]=(0,i.useState)(""),[h,u]=(0,i.useState)(""),[p,g]=(0,i.useState)("Please analyze the problem in the image and provide a step-by-step solution."),[x,y]=(0,i.useState)("hunyuan-vision"),[m,f]=(0,i.useState)(""),[v,j]=(0,i.useState)(!1),[w,b]=(0,i.useState)(null),[S,C]=(0,i.useState)("camera"),[k,R]=(0,i.useState)("");async function T(e){if("direct"===n){if(!l||!h)throw new Error("Please enter SecretId and SecretKey");return void f("Direct mode is not implemented yet, please use proxy mode")}if(!o)throw new Error("Please provide the proxy URL");const t=await async function(e,t){return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}(o,e);if(!t.ok){const e=await t.text().catch((()=>""));throw new Error(`Request failed ${t.status}: ${e}`)}const a=await t.json().catch((async()=>({raw:await t.text()})));f(JSON.stringify(a,null,2))}async function E(e){const t={imageBase64:e,question:p,model:x};await T(t)}return(0,r.jsxs)("div",{style:{maxWidth:920,margin:"0 auto",padding:"24px"},children:[(0,r.jsx)("h1",{children:"AI Solver (Hunyuan)"}),(0,r.jsx)("p",{children:"Supports camera capture, screen capture, and text questions. For security, the page does not accept any keys."}),(0,r.jsxs)("div",{style:{display:"flex",gap:24,alignItems:"flex-start",flexWrap:"wrap"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("fieldset",{style:{border:"1px solid #ddd",borderRadius:8,padding:12,marginBottom:16},children:[(0,r.jsx)("legend",{children:"Input Mode"}),(0,r.jsxs)("label",{style:{display:"block",marginBottom:8},children:[(0,r.jsx)("input",{type:"radio",value:"camera",checked:"camera"===S,onChange:e=>C(e.target.value)}),(0,r.jsx)("span",{style:{marginLeft:8},children:" Camera Capture"})]}),(0,r.jsxs)("label",{style:{display:"block",marginBottom:8},children:[(0,r.jsx)("input",{type:"radio",value:"screenshot",checked:"screenshot"===S,onChange:e=>C(e.target.value)}),(0,r.jsx)("span",{style:{marginLeft:8},children:" Screen Capture"})]}),(0,r.jsxs)("label",{style:{display:"block"},children:[(0,r.jsx)("input",{type:"radio",value:"text",checked:"text"===S,onChange:e=>C(e.target.value)}),(0,r.jsx)("span",{style:{marginLeft:8},children:" Text Question"})]})]}),"camera"===S&&(0,r.jsxs)("div",{children:[(0,r.jsx)("video",{ref:e,autoPlay:!0,playsInline:!0,style:{width:320,background:"#000",borderRadius:8}}),(0,r.jsx)("div",{style:{marginTop:8,color:"#666"},children:t?"Camera ready":a?`Camera error: ${a}`:"Requesting camera permission\u2026"}),(0,r.jsx)("button",{onClick:async function(){if(e.current){f(""),j(!0);try{const t=await async function(e,t=1280,a=.85){const i=e.videoWidth||1080,r=e.videoHeight||1440,n=Math.min(1,t/Math.max(i,r)),s=document.createElement("canvas");return s.width=Math.round(i*n),s.height=Math.round(r*n),s.getContext("2d").drawImage(e,0,0,s.width,s.height),await new Promise((e=>s.toBlob((t=>e(t)),"image/jpeg",a)))}(e.current);b(Math.round(t.size/1024));const a=await new Promise((e=>{const a=new FileReader;a.onload=()=>e(a.result),a.readAsDataURL(t)})),i=String(a).split(",")[1];await E(i)}catch(t){f("Error: "+(t?.message||String(t)))}finally{j(!1)}}},disabled:!t||v,style:{marginTop:12,padding:"8px 16px",fontSize:14},children:v?"Processing\u2026":" Capture and Solve"})]}),"screenshot"===S&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{width:320,height:240,background:"#f5f5f5",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",border:"2px dashed #ccc"},children:(0,r.jsxs)("div",{style:{textAlign:"center",color:"#666"},children:[(0,r.jsx)("div",{style:{fontSize:48,marginBottom:8},children:" "}),(0,r.jsx)("div",{children:"Click the button below to start screenshot"})]})}),(0,r.jsx)("div",{style:{marginTop:8,color:"#666"},children:"Screenshot mode: the entire screen will be captured"}),(0,r.jsx)("button",{onClick:async function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia){f(""),j(!0);try{const e=await navigator.mediaDevices.getDisplayMedia({video:{mediaSource:"screen"},audio:!1}),t=document.createElement("video");t.srcObject=e,t.play(),await new Promise((e=>{t.onloadedmetadata=e}));const a=document.createElement("canvas");a.width=t.videoWidth,a.height=t.videoHeight;a.getContext("2d").drawImage(t,0,0),e.getTracks().forEach((e=>e.stop()));const i=await new Promise((e=>a.toBlob((t=>e(t)),"image/jpeg",.85)));b(Math.round(i.size/1024));const r=await new Promise((e=>{const t=new FileReader;t.onload=()=>e(t.result),t.readAsDataURL(i)})),n=String(r).split(",")[1];await E(n)}catch(e){"NotAllowedError"===e.name?f("Error: The user canceled screen sharing permission"):f("Error: "+(e?.message||String(e)))}finally{j(!1)}}else f("Error: The browser does not support screen capture")},disabled:v,style:{marginTop:12,padding:"8px 16px",fontSize:14},children:v?"Processing\u2026":" Capture Screen and Solve"})]}),"text"===S&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{width:320,minHeight:240,background:"#f9f9f9",borderRadius:8,padding:16,border:"1px solid #ddd"},children:[(0,r.jsx)("div",{style:{marginBottom:12,color:"#666",fontSize:14},children:" Text Question Mode"}),(0,r.jsx)("textarea",{value:k,onChange:e=>R(e.target.value),placeholder:"Please enter your question, for example:\n\u2022 Explain the basic principles of quantum mechanics\n\u2022 Write a Python sorting algorithm\n\u2022 What is 1+1?",style:{width:"100%",height:160,border:"1px solid #ccc",borderRadius:4,padding:8,fontSize:14,resize:"vertical",fontFamily:"inherit"}})]}),(0,r.jsx)("div",{style:{marginTop:8,color:"#666"},children:"Enter your question directly and the AI will provide a detailed answer"}),(0,r.jsx)("button",{onClick:async function(){if(k.trim()){f(""),j(!0);try{await async function(e){const t={question:e,model:"hunyuan-lite"};await T(t)}(k.trim())}catch(e){f("Error: "+(e?.message||String(e)))}finally{j(!1)}}else f("Please enter your question")},disabled:v||!k.trim(),style:{marginTop:12,padding:"8px 16px",fontSize:14},children:v?"Thinking\u2026":" Ask and Get Answer"})]}),null!=w&&(0,r.jsxs)("div",{style:{marginTop:6,fontSize:12,color:"#999"},children:["Last image size: ",w," KB"]})]}),(0,r.jsxs)("div",{style:{flex:1,minWidth:280},children:[(0,r.jsxs)("fieldset",{style:{border:"1px solid #ddd",borderRadius:8,padding:12,marginBottom:16},children:[(0,r.jsx)("legend",{children:"Connection Mode"}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"radio",value:"proxy",checked:"proxy"===n,onChange:e=>s(e.target.value)}),"Proxy Mode (Recommended)"]}),(0,r.jsxs)("label",{style:{marginLeft:16},children:[(0,r.jsx)("input",{type:"radio",value:"direct",checked:"direct"===n,onChange:e=>s(e.target.value)}),"Direct Mode (Testing)"]})]}),"proxy"===n?(0,r.jsxs)("fieldset",{style:{border:"1px solid #d7e3ff",borderRadius:8,padding:12,marginBottom:16,background:"#f7faff"},children:[(0,r.jsx)("legend",{children:"Proxy Settings"}),(0,r.jsxs)("label",{children:["Proxy URL",(0,r.jsx)("br",{}),(0,r.jsx)("input",{value:o,onChange:e=>d(e.target.value),placeholder:"http://localhost:3002/api/solve",style:{width:"100%"}})]}),(0,r.jsx)("div",{style:{color:"#345",fontSize:12,marginTop:8},children:"Configure in .env.local: HUNYUAN_SECRET_ID, HUNYUAN_SECRET_KEY, HUNYUAN_VERSION"})]}):(0,r.jsxs)("fieldset",{style:{border:"1px solid #ffe7d7",borderRadius:8,padding:12,marginBottom:16,background:"#fff7f0"},children:[(0,r.jsx)("legend",{children:"Direct Settings (Testing only)"}),(0,r.jsxs)("label",{children:["Secret ID",(0,r.jsx)("br",{}),(0,r.jsx)("input",{value:l,onChange:e=>c(e.target.value),placeholder:"AKIDxxxxx",style:{width:"100%"}})]}),(0,r.jsxs)("label",{style:{display:"block",marginTop:8},children:["Secret Key",(0,r.jsx)("br",{}),(0,r.jsx)("input",{type:"password",value:h,onChange:e=>u(e.target.value),placeholder:"Secret Key",style:{width:"100%"}})]}),(0,r.jsx)("div",{style:{color:"#d63031",fontSize:12,marginTop:8},children:"Direct mode exposes the key, for local testing only!"})]}),(0,r.jsxs)("fieldset",{style:{border:"1px solid #ddd",borderRadius:8,padding:12},children:[(0,r.jsx)("legend",{children:"Request Parameters"}),(0,r.jsxs)("label",{children:["Model",(0,r.jsx)("br",{}),(0,r.jsx)("input",{value:x,onChange:e=>y(e.target.value),style:{width:"100%"}})]}),(0,r.jsxs)("label",{style:{display:"block",marginTop:8},children:["Question (for image mode)",(0,r.jsx)("br",{}),(0,r.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),rows:3,style:{width:"100%"}})]})]})]})]}),(0,r.jsxs)("div",{style:{marginTop:16},children:[(0,r.jsx)("h3",{children:"Response"}),(0,r.jsx)("pre",{style:{whiteSpace:"pre-wrap",background:"#111",color:"#0f0",padding:12,borderRadius:8,maxHeight:360,overflow:"auto"},children:m})]})]})}}}]);