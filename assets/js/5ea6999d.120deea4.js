"use strict";(self.webpackChunkliangchao_website=self.webpackChunkliangchao_website||[]).push([[2597],{7513:(e,t,o)=>{o.r(t),o.d(t,{default:()=>c});var a=o(96540),i=o(96995),n=o(62835);const r={container:"container_wUH2",header:"header_iLj_",title:"title_Wnus",description:"description__Ii2",permissionCard:"permissionCard_mil6",permissionContent:"permissionContent_AMzv",muted:"muted_ROH5",errorBox:"errorBox_XKLJ",controls:"controls_hI3N",input:"input_kXpX",button:"button_v__J",buttonPrimary:"buttonPrimary_e9gb",buttonSecondary:"buttonSecondary_eaN5",grid:"grid_W4Os",card:"card_p_BT",cardTitle:"cardTitle_Ds03",row:"row_oeHv",tableWrapper:"tableWrapper_PAXV",table:"table_C5NQ",thead:"thead_W1YX",th:"th_kE5T",tr:"tr_Xvem",td:"td_VTzC",formulaBox:"formulaBox_Xn0p",formulaHeader:"formulaHeader_lLwV",formulaTitle:"formulaTitle_PwAb",formulaContent:"formulaContent_GinN",codeBlock:"codeBlock_E3JS"};var s=o(74848);function l(e){return new Promise((t=>{if(!("geolocation"in navigator))return e&&e(new Error("Geolocation is not supported on this device or browser.")),void t({latitude:null,longitude:null,altitude:null});navigator.geolocation.getCurrentPosition((e=>{const{latitude:o,longitude:a,altitude:i}=e.coords||{};t({latitude:"number"==typeof o?o:null,longitude:"number"==typeof a?a:null,altitude:"number"==typeof i?i:null})}),(o=>{e&&e(o),t({latitude:null,longitude:null,altitude:null})}),{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})}))}function d(e,t=6){if(null==e||Number.isNaN(e))return"";const o=Number(e);return Number.isFinite(o)?o.toFixed(t):""}function c(){const e=function(){const[e,t]=(0,a.useState)({alpha:0,beta:0,gamma:0}),o=(0,a.useRef)(null);return(0,a.useEffect)((()=>(o.current=e=>{t({alpha:"number"==typeof e.alpha?e.alpha:0,beta:"number"==typeof e.beta?e.beta:0,gamma:"number"==typeof e.gamma?e.gamma:0})},window.addEventListener("deviceorientation",o.current),()=>{o.current&&window.removeEventListener("deviceorientation",o.current)})),[]),e}(),[t,o]=(0,a.useState)(""),[c,u]=(0,a.useState)(null),[m,h]=(0,a.useState)({latitude:null,longitude:null,altitude:null}),[p,g]=(0,a.useState)([]),[f,x]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null);function y(e){if(!e)return void v("Unable to access location. Your browser or device may have blocked geolocation for this site.");let t="Unable to access location. ";"number"==typeof e.code?1===e.code?t+="Permission was denied. Please allow location access for this site in your browser settings and try again.":2===e.code?t+="Position is unavailable. Please check GPS or network connectivity.":3===e.code?t+="The location request timed out. Please try again.":t+="Your browser or device may have blocked geolocation.":t+="Your browser or device may have blocked geolocation.",v(t)}async function j(){if(v(null),"undefined"!=typeof window){if(!(void 0!==window.DeviceMotionEvent||void 0!==window.DeviceOrientationEvent))return u("denied"),v("This device or browser does not provide motion sensors. Orientation data may not be available. Try using a mobile phone with gyroscope/accelerometer."),!1}return await async function(){try{let e=!1,t=!1;return"undefined"!=typeof DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission&&(e=!0,"granted"===await DeviceMotionEvent.requestPermission()&&(t=!0)),"undefined"!=typeof DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission&&(e=!0,"granted"===await DeviceOrientationEvent.requestPermission()&&(t=!0)),!e||t}catch(e){return console.error("Motion permission request failed:",e),!1}}()?(u("granted"),!0):(u("denied"),v("Motion permission was denied or is not available. Please enable motion/orientation access for this site in your browser settings and try again."),!1)}return(0,s.jsx)(i.A,{title:"Sensor App",children:(0,s.jsxs)("div",{className:r.container,children:[(0,s.jsxs)("div",{className:r.header,children:[(0,s.jsx)("h1",{className:r.title,children:"Device Sensor Recorder"}),(0,s.jsx)("a",{className:"button button--secondary",href:"/docs/tutorial-apps/sensor-app-tutorial",children:"Tutorial"})]}),(0,s.jsx)("p",{className:r.description,children:"Enter leaf ID, then click \u201cCapture Sample\u201d to record device orientation (alpha/beta/gamma), time, latitude/longitude/altitude, and computed solar elevation/azimuth. Export all data as CSV."}),(0,s.jsx)("div",{className:r.permissionCard,children:(0,s.jsxs)("div",{className:r.permissionContent,children:[(0,s.jsx)("span",{className:r.muted,children:"Before using sensors, allow motion/orientation and location access on your device."}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{onClick:async function(){if(v(null),!await j())return;const e=await l(y);h(e)},className:"button button--secondary",children:"Enable Sensors"})})]})}),b&&(0,s.jsx)("div",{className:r.errorBox,children:b}),(0,s.jsxs)("div",{className:r.controls,children:[(0,s.jsx)("input",{type:"text",placeholder:"Enter leaf ID",value:t,onChange:e=>o(e.target.value),className:r.input}),(0,s.jsx)("button",{onClick:async function(){if(!f){x(!0),v(null);try{if(!await j())return void x(!1);const o=await l(y);h(o);const a=new Date,{elevation:i,azimuth:n}=function(e,t,o){if("number"!=typeof e||"number"!=typeof t)return{elevation:null,azimuth:null};const a=Math.PI/180,i=180/Math.PI,n=new Date(o.getTime()+6e4*o.getTimezoneOffset()),r=new Date(Date.UTC(n.getUTCFullYear(),0,1)),s=Math.floor((n-r)/864e5)+1,l=2*Math.PI*(s-81)/364,d=9.87*Math.sin(2*l)-7.53*Math.cos(l)-1.5*Math.sin(l),c=e*a,u=23.45*Math.sin(2*Math.PI/365*(284+s))*a,m=15*((60*o.getHours()+o.getMinutes()+o.getSeconds()/60+4*t+d- -o.getTimezoneOffset()/60*60)/60-12)*a,h=Math.sin(c)*Math.sin(u)+Math.cos(c)*Math.cos(u)*Math.cos(m);return{elevation:Math.asin(Math.max(-1,Math.min(1,h)))*i,azimuth:(Math.atan2(Math.sin(m),Math.cos(m)*Math.sin(c)-Math.tan(u)*Math.cos(c))*i+180+360)%360}}(o.latitude,o.longitude,a),r={leafId:t||"",timestamp:a.toISOString(),latitude:o.latitude,longitude:o.longitude,altitude:o.altitude,alpha:e.alpha,beta:e.beta,gamma:e.gamma,sunElevationDeg:i,sunAzimuthDeg:n};g((e=>[...e,r]))}catch(o){v(o?.message||String(o))}finally{x(!1)}}},disabled:f,className:`${r.button} ${r.buttonPrimary}`,children:f?"Capturing\u2026":"Capture Sample"}),(0,s.jsx)("button",{onClick:function(){if(!p.length)return;const e=e=>{if(null==e)return"";const t=String(e);return t.includes(",")||t.includes('"')||t.includes("\n")?'"'+t.replace(/"/g,'""')+'"':t},t=[["leafId","timestamp","latitude","longitude","altitude","alpha_deg","beta_deg","gamma_deg","sunElevation_deg","sunAzimuth_deg"].join(","),...p.map((t=>[t.leafId,t.timestamp,d(t.latitude),d(t.longitude),d(t.altitude,2),d(t.alpha,6),d(t.beta,6),d(t.gamma,6),null==t.sunElevationDeg?"":Number(t.sunElevationDeg).toFixed(6),null==t.sunAzimuthDeg?"":Number(t.sunAzimuthDeg).toFixed(6)].map(e).join(",")))].join("\n"),o=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(o),i=document.createElement("a"),n=(new Date).toISOString().replace(/[:.]/g,"-");i.href=a,i.download=`sensor_leaf_data_${n}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)},disabled:!p.length,className:`${r.button} ${r.buttonPrimary}`,children:"Export CSV"})]}),(0,s.jsxs)("div",{className:r.grid,children:[(0,s.jsxs)("div",{className:r.card,children:[(0,s.jsx)("h3",{className:r.cardTitle,children:"Current Orientation"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:r.row,children:[(0,s.jsx)("span",{children:"Alpha (Z, yaw):"}),(0,s.jsxs)("strong",{children:[d(e.alpha,2),"\xb0"]})]}),(0,s.jsxs)("div",{className:r.row,children:[(0,s.jsx)("span",{children:"Beta (X, pitch):"}),(0,s.jsxs)("strong",{children:[d(e.beta,2),"\xb0"]})]}),(0,s.jsxs)("div",{className:r.row,children:[(0,s.jsx)("span",{children:"Gamma (Y, roll):"}),(0,s.jsxs)("strong",{children:[d(e.gamma,2),"\xb0"]})]}),(0,s.jsx)("button",{onClick:async()=>{await j()||v("Please allow motion/orientation access in browser settings.")},className:`${r.button} ${r.buttonPrimary}`,style:{marginTop:8,width:"100%"},children:"granted"===c?"Motion Permission Granted":"Enable Motion Permission"})]})]}),(0,s.jsxs)("div",{className:r.card,children:[(0,s.jsx)("h3",{className:r.cardTitle,children:"Latest Geo"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:r.row,children:[(0,s.jsx)("span",{children:"Latitude:"}),(0,s.jsx)("strong",{children:d(m.latitude,6)||"N/A"})]}),(0,s.jsxs)("div",{className:r.row,children:[(0,s.jsx)("span",{children:"Longitude:"}),(0,s.jsx)("strong",{children:d(m.longitude,6)||"N/A"})]}),(0,s.jsxs)("div",{className:r.row,children:[(0,s.jsx)("span",{children:"Altitude:"}),(0,s.jsx)("strong",{children:null==m.altitude?"N/A":d(m.altitude,2)+" m"})]}),(0,s.jsx)("button",{onClick:async()=>h(await l(y)),className:`${r.button} ${r.buttonPrimary}`,style:{marginTop:8,width:"100%"},children:"Refresh Location"})]})]}),(0,s.jsxs)("div",{className:r.card,children:[(0,s.jsx)("h3",{className:r.cardTitle,children:"Status"}),(0,s.jsxs)("div",{children:["Recorded rows: ",(0,s.jsx)("strong",{children:p.length})]}),(0,s.jsxs)("div",{children:["Local time: ",(0,s.jsx)("strong",{children:(new Date).toLocaleString()})]})]})]}),(0,s.jsx)("div",{className:r.tableWrapper,children:(0,s.jsxs)("table",{className:r.table,children:[(0,s.jsx)("thead",{className:r.thead,children:(0,s.jsx)("tr",{children:["leafId","timestamp","latitude","longitude","altitude","alpha_deg","beta_deg","gamma_deg","sunElevation_deg","sunAzimuth_deg"].map((e=>(0,s.jsx)("th",{className:r.th,children:e},e)))})}),(0,s.jsxs)("tbody",{children:[p.map(((e,t)=>(0,s.jsxs)("tr",{className:r.tr,children:[(0,s.jsx)("td",{className:r.td,children:e.leafId}),(0,s.jsx)("td",{className:r.td,children:e.timestamp}),(0,s.jsx)("td",{className:r.td,children:d(e.latitude,6)}),(0,s.jsx)("td",{className:r.td,children:d(e.longitude,6)}),(0,s.jsx)("td",{className:r.td,children:null==e.altitude?"":d(e.altitude,2)}),(0,s.jsx)("td",{className:r.td,children:d(e.alpha,6)}),(0,s.jsx)("td",{className:r.td,children:d(e.beta,6)}),(0,s.jsx)("td",{className:r.td,children:d(e.gamma,6)}),(0,s.jsx)("td",{className:r.td,children:null==e.sunElevationDeg?"":Number(e.sunElevationDeg).toFixed(6)}),(0,s.jsx)("td",{className:r.td,children:null==e.sunAzimuthDeg?"":Number(e.sunAzimuthDeg).toFixed(6)})]},t))),!p.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:10,style:{padding:12,color:"var(--ifm-color-emphasis-600)",textAlign:"center"},children:"No data yet. Enter ID and click \u201cCapture Sample\u201d."})})]})]})}),(0,s.jsxs)("div",{className:r.formulaBox,children:[(0,s.jsx)("div",{className:r.formulaHeader,children:(0,s.jsx)("h2",{className:r.formulaTitle,children:"Solar Angle Formulas"})}),(0,s.jsxs)("div",{className:r.formulaContent,children:[(0,s.jsx)("p",{style:{margin:"0 0 8px"},children:"Elevation (h) and Azimuth (A) computed in this app follow common remote-sensing approximations:"}),(0,s.jsxs)("div",{className:r.codeBlock,children:["h = asin( sin(\u03c6)\xb7sin(\u03b4) + cos(\u03c6)\xb7cos(\u03b4)\xb7cos(H) )  [in radians]","A = atan2( sin(H),  cos(H)\xb7sin(\u03c6) \u2212 tan(\u03b4)\xb7cos(\u03c6) )  [in radians]","(degrees) = (radians) \xd7 180/\u03c0","Azimuth A is reported from North, clockwise (0..360)."]}),(0,s.jsx)("p",{style:{margin:"0 0 6px"},children:(0,s.jsx)("strong",{children:"Symbols:"})}),(0,s.jsxs)("ul",{style:{margin:0,paddingLeft:18},children:[(0,s.jsx)("li",{children:"\u03c6: geographic latitude"}),(0,s.jsx)("li",{children:"\u03b4: solar declination"}),(0,s.jsx)("li",{children:"H: hour angle (H = 15\xb0 \xd7 (solar time \u2212 12))"})]}),(0,s.jsx)("p",{style:{margin:"8px 0 0",color:"#555"},children:"Note: The implementation also includes Equation of Time (EoT) and time-zone offset to estimate apparent solar time."})]})]}),(0,s.jsx)(n.A,{})]})})}},62835:(e,t,o)=>{o.d(t,{A:()=>u});var a=o(96540),i=o(74848);const n={maxWidth:"800px",margin:"60px auto 0",textAlign:"left",padding:"0 20px"},r={fontSize:"2rem",fontWeight:"600",marginBottom:"16px",color:"var(--ifm-color-emphasis-900)"},s={fontSize:"1.1rem",color:"var(--ifm-color-emphasis-700)",lineHeight:1.6,marginBottom:"16px"},l={borderLeft:"4px solid var(--ifm-border-color)",paddingLeft:"16px",color:"var(--ifm-color-emphasis-700)",fontStyle:"italic",lineHeight:1.6,marginBottom:"16px"},d={backgroundColor:"var(--ifm-background-surface-color)",padding:"16px",borderRadius:"12px",overflowX:"auto",border:"1px solid var(--ifm-border-color)",color:"var(--ifm-color-emphasis-800)"},c={fontSize:"1.5rem",fontWeight:"600",marginBottom:"16px",color:"var(--ifm-color-emphasis-900)"};function u({containerStyle:e}){const[t,o]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),h="LiangchaoDeng. (2025). smiler488/smiler488.github.io: Digital Plant Phenotyping Platform v25.0 (v25.0.0). Zenodo. https://doi.org/10.5281/zenodo.17544584",p="@software{Deng2025_DPPP_v25,\n  author       = {Deng, Liangchao},\n  title        = {Digital Plant Phenotyping Platform (v25.0)},\n  year         = {2025},\n  publisher    = {Zenodo},\n  doi          = {10.5281/zenodo.17544584},\n  url          = {https://doi.org/10.5281/zenodo.17544584},\n  note         = {[Computer software]}\n}";return(0,i.jsxs)("div",{style:{...n,...e},children:[(0,i.jsx)("h2",{style:r,children:"Citation"}),(0,i.jsxs)("p",{style:s,children:["If you use ",(0,i.jsx)("strong",{children:"Digital Plant Phenotyping Platform v25.0"})," or any of its applications in your research, please cite it as:"]}),(0,i.jsxs)("blockquote",{style:l,children:["LiangchaoDeng. (2025)."," ",(0,i.jsx)("em",{children:"smiler488/smiler488.github.io: Digital Plant Phenotyping Platform v25.0 (v25.0.0)"}),". Zenodo.",(0,i.jsx)("br",{}),(0,i.jsx)("a",{href:"https://doi.org/10.5281/zenodo.17544584",children:"https://doi.org/10.5281/zenodo.17544584"})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",gap:"12px"},children:[(0,i.jsx)("button",{type:"button",onClick:async()=>{try{if("undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(h);else if("undefined"!=typeof document){const e=document.createElement("textarea");e.value=h,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}o(!0),setTimeout((()=>o(!1)),2e3)}catch{o(!1)}},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid var(--ifm-color-emphasis-900)",backgroundColor:"var(--ifm-color-emphasis-900)",color:"var(--ifm-color-emphasis-0)",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"transform 0.15s ease, background-color 0.15s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-primary)",e.currentTarget.style.borderColor="var(--ifm-color-primary)",e.currentTarget.style.transform="translateY(-1px)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.borderColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.transform="translateY(0)"},children:t?"Copied!":"Copy citation"}),(0,i.jsx)("span",{style:{fontSize:"0.9rem",color:t?"var(--ifm-color-success)":"var(--ifm-color-emphasis-600)"},children:t?"Citation copied to clipboard.":"Click to copy APA citation."})]}),(0,i.jsx)("a",{href:"https://doi.org/10.5281/zenodo.17544584",style:{display:"inline-block",marginBottom:"24px"},children:(0,i.jsx)("img",{src:"https://img.shields.io/badge/DOI-10.5281%2Fzenodo.17544584-blue",alt:"DOI badge",style:{height:"28px"}})}),(0,i.jsx)("hr",{style:{border:"none",borderTop:"1px solid var(--ifm-border-color)",marginBottom:"24px"}}),(0,i.jsx)("h3",{style:c,children:"BibTeX citation (Zotero \u2192 File \u2192 Import from Clipboard)"}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",gap:"12px"},children:[(0,i.jsx)("button",{type:"button",onClick:async()=>{try{if("undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(p);else if("undefined"!=typeof document){const e=document.createElement("textarea");e.value=p,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}m(!0),setTimeout((()=>m(!1)),2e3)}catch{m(!1)}},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid var(--ifm-color-emphasis-900)",backgroundColor:"var(--ifm-color-emphasis-900)",color:"var(--ifm-color-emphasis-0)",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"transform 0.15s ease, background-color 0.15s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-primary)",e.currentTarget.style.borderColor="var(--ifm-color-primary)",e.currentTarget.style.transform="translateY(-1px)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.borderColor="var(--ifm-color-emphasis-900)",e.currentTarget.style.transform="translateY(0)"},children:u?"Copied!":"Copy BibTeX"}),(0,i.jsx)("span",{style:{fontSize:"0.9rem",color:u?"var(--ifm-color-success)":"var(--ifm-color-emphasis-600)"},children:u?"BibTeX copied to clipboard. Switch to Zotero and choose Import from Clipboard.":"Click to copy BibTeX to clipboard for Zotero import."})]}),(0,i.jsx)("pre",{style:d,children:(0,i.jsx)("code",{children:p})})]})}}}]);