"use strict";(self.webpackChunkliangchao_website=self.webpackChunkliangchao_website||[]).push([[4737],{17921:(e,t,o)=>{function n(){const e="undefined"!=typeof window?window.localStorage.getItem("app_users"):null;if(!e)return[];try{return JSON.parse(e)||[]}catch{return[]}}function r(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}async function i(e,t){const o=(new TextEncoder).encode(e),n=function(e){const t=new Uint8Array(e.length/2);for(let o=0;o<t.length;o++)t[o]=parseInt(e.substr(2*o,2),16);return t.buffer}(t),i=await crypto.subtle.importKey("raw",o,"PBKDF2",!1,["deriveBits"]);return r(await crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:15e4,hash:"SHA-256"},i,256))}async function a(e,t){const o=n();if(o.find((t=>t.email.toLowerCase()===String(e).toLowerCase())))throw new Error("Email already registered");const a=r(crypto.getRandomValues(new Uint8Array(16)).buffer),s=await i(t,a);return o.push({email:e,saltHex:a,hashHex:s,createdAt:(new Date).toISOString()}),function(e){"undefined"!=typeof window&&window.localStorage.setItem("app_users",JSON.stringify(e))}(o),d({email:e}),{email:e}}async function s(e,t){const o=n().find((t=>t.email.toLowerCase()===String(e).toLowerCase()));if(!o)throw new Error("Account not found");if(await i(t,o.saltHex)!==o.hashHex)throw new Error("Invalid credentials");return d({email:e}),{email:e}}function l(){if("undefined"==typeof window)return null;const e=window.localStorage.getItem("app_session");if(!e)return null;try{return JSON.parse(e)||null}catch{return null}}function d(e){"undefined"!=typeof window&&window.localStorage.setItem("app_session",JSON.stringify({email:e.email,at:Date.now()}))}function c(){"undefined"!=typeof window&&window.localStorage.removeItem("app_session")}o.d(t,{Ht:()=>l,iD:()=>s,kz:()=>a,ri:()=>c})},30125:(e,t,o)=>{o.r(t),o.d(t,{default:()=>p});var n=o(96540),r=o(63018),i=o(34619),a=o(62835),s=o(74848);const l=6378137,d=e=>e*Math.PI/180;const c={page:{padding:"3rem 1rem",background:"linear-gradient(180deg, #f8fafc 0%, #eef2ff 100%)",minHeight:"100vh"},card:{backgroundColor:"#ffffff",borderRadius:"20px",padding:"2.5rem",maxWidth:"1100px",margin:"0 auto",boxShadow:"0 40px 80px rgba(15, 23, 42, 0.08)",border:"1px solid rgba(99, 102, 241, 0.15)"},sectionTitle:{margin:0,fontSize:"2rem",fontWeight:700,color:"#111827"},sectionLead:{marginTop:"0.75rem",marginBottom:"1.5rem",color:"#4b5563",lineHeight:1.7},form:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",alignItems:"end",marginBottom:"1.5rem"},formGroup:{display:"flex",flexDirection:"column",gap:"0.35rem"},label:{fontWeight:600,fontSize:"0.95rem",color:"#1f2937"},input:{borderRadius:"10px",border:"1px solid rgba(99, 102, 241, 0.4)",padding:"0.65rem 0.9rem",fontSize:"0.95rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem"},panel:{border:"1px solid rgba(15, 23, 42, 0.08)",borderRadius:"16px",padding:"1.5rem",background:"rgba(249, 250, 251, 0.95)"},panelHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",color:"#475569",fontSize:"0.92rem"},previewCanvas:{borderRadius:"14px",border:"1px dashed rgba(148, 163, 184, 0.7)",background:"linear-gradient(135deg, rgba(99, 102, 241, 0.08), rgba(16, 185, 129, 0.08))",padding:"0.5rem",minHeight:"280px",display:"flex",alignItems:"center",justifyContent:"center"},list:{listStyle:"none",margin:0,padding:0,display:"flex",flexDirection:"column",gap:"1rem"},listItem:{display:"flex",justifyContent:"space-between",gap:"1rem",border:"1px solid rgba(148, 163, 184, 0.6)",borderRadius:"12px",padding:"1rem"},areaCard:{marginTop:"1rem",padding:"1rem",borderRadius:"12px",background:"rgba(22, 163, 74, 0.08)",border:"1px solid rgba(22, 163, 74, 0.4)",color:"#15803d"},feedback:{marginBottom:"1.5rem",padding:"0.85rem 1rem",borderRadius:"10px",fontWeight:600},feedbackOk:{background:"rgba(16, 185, 129, 0.12)",border:"1px solid rgba(16, 185, 129, 0.4)",color:"#047857"},feedbackError:{background:"rgba(248, 113, 113, 0.12)",border:"1px solid rgba(248, 113, 113, 0.5)",color:"#b91c1c"}};function u(){const[e,t]=(0,n.useState)([]),[o,r]=(0,n.useState)(""),[u,p]=(0,n.useState)(""),[g,m]=(0,n.useState)(""),[f,h]=(0,n.useState)(""),[y,b]=(0,n.useState)(!1),[x,w]=(0,n.useState)(!1),v="undefined"!=typeof window&&"geolocation"in navigator;(0,n.useEffect)((()=>{if(v&&"undefined"!=typeof navigator&&void 0!==navigator.permissions)try{navigator.permissions.query({name:"geolocation"}).then((e=>{"denied"===e.state&&h("Location permission is currently denied for this site. Please enable location access in your browser or system settings, then try again.")})).catch((()=>{}))}catch{}}),[v]);const j=(0,n.useCallback)(((e,o,n="Manual entry")=>{t((t=>[...t,{id:`${Date.now()}-${Math.random()}`,lat:e,lng:o,source:n}])),r(""),p(""),h(""),m(`Added ${n} point`),b(!1)}),[]),_=()=>{v?(w(!0),m("Fetching location..."),navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:o,accuracy:n}=e.coords;j(t,o,n?`Device GPS \xb1${Math.round(n)}m`:"Device GPS"),w(!1)}),(e=>{(e=>{if(!e)return void h("Unable to access location. Your browser or device may have blocked geolocation for this site.");let t="Unable to access location. ";"number"==typeof e.code?1===e.code?t+="Permission was denied. Please allow location access for this site in your browser settings and try again.":2===e.code?t+="Position is unavailable. Please check GPS or network connectivity.":3===e.code?t+="The location request timed out. Please try again.":t+="Your browser or device may have blocked geolocation.":e.message?t+=e.message:t+="Your browser or device may have blocked geolocation.",h(t)})(e),w(!1)}),{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})):h("Geolocation is not supported in this browser, or it may be disabled. Please use a modern mobile browser and ensure location is enabled.")},P=(0,n.useMemo)((()=>{if(!e.length)return[];const t=e.map((e=>e.lat)),o=e.map((e=>e.lng)),n=Math.min(...t),r=Math.max(...t),i=Math.min(...o),a=Math.max(...o),s=Math.max(1e-5,r-n),l=Math.max(1e-5,a-i);return e.map((e=>({x:(e.lng-i)/l*100,y:100-(e.lat-n)/s*100})))}),[e]),C=P.map((e=>`${e.x},${e.y}`)).join(" "),S=(0,n.useMemo)((()=>y?function(e){if(e.length<3)return 0;const t=e.reduce(((e,t)=>e+t.lat),0)/e.length,o=e.reduce(((e,t)=>e+t.lng),0)/e.length,n=d(t),r=d(o),i=e.map((e=>{const t=d(e.lat),o=d(e.lng);return{x:l*(o-r)*Math.cos(n),y:l*(t-n)}}));let a=0;for(let s=0;s<i.length;s+=1){const e=(s+1)%i.length;a+=i[s].x*i[e].y-i[e].x*i[s].y}return Math.abs(a)/2}(e):0),[y,e]),k=S/1e4,A=S/666.6667,T=g&&!f?{...c.feedback,...c.feedbackOk}:f?{...c.feedback,...c.feedbackError}:null;return(0,s.jsxs)("div",{style:c.page,children:[(0,s.jsxs)("div",{style:c.card,children:[(0,s.jsxs)("header",{className:"app-header",children:[(0,s.jsx)("h1",{className:"app-title",children:"Land Surveyor \xb7 GPS Area Tool"}),(0,s.jsx)("a",{className:"button button--secondary",href:"/docs/tutorial-apps/land-surveyor-tutorial",children:"Tutorial"})]}),(0,s.jsx)(i.A,{}),(0,s.jsx)("p",{style:c.sectionLead,children:"Record parcel vertices sequentially via manual coordinates or phone GPS. The tool draws each segment in real time, and once closed it calculates the polygon area in square meters, hectares, and mu."}),(0,s.jsx)("div",{className:"app-card",style:{marginBottom:"12px"},children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[(0,s.jsx)("span",{className:"app-muted",children:"Before using, please allow device location access."}),(0,s.jsx)("button",{type:"button",className:"button button--secondary",onClick:_,disabled:"undefined"!=typeof window&&!window.__APP_AUTH_OK__,children:"Enable Location Permission"})]})}),(0,s.jsxs)("form",{style:c.form,onSubmit:e=>{e.preventDefault();const t=parseFloat(o),n=parseFloat(u);Number.isNaN(t)||Number.isNaN(n)?h("Please enter valid decimal latitude and longitude."):t>90||t<-90||n>180||n<-180?h("Latitude must be within -90 to 90 and longitude within -180 to 180."):j(t,n)},children:[(0,s.jsxs)("div",{style:c.formGroup,children:[(0,s.jsx)("label",{htmlFor:"latInput",style:c.label,children:"Latitude (Lat)"}),(0,s.jsx)("input",{id:"latInput",type:"number",step:"0.000001",placeholder:"e.g. 34.266889",value:o,onChange:e=>r(e.target.value),style:c.input})]}),(0,s.jsxs)("div",{style:c.formGroup,children:[(0,s.jsx)("label",{htmlFor:"lngInput",style:c.label,children:"Longitude (Lng)"}),(0,s.jsx)("input",{id:"lngInput",type:"number",step:"0.000001",placeholder:"e.g. 108.942233",value:u,onChange:e=>p(e.target.value),style:c.input})]}),(0,s.jsx)("button",{type:"submit",className:"button button--primary",disabled:"undefined"!=typeof window&&!window.__APP_AUTH_OK__,children:"Add Point"}),(0,s.jsx)("button",{type:"button",className:"button button--secondary",onClick:_,disabled:!v||x||"undefined"!=typeof window&&!window.__APP_AUTH_OK__,children:x?"Locating...":"Use Device Location"}),(0,s.jsx)("button",{type:"button",className:"button button--secondary",onClick:()=>{e.length<3?h("You need at least 3 points to close the polygon."):(b(!0),m("Polygon closed. Area is available below."))},disabled:"undefined"!=typeof window&&!window.__APP_AUTH_OK__,children:"Close Polygon"}),(0,s.jsx)("button",{type:"button",className:"button button--outline",onClick:()=>{t([]),b(!1),r(""),p(""),m(""),h("")},disabled:"undefined"!=typeof window&&!window.__APP_AUTH_OK__,children:"Reset"})]}),(g||f)&&(0,s.jsx)("div",{style:T,children:f||g}),(0,s.jsxs)("div",{style:c.grid,children:[(0,s.jsxs)("div",{style:c.panel,children:[(0,s.jsxs)("div",{style:c.panelHeader,children:[(0,s.jsx)("strong",{children:"Live Polyline Preview"}),(0,s.jsx)("span",{children:e.length?`Captured ${e.length} point${1===e.length?"":"s"}`:"Awaiting coordinates..."})]}),(0,s.jsx)("div",{style:c.previewCanvas,children:P.length?(0,s.jsxs)("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid meet",style:{width:"100%",height:"260px"},children:[P.map(((t,o)=>(0,s.jsx)("circle",{cx:t.x,cy:t.y,r:"1.8",fill:"#0ea5e9",stroke:"#0f172a",strokeWidth:"0.3",children:(0,s.jsx)("title",{children:`Point ${o+1}: ${e[o].lat.toFixed(6)}, ${e[o].lng.toFixed(6)}`})},`${t.x}-${t.y}-${o}`))),P.length>=2&&(y?(0,s.jsx)("polygon",{points:C,fill:"rgba(67, 160, 71, 0.28)",stroke:"#4caf50",strokeWidth:"0.6"}):(0,s.jsx)("polyline",{points:C,fill:"none",stroke:"#4caf50",strokeWidth:"0.6"}))]}):(0,s.jsx)("p",{children:"Add at least two points to preview the live polyline."})}),y&&(0,s.jsxs)("div",{style:c.areaCard,children:[(0,s.jsx)("p",{style:{margin:0},children:"Area estimate:"}),(0,s.jsxs)("strong",{style:{fontSize:"1.4rem"},children:[S.toFixed(2)," m\xb2"]}),(0,s.jsxs)("span",{children:["\u2248 ",k.toFixed(4)," ha \xb7 ",A.toFixed(2)," mu"]})]})]}),(0,s.jsxs)("div",{style:c.panel,children:[(0,s.jsxs)("div",{style:c.panelHeader,children:[(0,s.jsx)("strong",{children:"Coordinate List"}),e.length>=3&&!y&&(0,s.jsx)("span",{children:'Click "Close Polygon" to compute area.'})]}),e.length?(0,s.jsx)("ol",{style:c.list,children:e.map(((e,o)=>(0,s.jsxs)("li",{style:c.listItem,children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("strong",{children:["Point ",o+1]}),(0,s.jsxs)("p",{style:{margin:"0.2rem 0",color:"#334155"},children:["Latitude: ",e.lat.toFixed(6)]}),(0,s.jsxs)("p",{style:{margin:"0.2rem 0",color:"#334155"},children:["Longitude: ",e.lng.toFixed(6)]}),(0,s.jsxs)("p",{style:{margin:"0.2rem 0",color:"#475569"},children:["Source: ",e.source]})]}),(0,s.jsx)("button",{type:"button",className:"button button--sm button--outline",onClick:()=>{return o=e.id,t((e=>e.filter((e=>e.id!==o)))),void b(!1);var o},children:"Delete"})]},e.id)))}):(0,s.jsx)("p",{style:{padding:"1rem",textAlign:"center",color:"#475569",background:"rgba(148, 163, 184, 0.1)",borderRadius:"10px"},children:"No coordinates yet. Add a point to get started."})]})]})]}),(0,s.jsx)(a.A,{})]})}function p(){return(0,s.jsx)(r.A,{title:"Land Surveyor",children:(0,s.jsx)(u,{})})}},34619:(e,t,o)=>{o.d(t,{A:()=>s});var n=o(96540),r=o(17921),i=o(95082),a=o(74848);function s({children:e}){const[t,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const e=(0,i.b)();if(e){e.auth.getUser().then((({data:e})=>{const t=!!e?.user;o(t),"undefined"!=typeof window&&(window.__APP_AUTH_OK__=t)}));const{data:t}=e.auth.onAuthStateChange(((e,t)=>{const n=!!t?.user;o(n),"undefined"!=typeof window&&(window.__APP_AUTH_OK__=n)}));return()=>t?.subscription?.unsubscribe?.()}const t=!!(0,r.Ht)();o(t),"undefined"!=typeof window&&(window.__APP_AUTH_OK__=t)}),[]),(0,a.jsxs)("div",{children:[!t&&(0,a.jsx)("div",{className:"app-card",style:{marginBottom:12},children:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsx)("span",{className:"app-muted",children:"Please login to use app features"}),(0,a.jsx)("a",{className:"button button--secondary",href:"/auth",children:"Login / Register"})]})}),e]})}},62835:(e,t,o)=>{o.d(t,{A:()=>u});var n=o(96540),r=o(74848);const i={maxWidth:"800px",margin:"60px auto 0",textAlign:"left",padding:"0 20px"},a={fontSize:"2rem",fontWeight:"600",marginBottom:"16px",color:"#000000"},s={fontSize:"1.1rem",color:"#333333",lineHeight:1.6,marginBottom:"16px"},l={borderLeft:"4px solid #cccccc",paddingLeft:"16px",color:"#333333",fontStyle:"italic",lineHeight:1.6,marginBottom:"16px"},d={backgroundColor:"#f6f6f7",padding:"16px",borderRadius:"12px",overflowX:"auto",border:"1px solid #e5e5e7"},c={fontSize:"1.5rem",fontWeight:"600",marginBottom:"16px",color:"#000000"};function u({containerStyle:e}){const[t,o]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),g="LiangchaoDeng. (2025). smiler488/smiler488.github.io: Digital Plant Phenotyping Platform v25.0 (v25.0.0). Zenodo. https://doi.org/10.5281/zenodo.17544584",m="@software{Deng2025_DPPP_v25,\n  author       = {Deng, Liangchao},\n  title        = {Digital Plant Phenotyping Platform (v25.0)},\n  year         = {2025},\n  publisher    = {Zenodo},\n  doi          = {10.5281/zenodo.17544584},\n  url          = {https://doi.org/10.5281/zenodo.17544584},\n  note         = {[Computer software]}\n}";return(0,r.jsxs)("div",{style:{...i,...e},children:[(0,r.jsx)("h2",{style:a,children:"Citation"}),(0,r.jsxs)("p",{style:s,children:["If you use ",(0,r.jsx)("strong",{children:"Digital Plant Phenotyping Platform v25.0"})," or any of its applications in your research, please cite it as:"]}),(0,r.jsxs)("blockquote",{style:l,children:["LiangchaoDeng. (2025)."," ",(0,r.jsx)("em",{children:"smiler488/smiler488.github.io: Digital Plant Phenotyping Platform v25.0 (v25.0.0)"}),". Zenodo.",(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"https://doi.org/10.5281/zenodo.17544584",children:"https://doi.org/10.5281/zenodo.17544584"})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",gap:"12px"},children:[(0,r.jsx)("button",{type:"button",onClick:async()=>{try{if("undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(g);else if("undefined"!=typeof document){const e=document.createElement("textarea");e.value=g,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}o(!0),setTimeout((()=>o(!1)),2e3)}catch{o(!1)}},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid #000000",backgroundColor:"#000000",color:"#ffffff",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"transform 0.15s ease, background-color 0.15s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#333333",e.currentTarget.style.transform="translateY(-1px)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#000000",e.currentTarget.style.transform="translateY(0)"},children:t?"Copied!":"Copy citation"}),(0,r.jsx)("span",{style:{fontSize:"0.9rem",color:t?"#007f5f":"#6c6c70"},children:t?"Citation copied to clipboard.":"Click to copy APA citation."})]}),(0,r.jsx)("a",{href:"https://doi.org/10.5281/zenodo.17544584",style:{display:"inline-block",marginBottom:"24px"},children:(0,r.jsx)("img",{src:"https://zenodo.org/badge/DOI/10.5281/zenodo.17544584.svg",alt:"DOI badge",style:{height:"32px"}})}),(0,r.jsx)("hr",{style:{border:"none",borderTop:"1px solid #e5e5e7",marginBottom:"24px"}}),(0,r.jsx)("h3",{style:c,children:"BibTeX citation (Zotero \u2192 File \u2192 Import from Clipboard)"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",gap:"12px"},children:[(0,r.jsx)("button",{type:"button",onClick:async()=>{try{if("undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(m);else if("undefined"!=typeof document){const e=document.createElement("textarea");e.value=m,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}p(!0),setTimeout((()=>p(!1)),2e3)}catch{p(!1)}},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid #000000",backgroundColor:"#000000",color:"#ffffff",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"transform 0.15s ease, background-color 0.15s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#333333",e.currentTarget.style.transform="translateY(-1px)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#000000",e.currentTarget.style.transform="translateY(0)"},children:u?"Copied!":"Copy BibTeX"}),(0,r.jsx)("span",{style:{fontSize:"0.9rem",color:u?"#007f5f":"#6c6c70"},children:u?"BibTeX copied to clipboard. Switch to Zotero and choose Import from Clipboard.":"Click to copy BibTeX to clipboard for Zotero import."})]}),(0,r.jsx)("pre",{style:d,children:(0,r.jsx)("code",{children:m})})]})}},95082:(e,t,o)=>{o.d(t,{b:()=>i});var n=o(51270);let r=null;function i(){if(r)return r;if("undefined"==typeof window)return null;const e=window.__SUPABASE_URL__,t=window.__SUPABASE_ANON_KEY__;return e&&t?(r=(0,n.UU)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0}}),r):null}}}]);