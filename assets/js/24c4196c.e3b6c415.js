"use strict";(self.webpackChunkliangchao_website=self.webpackChunkliangchao_website||[]).push([[4255],{5246:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});var r=i(6540),n=i(4848);function o(){const{videoRef:e,ready:t,error:i}=function(){const e=(0,r.useRef)(null),[t,i]=(0,r.useState)(!1),[n,o]=(0,r.useState)(null);return(0,r.useEffect)((()=>{let t=null;return(async()=>{try{t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}),e.current&&(e.current.srcObject=t,await e.current.play(),i(!0))}catch(r){o(r?.message||String(r))}})(),()=>{t&&t.getTracks().forEach((e=>e.stop()))}}),[]),{videoRef:e,ready:t,error:n}}(),[o,s]=(0,r.useState)("proxy"),[a,d]=(0,r.useState)((()=>{if("undefined"!=typeof window){return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:3002/api/solve":""}return""})),[l,c]=(0,r.useState)(""),[h,u]=(0,r.useState)(""),[p,g]=(0,r.useState)("Please analyze the problem in the image and provide a step-by-step solution."),[x,m]=(0,r.useState)("hunyuan-vision"),[y,f]=(0,r.useState)(""),[b,v]=(0,r.useState)(!1),[w,j]=(0,r.useState)(null),[S,k]=(0,r.useState)("camera"),[C,R]=(0,r.useState)(""),[E,T]=(0,r.useState)(null),[z,P]=(0,r.useState)(null),[M,D]=(0,r.useState)(!1);async function L(e){if("direct"!==o){if(!a||!a.trim())throw new Error("Please provide a valid proxy URL in the settings below");try{const t=await async function(e,t){return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}(a,e);if(!t.ok){const e=await t.text().catch((()=>""));throw new Error(`Request failed ${t.status}: ${e}`)}const i=await t.json().catch((async()=>({raw:await t.text()})));f(JSON.stringify(i,null,2))}catch(t){if("TypeError"===t.name&&t.message.includes("fetch"))throw new Error(`Network error: Cannot connect to ${a}. Please check the proxy URL or your network connection.`);throw t}}else{if(!l||!h)throw new Error("Please enter SecretId and SecretKey");f("Direct mode is not implemented yet, please use proxy mode")}}async function O(e){const t={imageBase64:e,question:p,model:x};await L(t)}function A(e,t){if(!E||!z)return;e.preventDefault(),e.stopPropagation();const i=e.currentTarget.getBoundingClientRect(),r=E.width/i.width,n=E.height/i.height,o=JSON.parse(JSON.stringify(z)),s=e.clientX,a=e.clientY,d={...o},l=e=>{e.preventDefault();const i=e.clientX-s,l=e.clientY-a,c=i*r,h=l*n;let u;if("move"===t){const e=Math.max(0,Math.min(E.width-o.width,o.x+c)),t=Math.max(0,Math.min(E.height-o.height,o.y+h));u={...o,x:e,y:t}}else if("resize"===t){const e=Math.max(50,Math.min(E.width-o.x,o.width+c)),t=Math.max(50,Math.min(E.height-o.y,o.height+h));u={...o,width:e,height:t}}Object.assign(d,u),P(u)},c=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",c),document.removeEventListener("mouseleave",c)};document.addEventListener("mousemove",l,{passive:!1}),document.addEventListener("mouseup",c),document.addEventListener("mouseleave",c)}return(0,n.jsxs)("div",{style:{maxWidth:920,margin:"0 auto",padding:"24px"},children:[(0,n.jsx)("h1",{children:"AI Solver (Hunyuan)"}),(0,n.jsx)("p",{children:"Supports camera capture, screen capture, and text questions. For security, the page does not accept any keys."}),(0,n.jsxs)("div",{style:{display:"flex",gap:24,alignItems:"flex-start",flexWrap:"wrap"},children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("fieldset",{style:{border:"1px solid #ddd",borderRadius:8,padding:12,marginBottom:16},children:[(0,n.jsx)("legend",{children:"Input Mode"}),(0,n.jsxs)("label",{style:{display:"block",marginBottom:8},children:[(0,n.jsx)("input",{type:"radio",value:"camera",checked:"camera"===S,onChange:e=>k(e.target.value)}),(0,n.jsx)("span",{style:{marginLeft:8},children:" Camera Capture"})]}),(0,n.jsxs)("label",{style:{display:"block",marginBottom:8},children:[(0,n.jsx)("input",{type:"radio",value:"screenshot",checked:"screenshot"===S,onChange:e=>k(e.target.value)}),(0,n.jsx)("span",{style:{marginLeft:8},children:" Screen Capture"})]}),(0,n.jsxs)("label",{style:{display:"block"},children:[(0,n.jsx)("input",{type:"radio",value:"text",checked:"text"===S,onChange:e=>k(e.target.value)}),(0,n.jsx)("span",{style:{marginLeft:8},children:" Text Question"})]})]}),"camera"===S&&(0,n.jsxs)("div",{children:[(0,n.jsx)("video",{ref:e,autoPlay:!0,playsInline:!0,style:{width:320,background:"#000",borderRadius:8}}),(0,n.jsx)("div",{style:{marginTop:8,color:"#666"},children:t?"Camera ready":i?`Camera error: ${i}`:"Requesting camera permission\u2026"}),(0,n.jsx)("button",{onClick:async function(){if(e.current){f(""),v(!0);try{const t=await async function(e,t=1280,i=.85){const r=e.videoWidth||1080,n=e.videoHeight||1440,o=Math.min(1,t/Math.max(r,n)),s=document.createElement("canvas");return s.width=Math.round(r*o),s.height=Math.round(n*o),s.getContext("2d").drawImage(e,0,0,s.width,s.height),await new Promise((e=>s.toBlob((t=>e(t)),"image/jpeg",i)))}(e.current);j(Math.round(t.size/1024));const i=await new Promise((e=>{const i=new FileReader;i.onload=()=>e(i.result),i.readAsDataURL(t)})),r=String(i).split(",")[1];await O(r)}catch(t){f("Error: "+(t?.message||String(t)))}finally{v(!1)}}},disabled:!t||b,style:{marginTop:12,padding:"8px 16px",fontSize:14},children:b?"Processing\u2026":" Capture and Solve"})]}),"screenshot"===S&&(0,n.jsx)("div",{children:M?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{position:"relative",width:320,height:240,border:"2px solid #007bff",borderRadius:8,overflow:"hidden"},children:[(0,n.jsx)("img",{src:E?.dataUrl,alt:"Screenshot",style:{width:"100%",height:"100%",objectFit:"contain"},onMouseDown:e=>A(e,"move")}),z&&E&&(0,n.jsx)("div",{style:{position:"absolute",left:z.x/E.width*100+"%",top:z.y/E.height*100+"%",width:z.width/E.width*100+"%",height:z.height/E.height*100+"%",border:"2px solid #ff4444",backgroundColor:"rgba(255, 68, 68, 0.1)",cursor:"move",boxSizing:"border-box"},onMouseDown:e=>{e.stopPropagation(),A(e,"move")},children:(0,n.jsx)("div",{style:{position:"absolute",right:-4,bottom:-4,width:8,height:8,backgroundColor:"#ff4444",cursor:"se-resize",borderRadius:"50%"},onMouseDown:e=>{e.stopPropagation(),A(e,"resize")}})})]}),(0,n.jsx)("div",{style:{marginTop:8,color:"#666",fontSize:12},children:"Red box shows selected area. Drag to move, drag corner to resize."}),(0,n.jsxs)("div",{style:{marginTop:12,display:"flex",gap:8},children:[(0,n.jsx)("button",{onClick:async function(){if(E&&z){v(!0);try{const e=document.createElement("canvas");e.width=z.width,e.height=z.height;e.getContext("2d").drawImage(E.canvas,z.x,z.y,z.width,z.height,0,0,z.width,z.height);const t=await new Promise((t=>e.toBlob((e=>t(e)),"image/jpeg",.85)));j(Math.round(t.size/1024));const i=await new Promise((e=>{const i=new FileReader;i.onload=()=>e(i.result),i.readAsDataURL(t)})),r=String(i).split(",")[1];await O(r),T(null),P(null),D(!1)}catch(e){f("Error: "+(e?.message||String(e)))}finally{v(!1)}}},disabled:b,style:{padding:"8px 16px",fontSize:14,backgroundColor:"#28a745",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:b?"Processing\u2026":"Analyze Selected Area"}),(0,n.jsx)("button",{onClick:function(){T(null),P(null),D(!1)},disabled:b,style:{padding:"8px 16px",fontSize:14,backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"Cancel"})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{width:320,height:240,background:"#f5f5f5",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",border:"2px dashed #ccc"},children:(0,n.jsxs)("div",{style:{textAlign:"center",color:"#666"},children:[(0,n.jsx)("div",{style:{fontSize:48,marginBottom:8},children:" "}),(0,n.jsx)("div",{children:"Click the button below to start screenshot"})]})}),(0,n.jsx)("div",{style:{marginTop:8,color:"#666"},children:"Screenshot mode: You can select a specific area after capturing"}),(0,n.jsx)("button",{onClick:async function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia){f(""),v(!0);try{const e=await navigator.mediaDevices.getDisplayMedia({video:{mediaSource:"screen"},audio:!1}),t=document.createElement("video");t.srcObject=e,t.play(),await new Promise((e=>{t.onloadedmetadata=e}));const i=document.createElement("canvas");i.width=t.videoWidth,i.height=t.videoHeight;i.getContext("2d").drawImage(t,0,0),e.getTracks().forEach((e=>e.stop()));const r=i.toDataURL("image/jpeg",.85);T({dataUrl:r,width:i.width,height:i.height,canvas:i});const n=.5*Math.min(i.width,i.height);P({x:(i.width-n)/2,y:(i.height-n)/2,width:n,height:n}),D(!0)}catch(e){"NotAllowedError"===e.name?f("Error: The user canceled screen sharing permission"):f("Error: "+(e?.message||String(e)))}finally{v(!1)}}else f("Error: The browser does not support screen capture")},disabled:b,style:{marginTop:12,padding:"8px 16px",fontSize:14},children:b?"Processing\u2026":" Capture Screen"})]})}),"text"===S&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{width:320,minHeight:240,background:"#f9f9f9",borderRadius:8,padding:16,border:"1px solid #ddd"},children:[(0,n.jsx)("div",{style:{marginBottom:12,color:"#666",fontSize:14},children:" Text Question Mode"}),(0,n.jsx)("textarea",{value:C,onChange:e=>R(e.target.value),placeholder:"Please enter your question, for example:\n\u2022 Explain the basic principles of quantum mechanics\n\u2022 Write a Python sorting algorithm\n\u2022 What is 1+1?",style:{width:"100%",height:160,border:"1px solid #ccc",borderRadius:4,padding:8,fontSize:14,resize:"vertical",fontFamily:"inherit"}})]}),(0,n.jsx)("div",{style:{marginTop:8,color:"#666"},children:"Enter your question directly and the AI will provide a detailed answer"}),(0,n.jsx)("button",{onClick:async function(){if(C.trim()){f(""),v(!0);try{await async function(e){const t={question:e,model:"hunyuan-lite"};await L(t)}(C.trim())}catch(e){f("Error: "+(e?.message||String(e)))}finally{v(!1)}}else f("Please enter your question")},disabled:b||!C.trim(),style:{marginTop:12,padding:"8px 16px",fontSize:14},children:b?"Thinking\u2026":" Ask and Get Answer"})]}),null!=w&&(0,n.jsxs)("div",{style:{marginTop:6,fontSize:12,color:"#999"},children:["Last image size: ",w," KB"]})]}),(0,n.jsxs)("div",{style:{flex:1,minWidth:280},children:[(0,n.jsxs)("fieldset",{style:{border:"1px solid #ddd",borderRadius:8,padding:12,marginBottom:16},children:[(0,n.jsx)("legend",{children:"Connection Mode"}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",value:"proxy",checked:"proxy"===o,onChange:e=>s(e.target.value)}),"Proxy Mode (Recommended)"]}),(0,n.jsxs)("label",{style:{marginLeft:16},children:[(0,n.jsx)("input",{type:"radio",value:"direct",checked:"direct"===o,onChange:e=>s(e.target.value)}),"Direct Mode (Testing)"]})]}),"proxy"===o?(0,n.jsxs)("fieldset",{style:{border:"1px solid #d7e3ff",borderRadius:8,padding:12,marginBottom:16,background:"#f7faff"},children:[(0,n.jsx)("legend",{children:"Proxy Settings"}),(0,n.jsxs)("label",{children:["Proxy URL",(0,n.jsx)("br",{}),(0,n.jsx)("input",{value:a,onChange:e=>d(e.target.value),placeholder:"Enter your API endpoint or select from options below",style:{width:"100%"}})]}),(0,n.jsxs)("div",{style:{marginTop:12},children:[(0,n.jsx)("div",{style:{fontSize:12,color:"#666",marginBottom:8},children:"Quick Options:"}),(0,n.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:[(0,n.jsx)("button",{type:"button",onClick:()=>d("http://localhost:3001/api/solve"),style:{padding:"4px 8px",fontSize:11,background:"#e8f4fd",border:"1px solid #b3d9ff",borderRadius:4,cursor:"pointer"},children:"Local Dev"}),(0,n.jsx)("button",{type:"button",onClick:()=>d("https://api.allorigins.win/raw?url="+encodeURIComponent("https://smiler488-github-io.vercel.app/api/solve")),style:{padding:"4px 8px",fontSize:11,background:"#fff2e8",border:"1px solid #ffcc99",borderRadius:4,cursor:"pointer"},children:"CORS Proxy (AllOrigins)"}),(0,n.jsx)("button",{type:"button",onClick:()=>d("https://cors-anywhere.herokuapp.com/https://smiler488-github-io.vercel.app/api/solve"),style:{padding:"4px 8px",fontSize:11,background:"#f0f8e8",border:"1px solid #b3d9b3",borderRadius:4,cursor:"pointer"},children:"CORS Proxy (Heroku)"}),(0,n.jsx)("button",{type:"button",onClick:()=>d("http://localhost:3000/api/solve"),style:{padding:"4px 8px",fontSize:11,background:"#e8f4fd",border:"1px solid #b3d9ff",borderRadius:4,cursor:"pointer"},children:"Local Server"}),(0,n.jsx)("button",{type:"button",onClick:()=>d("https://smiler488github-3q35x1gqq-smiler488s-projects.vercel.app/api/solve"),style:{padding:"4px 8px",fontSize:11,background:"#e8f5e8",border:"1px solid #4caf50",borderRadius:4,cursor:"pointer"},children:"Latest Vercel"}),(0,n.jsx)("button",{type:"button",onClick:()=>d("https://smiler488githubio.vercel.app/api/solve"),style:{padding:"4px 8px",fontSize:11,background:"#f8f0ff",border:"1px solid #d9b3ff",borderRadius:4,cursor:"pointer"},children:"Old Vercel"})]})]}),(0,n.jsxs)("div",{style:{color:"#345",fontSize:12,marginTop:12},children:[(0,n.jsx)("strong",{children:"Tips:"}),(0,n.jsx)("br",{}),"\u2022 Local Dev: For development with local server",(0,n.jsx)("br",{}),"\u2022 CORS Proxy: Bypass CORS restrictions for GitHub Pages",(0,n.jsx)("br",{}),"\u2022 Direct Vercel: Try direct access (may have CORS issues)",(0,n.jsx)("br",{}),"\u2022 Configure in .env.local: HUNYUAN_SECRET_ID, HUNYUAN_SECRET_KEY, HUNYUAN_VERSION"]})]}):(0,n.jsxs)("fieldset",{style:{border:"1px solid #ffe7d7",borderRadius:8,padding:12,marginBottom:16,background:"#fff7f0"},children:[(0,n.jsx)("legend",{children:"Direct Settings (Testing only)"}),(0,n.jsxs)("label",{children:["Secret ID",(0,n.jsx)("br",{}),(0,n.jsx)("input",{value:l,onChange:e=>c(e.target.value),placeholder:"AKIDxxxxx",style:{width:"100%"}})]}),(0,n.jsxs)("label",{style:{display:"block",marginTop:8},children:["Secret Key",(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"password",value:h,onChange:e=>u(e.target.value),placeholder:"Secret Key",style:{width:"100%"}})]}),(0,n.jsx)("div",{style:{color:"#d63031",fontSize:12,marginTop:8},children:"Direct mode exposes the key, for local testing only!"})]}),(0,n.jsxs)("fieldset",{style:{border:"1px solid #ddd",borderRadius:8,padding:12},children:[(0,n.jsx)("legend",{children:"Request Parameters"}),(0,n.jsxs)("label",{children:["Model",(0,n.jsx)("br",{}),(0,n.jsx)("input",{value:x,onChange:e=>m(e.target.value),style:{width:"100%"}})]}),(0,n.jsxs)("label",{style:{display:"block",marginTop:8},children:["Question (for image mode)",(0,n.jsx)("br",{}),(0,n.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),rows:3,style:{width:"100%"}})]})]})]})]}),(0,n.jsxs)("div",{style:{marginTop:16},children:[(0,n.jsx)("h3",{children:"Response"}),(0,n.jsx)("pre",{style:{whiteSpace:"pre-wrap",background:"#111",color:"#0f0",padding:12,borderRadius:8,maxHeight:360,overflow:"auto"},children:y})]})]})}}}]);